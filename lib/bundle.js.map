{"version":3,"file":"bundle.js","sources":["../node_modules/zrender/src/core/env.ts","../node_modules/zrender/src/core/util.ts","../node_modules/zrender/src/core/vector.ts","../node_modules/zrender/src/mixin/Draggable.ts","../node_modules/zrender/src/core/Eventful.ts","../node_modules/zrender/src/core/fourPointsTransform.ts","../node_modules/zrender/src/core/dom.ts","../node_modules/zrender/src/core/event.ts","../node_modules/zrender/src/core/GestureMgr.ts","../node_modules/zrender/src/Handler.ts","../node_modules/zrender/src/core/timsort.ts","../node_modules/zrender/src/graphic/constants.ts","../node_modules/zrender/src/Storage.ts","../node_modules/zrender/src/animation/requestAnimationFrame.ts","../node_modules/zrender/src/animation/easing.ts","../node_modules/zrender/src/animation/Clip.ts","../node_modules/zrender/src/core/LRU.ts","../node_modules/zrender/src/tool/color.ts","../node_modules/zrender/src/animation/Animator.ts","../node_modules/zrender/src/animation/Animation.ts","../node_modules/zrender/src/dom/HandlerProxy.ts","../node_modules/zrender/src/config.ts","../node_modules/zrender/src/core/matrix.ts","../node_modules/zrender/src/core/Transformable.ts","../node_modules/zrender/src/core/Point.ts","../node_modules/zrender/src/core/BoundingRect.ts","../node_modules/zrender/src/contain/text.ts","../node_modules/zrender/src/Element.ts","../node_modules/zrender/src/graphic/Group.ts","../node_modules/zrender/src/zrender.ts","../src/flow.ts"],"sourcesContent":["declare const wx: {\n    getSystemInfoSync: Function\n};\n\nclass Browser {\n    firefox = false\n    ie = false\n    edge = false\n    newEdge = false\n    weChat = false\n    version: string | number\n}\n\nclass Env {\n    browser = new Browser()\n    node = false\n    wxa = false\n    worker = false\n\n    canvasSupported = false\n    svgSupported = false\n    touchEventsSupported = false\n    pointerEventsSupported = false\n    domSupported = false\n    transformSupported = false\n    transform3dSupported = false\n}\n\nconst env = new Env();\n\nif (typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function') {\n    env.wxa = true;\n    env.canvasSupported = true;\n    env.touchEventsSupported = true;\n}\nelse if (typeof document === 'undefined' && typeof self !== 'undefined') {\n    // In worker\n    env.worker = true;\n    env.canvasSupported = true;\n}\nelse if (typeof navigator === 'undefined') {\n    // In node\n    env.node = true;\n    env.canvasSupported = true;\n    env.svgSupported = true;\n}\nelse {\n    detect(navigator.userAgent, env);\n}\n\n// Zepto.js\n// (c) 2010-2013 Thomas Fuchs\n// Zepto.js may be freely distributed under the MIT license.\n\nfunction detect(ua: string, env: Env) {\n    const browser = env.browser;\n    const firefox = ua.match(/Firefox\\/([\\d.]+)/);\n    const ie = ua.match(/MSIE\\s([\\d.]+)/)\n        // IE 11 Trident/7.0; rv:11.0\n        || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\n    const edge = ua.match(/Edge?\\/([\\d.]+)/); // IE 12 and 12+\n\n    const weChat = (/micromessenger/i).test(ua);\n\n    if (firefox) {\n        browser.firefox = true;\n        browser.version = firefox[1];\n    }\n    if (ie) {\n        browser.ie = true;\n        browser.version = ie[1];\n    }\n\n    if (edge) {\n        browser.edge = true;\n        browser.version = edge[1];\n        browser.newEdge = +edge[1].split('.')[0] > 18;\n    }\n\n    // It is difficult to detect WeChat in Win Phone precisely, because ua can\n    // not be set on win phone. So we do not consider Win Phone.\n    if (weChat) {\n        browser.weChat = true;\n    }\n\n    env.canvasSupported = !!document.createElement('canvas').getContext;\n    env.svgSupported = typeof SVGRect !== 'undefined';\n    env.touchEventsSupported = 'ontouchstart' in window && !browser.ie && !browser.edge;\n    env.pointerEventsSupported = 'onpointerdown' in window\n        && (browser.edge || (browser.ie && +browser.version >= 11));\n    env.domSupported = typeof document !== 'undefined';\n\n    const style = document.documentElement.style;\n\n    env.transform3dSupported = (\n        // IE9 only supports transform 2D\n        // transform 3D supported since IE10\n        // we detect it by whether 'transition' is in style\n        (browser.ie && 'transition' in style)\n        // edge\n        || browser.edge\n        // webkit\n        || (('WebKitCSSMatrix' in window) && ('m11' in new WebKitCSSMatrix()))\n        // gecko-based browsers\n        || 'MozPerspective' in style\n    ) // Opera supports CSS transforms after version 12\n      && !('OTransition' in style);\n\n    // except IE 6-8 and very old firefox 2-3 & opera 10.1\n    // other browsers all support `transform`\n    env.transformSupported = env.transform3dSupported\n        // transform 2D is supported in IE9\n        || (browser.ie && +browser.version >= 9);\n\n}\n\n\nexport default env;\n","/* global: defineProperty */\nimport { Dictionary, ArrayLike, KeyOfDistributive } from './types';\nimport { GradientObject } from '../graphic/Gradient';\nimport { ImagePatternObject } from '../graphic/Pattern';\n\n\n// 用于处理merge时无法遍历Date等对象的问题\nconst BUILTIN_OBJECT: {[key: string]: boolean} = {\n    '[object Function]': true,\n    '[object RegExp]': true,\n    '[object Date]': true,\n    '[object Error]': true,\n    '[object CanvasGradient]': true,\n    '[object CanvasPattern]': true,\n    // For node-canvas\n    '[object Image]': true,\n    '[object Canvas]': true\n};\n\nconst TYPED_ARRAY: {[key: string]: boolean} = {\n    '[object Int8Array]': true,\n    '[object Uint8Array]': true,\n    '[object Uint8ClampedArray]': true,\n    '[object Int16Array]': true,\n    '[object Uint16Array]': true,\n    '[object Int32Array]': true,\n    '[object Uint32Array]': true,\n    '[object Float32Array]': true,\n    '[object Float64Array]': true\n};\n\nconst objToString = Object.prototype.toString;\n\nconst arrayProto = Array.prototype;\nconst nativeForEach = arrayProto.forEach;\nconst nativeFilter = arrayProto.filter;\nconst nativeSlice = arrayProto.slice;\nconst nativeMap = arrayProto.map;\n// In case some env may redefine the global variable `Function`.\nconst ctorFunction = function () {}.constructor;\nconst protoFunction = ctorFunction ? ctorFunction.prototype : null;\nconst protoKey = '__proto__';\n\n// Avoid assign to an exported constiable, for transforming to cjs.\nconst methods: {[key: string]: Function} = {};\n\nexport function $override(name: string, fn: Function) {\n    methods[name] = fn;\n}\n\nlet idStart = 0x0907;\n\n/**\n * Generate unique id\n */\nexport function guid(): number {\n    return idStart++;\n}\n\nexport function logError(...args: any[]) {\n    if (typeof console !== 'undefined') {\n        console.error.apply(console, args);\n    }\n}\n/**\n * Those data types can be cloned:\n *     Plain object, Array, TypedArray, number, string, null, undefined.\n * Those data types will be assgined using the orginal data:\n *     BUILTIN_OBJECT\n * Instance of user defined class will be cloned to a plain object, without\n * properties in prototype.\n * Other data types is not supported (not sure what will happen).\n *\n * Caution: do not support clone Date, for performance consideration.\n * (There might be a large number of date in `series.data`).\n * So date should not be modified in and out of echarts.\n */\nexport function clone<T extends any>(source: T): T {\n    if (source == null || typeof source !== 'object') {\n        return source;\n    }\n\n    let result = source as any;\n    const typeStr = <string>objToString.call(source);\n\n    if (typeStr === '[object Array]') {\n        if (!isPrimitive(source)) {\n            result = [] as any;\n            for (let i = 0, len = (source as any[]).length; i < len; i++) {\n                result[i] = clone((source as any[])[i]);\n            }\n        }\n    }\n    else if (TYPED_ARRAY[typeStr]) {\n        if (!isPrimitive(source)) {\n            /* eslint-disable-next-line */\n            const Ctor = source.constructor as typeof Float32Array;\n            if (Ctor.from) {\n                result = Ctor.from(source as Float32Array);\n            }\n            else {\n                result = new Ctor((source as Float32Array).length);\n                for (let i = 0, len = (source as Float32Array).length; i < len; i++) {\n                    result[i] = clone((source as Float32Array)[i]);\n                }\n            }\n        }\n    }\n    else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n        result = {} as any;\n        for (let key in source) {\n            // Check if key is __proto__ to avoid prototype pollution\n            if (source.hasOwnProperty(key) && key !== protoKey) {\n                result[key] = clone(source[key]);\n            }\n        }\n    }\n\n    return result;\n}\n\nexport function merge<\n    T extends Dictionary<any>,\n    S extends Dictionary<any>\n>(target: T, source: S, overwrite?: boolean): T & S;\nexport function merge<\n    T extends any,\n    S extends any\n>(target: T, source: S, overwrite?: boolean): T | S;\nexport function merge(target: any, source: any, overwrite?: boolean): any {\n    // We should escapse that source is string\n    // and enter for ... in ...\n    if (!isObject(source) || !isObject(target)) {\n        return overwrite ? clone(source) : target;\n    }\n\n    for (let key in source) {\n        // Check if key is __proto__ to avoid prototype pollution\n        if (source.hasOwnProperty(key) && key !== protoKey) {\n            const targetProp = target[key];\n            const sourceProp = source[key];\n\n            if (isObject(sourceProp)\n                && isObject(targetProp)\n                && !isArray(sourceProp)\n                && !isArray(targetProp)\n                && !isDom(sourceProp)\n                && !isDom(targetProp)\n                && !isBuiltInObject(sourceProp)\n                && !isBuiltInObject(targetProp)\n                && !isPrimitive(sourceProp)\n                && !isPrimitive(targetProp)\n            ) {\n                // 如果需要递归覆盖，就递归调用merge\n                merge(targetProp, sourceProp, overwrite);\n            }\n            else if (overwrite || !(key in target)) {\n                // 否则只处理overwrite为true，或者在目标对象中没有此属性的情况\n                // NOTE，在 target[key] 不存在的时候也是直接覆盖\n                target[key] = clone(source[key]);\n            }\n        }\n    }\n\n    return target;\n}\n\n/**\n * @param targetAndSources The first item is target, and the rests are source.\n * @param overwrite\n * @return Merged result\n */\nexport function mergeAll(targetAndSources: any[], overwrite?: boolean): any {\n    let result = targetAndSources[0];\n    for (let i = 1, len = targetAndSources.length; i < len; i++) {\n        result = merge(result, targetAndSources[i], overwrite);\n    }\n    return result;\n}\n\nexport function extend<\n    T extends Dictionary<any>,\n    S extends Dictionary<any>\n>(target: T, source: S): T & S {\n    // @ts-ignore\n    if (Object.assign) {\n        // @ts-ignore\n        Object.assign(target, source);\n    }\n    else {\n        for (let key in source) {\n            // Check if key is __proto__ to avoid prototype pollution\n            if (source.hasOwnProperty(key) && key !== protoKey) {\n                (target as S & T)[key] = (source as T & S)[key];\n            }\n        }\n    }\n    return target as T & S;\n}\n\nexport function defaults<\n    T extends Dictionary<any>,\n    S extends Dictionary<any>\n>(target: T, source: S, overlay?: boolean): T & S {\n    const keysArr = keys(source);\n    for (let i = 0; i < keysArr.length; i++) {\n        let key = keysArr[i];\n        if ((overlay ? source[key] != null : (target as T & S)[key] == null)) {\n            (target as S & T)[key] = (source as T & S)[key];\n        }\n    }\n    return target as T & S;\n}\n\nexport const createCanvas = function (): HTMLCanvasElement {\n    return methods.createCanvas();\n};\n\nmethods.createCanvas = function (): HTMLCanvasElement {\n    return document.createElement('canvas');\n};\n\n/**\n * 查询数组中元素的index\n */\nexport function indexOf<T>(array: T[] | readonly T[] | ArrayLike<T>, value: T): number {\n    if (array) {\n        if ((array as T[]).indexOf) {\n            return (array as T[]).indexOf(value);\n        }\n        for (let i = 0, len = array.length; i < len; i++) {\n            if (array[i] === value) {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\n\n/**\n * 构造类继承关系\n *\n * @param clazz 源类\n * @param baseClazz 基类\n */\nexport function inherits(clazz: Function, baseClazz: Function) {\n    const clazzPrototype = clazz.prototype;\n    function F() {}\n    F.prototype = baseClazz.prototype;\n    clazz.prototype = new (F as any)();\n\n    for (let prop in clazzPrototype) {\n        if (clazzPrototype.hasOwnProperty(prop)) {\n            clazz.prototype[prop] = clazzPrototype[prop];\n        }\n    }\n    clazz.prototype.constructor = clazz;\n    (clazz as any).superClass = baseClazz;\n}\n\nexport function mixin<T, S>(target: T | Function, source: S | Function, override?: boolean) {\n    target = 'prototype' in target ? target.prototype : target;\n    source = 'prototype' in source ? source.prototype : source;\n    // If build target is ES6 class. prototype methods is not enumerable. Use getOwnPropertyNames instead\n    // TODO: Determine if source is ES6 class?\n    if (Object.getOwnPropertyNames) {\n        const keyList = Object.getOwnPropertyNames(source);\n        for (let i = 0; i < keyList.length; i++) {\n            const key = keyList[i];\n            if (key !== 'constructor') {\n                if ((override ? (source as any)[key] != null : (target as any)[key] == null)) {\n                    (target as any)[key] = (source as any)[key];\n                }\n            }\n        }\n    }\n    else {\n        defaults(target, source, override);\n    }\n}\n\n/**\n * Consider typed array.\n * @param data\n */\nexport function isArrayLike(data: any): data is ArrayLike<any> {\n    if (!data) {\n        return false;\n    }\n    if (typeof data === 'string') {\n        return false;\n    }\n    return typeof data.length === 'number';\n}\n\n/**\n * 数组或对象遍历\n */\nexport function each<I extends Dictionary<any> | any[] | readonly any[] | ArrayLike<any>, Context>(\n    arr: I,\n    cb: (\n        this: Context,\n        // Use unknown to avoid to infer to \"any\", which may disable typo check.\n        value: I extends (infer T)[] | readonly (infer T)[] | ArrayLike<infer T> ? T\n            // Use Dictionary<infer T> may cause infer fail when I is an interface.\n            // So here use a Record to infer type.\n            : I extends Dictionary<any> ? I extends Record<infer K, infer T> ? T : unknown : unknown,\n        index?: I extends any[] | readonly any[] | ArrayLike<any> ? number : keyof I & string,  // keyof Dictionary will return number | string\n        arr?: I\n    ) => void,\n    context?: Context\n) {\n    if (!(arr && cb)) {\n        return;\n    }\n    if ((arr as any).forEach && (arr as any).forEach === nativeForEach) {\n        (arr as any).forEach(cb, context);\n    }\n    else if (arr.length === +arr.length) {\n        for (let i = 0, len = arr.length; i < len; i++) {\n            // FIXME: should the elided item be travelled? like `[33,,55]`.\n            cb.call(context, (arr as any[])[i], i as any, arr);\n        }\n    }\n    else {\n        for (let key in arr) {\n            if (arr.hasOwnProperty(key)) {\n                cb.call(context, (arr as Dictionary<any>)[key], key as any, arr);\n            }\n        }\n    }\n}\n\n/**\n * Array mapping.\n * @typeparam T Type in Array\n * @typeparam R Type Returned\n * @return Must be an array.\n */\nexport function map<T, R, Context>(\n    arr: readonly T[],\n    cb: (this: Context, val: T, index?: number, arr?: readonly T[]) => R,\n    context?: Context\n): R[] {\n    // Take the same behavior with lodash when !arr and !cb,\n    // which might be some common sense.\n    if (!arr) {\n        return [];\n    }\n    if (!cb) {\n        return slice(arr) as unknown[] as R[];\n    }\n    if (arr.map && arr.map === nativeMap) {\n        return arr.map(cb, context);\n    }\n    else {\n        const result = [];\n        for (let i = 0, len = arr.length; i < len; i++) {\n            // FIXME: should the elided item be travelled, like `[33,,55]`.\n            result.push(cb.call(context, arr[i], i, arr));\n        }\n        return result;\n    }\n}\n\nexport function reduce<T, S, Context>(\n    arr: readonly T[],\n    cb: (this: Context, previousValue: S, currentValue: T, currentIndex?: number, arr?: readonly T[]) => S,\n    memo?: S,\n    context?: Context\n): S {\n    if (!(arr && cb)) {\n        return;\n    }\n    for (let i = 0, len = arr.length; i < len; i++) {\n        memo = cb.call(context, memo, arr[i], i, arr);\n    }\n    return memo;\n}\n\n/**\n * Array filtering.\n * @return Must be an array.\n */\nexport function filter<T, Context>(\n    arr: readonly T[],\n    cb: (this: Context, value: T, index: number, arr: readonly T[]) => boolean,\n    context?: Context\n): T[] {\n    // Take the same behavior with lodash when !arr and !cb,\n    // which might be some common sense.\n    if (!arr) {\n        return [];\n    }\n    if (!cb) {\n        return slice(arr);\n    }\n    if (arr.filter && arr.filter === nativeFilter) {\n        return arr.filter(cb, context);\n    }\n    else {\n        const result = [];\n        for (let i = 0, len = arr.length; i < len; i++) {\n            // FIXME: should the elided items be travelled? like `[33,,55]`.\n            if (cb.call(context, arr[i], i, arr)) {\n                result.push(arr[i]);\n            }\n        }\n        return result;\n    }\n}\n\n/**\n * 数组项查找\n */\nexport function find<T, Context>(\n    arr: readonly T[],\n    cb: (this: Context, value: T, index?: number, arr?: readonly T[]) => boolean,\n    context?: Context\n): T {\n    if (!(arr && cb)) {\n        return;\n    }\n    for (let i = 0, len = arr.length; i < len; i++) {\n        if (cb.call(context, arr[i], i, arr)) {\n            return arr[i];\n        }\n    }\n}\n\n/**\n * Get all object keys\n *\n * Will return an empty array if obj is null/undefined\n */\nexport function keys<T extends object>(obj: T): (KeyOfDistributive<T> & string)[] {\n    if (!obj) {\n        return [];\n    }\n    // Return type should be `keyof T` but exclude `number`, becuase\n    // `Object.keys` only return string rather than `number | string`.\n    type TKeys = KeyOfDistributive<T> & string;\n    if (Object.keys) {\n        return Object.keys(obj) as TKeys[];\n    }\n    let keyList: TKeys[] = [];\n    for (let key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            keyList.push(key as any);\n        }\n    }\n    return keyList;\n}\n\n\n// Remove this type in returned function. Or it will conflicts wicth callback with given context. Like Eventful.\n// According to lib.es5.d.ts\n/* eslint-disable max-len*/\nexport type Bind1<F, Ctx> = F extends (this: Ctx, ...args: infer A) => infer R ? (...args: A) => R : unknown;\nexport type Bind2<F, Ctx, T1> = F extends (this: Ctx, a: T1, ...args: infer A) => infer R ? (...args: A) => R : unknown;\nexport type Bind3<F, Ctx, T1, T2> = F extends (this: Ctx, a: T1, b: T2, ...args: infer A) => infer R ? (...args: A) => R : unknown;\nexport type Bind4<F, Ctx, T1, T2, T3> = F extends (this: Ctx, a: T1, b: T2, c: T3, ...args: infer A) => infer R ? (...args: A) => R : unknown;\nexport type Bind5<F, Ctx, T1, T2, T3, T4> = F extends (this: Ctx, a: T1, b: T2, c: T3, d: T4, ...args: infer A) => infer R ? (...args: A) => R : unknown;\ntype BindFunc<Ctx> = (this: Ctx, ...arg: any[]) => any\n\ninterface FunctionBind {\n    <F extends BindFunc<Ctx>, Ctx>(func: F, ctx: Ctx): Bind1<F, Ctx>\n    <F extends BindFunc<Ctx>, Ctx, T1 extends Parameters<F>[0]>(func: F, ctx: Ctx, a: T1): Bind2<F, Ctx, T1>\n    <F extends BindFunc<Ctx>, Ctx, T1 extends Parameters<F>[0], T2 extends Parameters<F>[1]>(func: F, ctx: Ctx, a: T1, b: T2): Bind3<F, Ctx, T1, T2>\n    <F extends BindFunc<Ctx>, Ctx, T1 extends Parameters<F>[0], T2 extends Parameters<F>[1], T3 extends Parameters<F>[2]>(func: F, ctx: Ctx, a: T1, b: T2, c: T3): Bind4<F, Ctx, T1, T2, T3>\n    <F extends BindFunc<Ctx>, Ctx, T1 extends Parameters<F>[0], T2 extends Parameters<F>[1], T3 extends Parameters<F>[2], T4 extends Parameters<F>[3]>(func: F, ctx: Ctx, a: T1, b: T2, c: T3, d: T4): Bind5<F, Ctx, T1, T2, T3, T4>\n}\nfunction bindPolyfill<Ctx, Fn extends(...args: any) => any>(\n    func: Fn, context: Ctx, ...args: any[]\n): (...args: Parameters<Fn>) => ReturnType<Fn> {\n    return function (this: Ctx) {\n        return func.apply(context, args.concat(nativeSlice.call(arguments)));\n    };\n}\nexport const bind: FunctionBind = (protoFunction && isFunction(protoFunction.bind))\n    ? protoFunction.call.bind(protoFunction.bind)\n    : bindPolyfill;\n\nexport type Curry1<F, T1> = F extends (a: T1, ...args: infer A) => infer R ? (...args: A) => R : unknown;\nexport type Curry2<F, T1, T2> = F extends (a: T1, b: T2, ...args: infer A) => infer R ? (...args: A) => R : unknown;\nexport type Curry3<F, T1, T2, T3> = F extends (a: T1, b: T2, c: T3, ...args: infer A) => infer R ? (...args: A) => R : unknown;\nexport type Curry4<F, T1, T2, T3, T4> = F extends (a: T1, b: T2, c: T3, d: T4, ...args: infer A) => infer R ? (...args: A) => R : unknown;\ntype CurryFunc = (...arg: any[]) => any\n\nfunction curry<F extends CurryFunc, T1 extends Parameters<F>[0]>(func: F, a: T1): Curry1<F, T1>\nfunction curry<F extends CurryFunc, T1 extends Parameters<F>[0], T2 extends Parameters<F>[1]>(func: F, a: T1, b: T2): Curry2<F, T1, T2>\nfunction curry<F extends CurryFunc, T1 extends Parameters<F>[0], T2 extends Parameters<F>[1], T3 extends Parameters<F>[2]>(func: F, a: T1, b: T2, c: T3): Curry3<F, T1, T2, T3>\nfunction curry<F extends CurryFunc, T1 extends Parameters<F>[0], T2 extends Parameters<F>[1], T3 extends Parameters<F>[2], T4 extends Parameters<F>[3]>(func: F, a: T1, b: T2, c: T3, d: T4): Curry4<F, T1, T2, T3, T4>\nfunction curry(func: Function, ...args: any[]): Function {\n    return function (this: any) {\n        return func.apply(this, args.concat(nativeSlice.call(arguments)));\n    };\n}\nexport {curry};\n/* eslint-enable max-len*/\n\nexport function isArray(value: any): value is any[] {\n    if (Array.isArray) {\n        return Array.isArray(value);\n    }\n    return objToString.call(value) === '[object Array]';\n}\n\nexport function isFunction(value: any): value is Function {\n    return typeof value === 'function';\n}\n\nexport function isString(value: any): value is string {\n    // Faster than `objToString.call` several times in chromium and webkit.\n    // And `new String()` is rarely used.\n    return typeof value === 'string';\n}\n\nexport function isStringSafe(value: any): value is string {\n    return objToString.call(value) === '[object String]';\n}\n\nexport function isNumber(value: any): value is number {\n    // Faster than `objToString.call` several times in chromium and webkit.\n    // And `new Number()` is rarely used.\n    return typeof value === 'number';\n}\n\n// Usage: `isObject(xxx)` or `isObject(SomeType)(xxx)`\n// Generic T can be used to avoid \"ts type gruards\" casting the `value` from its original\n// type `Object` implicitly so that loose its original type info in the subsequent code.\nexport function isObject<T = unknown>(value: T): value is (object & T) {\n    // Avoid a V8 JIT bug in Chrome 19-20.\n    // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n    const type = typeof value;\n    return type === 'function' || (!!value && type === 'object');\n}\n\nexport function isBuiltInObject(value: any): boolean {\n    return !!BUILTIN_OBJECT[objToString.call(value)];\n}\n\nexport function isTypedArray(value: any): boolean {\n    return !!TYPED_ARRAY[objToString.call(value)];\n}\n\nexport function isDom(value: any): value is HTMLElement {\n    return typeof value === 'object'\n        && typeof value.nodeType === 'number'\n        && typeof value.ownerDocument === 'object';\n}\n\nexport function isGradientObject(value: any): value is GradientObject {\n    return (value as GradientObject).colorStops != null;\n}\n\nexport function isImagePatternObject(value: any): value is ImagePatternObject {\n    return (value as ImagePatternObject).image != null;\n}\n\nexport function isRegExp(value: unknown): value is RegExp {\n    return objToString.call(value) === '[object RegExp]';\n}\n\n/**\n * Whether is exactly NaN. Notice isNaN('a') returns true.\n */\nexport function eqNaN(value: any): boolean {\n    /* eslint-disable-next-line no-self-compare */\n    return value !== value;\n}\n\n/**\n * If value1 is not null, then return value1, otherwise judget rest of values.\n * Low performance.\n * @return Final value\n */\nexport function retrieve<T>(...args: T[]): T {\n    for (let i = 0, len = args.length; i < len; i++) {\n        if (args[i] != null) {\n            return args[i];\n        }\n    }\n}\n\nexport function retrieve2<T, R>(value0: T, value1: R): T | R {\n    return value0 != null\n        ? value0\n        : value1;\n}\n\nexport function retrieve3<T, R, W>(value0: T, value1: R, value2: W): T | R | W {\n    return value0 != null\n        ? value0\n        : value1 != null\n        ? value1\n        : value2;\n}\n\ntype SliceParams = Parameters<typeof nativeSlice>;\nexport function slice<T>(arr: ArrayLike<T>, ...args: SliceParams): T[] {\n    return nativeSlice.apply(arr, args as any[]);\n}\n\n/**\n * Normalize css liked array configuration\n * e.g.\n *  3 => [3, 3, 3, 3]\n *  [4, 2] => [4, 2, 4, 2]\n *  [4, 3, 2] => [4, 3, 2, 3]\n */\nexport function normalizeCssArray(val: number | number[]) {\n    if (typeof (val) === 'number') {\n        return [val, val, val, val];\n    }\n    const len = val.length;\n    if (len === 2) {\n        // vertical | horizontal\n        return [val[0], val[1], val[0], val[1]];\n    }\n    else if (len === 3) {\n        // top | horizontal | bottom\n        return [val[0], val[1], val[2], val[1]];\n    }\n    return val;\n}\n\nexport function assert(condition: any, message?: string) {\n    if (!condition) {\n        throw new Error(message);\n    }\n}\n\n/**\n * @param str string to be trimed\n * @return trimed string\n */\nexport function trim(str: string): string {\n    if (str == null) {\n        return null;\n    }\n    else if (typeof str.trim === 'function') {\n        return str.trim();\n    }\n    else {\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n}\n\nconst primitiveKey = '__ec_primitive__';\n/**\n * Set an object as primitive to be ignored traversing children in clone or merge\n */\nexport function setAsPrimitive(obj: any) {\n    obj[primitiveKey] = true;\n}\n\nexport function isPrimitive(obj: any): boolean {\n    return obj[primitiveKey];\n}\n\n\n/**\n * @constructor\n * @param {Object} obj Only apply `ownProperty`.\n */\nexport class HashMap<T, KEY extends string | number = string | number> {\n\n    data: {[key in KEY]: T} = {} as {[key in KEY]: T};\n\n    constructor(obj?: HashMap<T, KEY> | { [key in KEY]?: T } | KEY[]) {\n        const isArr = isArray(obj);\n        // Key should not be set on this, otherwise\n        // methods get/set/... may be overrided.\n        this.data = {} as {[key in KEY]: T};\n        const thisMap = this;\n\n        (obj instanceof HashMap)\n            ? obj.each(visit)\n            : (obj && each(obj, visit));\n\n        function visit(value: any, key: any) {\n            isArr ? thisMap.set(value, key) : thisMap.set(key, value);\n        }\n    }\n\n    // Do not provide `has` method to avoid defining what is `has`.\n    // (We usually treat `null` and `undefined` as the same, different\n    // from ES6 Map).\n    get(key: KEY): T {\n        return this.data.hasOwnProperty(key) ? this.data[key] : null;\n    }\n    set(key: KEY, value: T): T {\n        // Comparing with invocation chaining, `return value` is more commonly\n        // used in this case: `const someVal = map.set('a', genVal());`\n        return (this.data[key] = value);\n    }\n    // Although util.each can be performed on this hashMap directly, user\n    // should not use the exposed keys, who are prefixed.\n    each<Context>(\n        cb: (this: Context, value?: T, key?: KEY) => void,\n        context?: Context\n    ) {\n        for (let key in this.data) {\n            if (this.data.hasOwnProperty(key)) {\n                cb.call(context, this.data[key], key);\n            }\n        }\n    }\n    keys(): KEY[] {\n        return keys(this.data);\n    }\n    // Do not use this method if performance sensitive.\n    removeKey(key: KEY) {\n        delete this.data[key];\n    }\n}\n\nexport function createHashMap<T, KEY extends string | number = string | number>(\n    obj?: HashMap<T, KEY> | { [key in KEY]?: T } | KEY[]\n) {\n    return new HashMap<T, KEY>(obj);\n}\n\nexport function concatArray<T, R>(a: ArrayLike<T>, b: ArrayLike<R>): ArrayLike<T | R> {\n    const newArray = new (a as any).constructor(a.length + b.length);\n    for (let i = 0; i < a.length; i++) {\n        newArray[i] = a[i];\n    }\n    const offset = a.length;\n    for (let i = 0; i < b.length; i++) {\n        newArray[i + offset] = b[i];\n    }\n    return newArray;\n}\n\nexport function createObject<T>(proto?: object, properties?: T): T {\n    // Performance of Object.create\n    // https://jsperf.com/style-strategy-proto-or-others\n    let obj: T;\n    if (Object.create) {\n        obj = Object.create(proto);\n    }\n    else {\n        const StyleCtor = function () {};\n        StyleCtor.prototype = proto;\n        obj = new (StyleCtor as any)();\n    }\n    if (properties) {\n        extend(obj, properties);\n    }\n\n    return obj;\n}\n\nexport function hasOwn(own: object, prop: string): boolean {\n    return own.hasOwnProperty(prop);\n}\n\nexport function noop() {}\n","/**\n * @deprecated\n * Use zrender.Point class instead\n */\nimport { MatrixArray } from './matrix';\n\n/* global Float32Array */\n\n// const ArrayCtor = typeof Float32Array === 'undefined'\n//     ? Array\n//     : Float32Array;\n\nexport type VectorArray = number[]\n/**\n * 创建一个向量\n */\nexport function create(x?: number, y?: number): VectorArray {\n    if (x == null) {\n        x = 0;\n    }\n    if (y == null) {\n        y = 0;\n    }\n    return [x, y];\n}\n\n/**\n * 复制向量数据\n */\nexport function copy<T extends VectorArray>(out: T, v: VectorArray): T {\n    out[0] = v[0];\n    out[1] = v[1];\n    return out;\n}\n\n/**\n * 克隆一个向量\n */\nexport function clone(v: VectorArray): VectorArray {\n    return [v[0], v[1]];\n}\n\n/**\n * 设置向量的两个项\n */\nexport function set<T extends VectorArray>(out: T, a: number, b: number): T {\n    out[0] = a;\n    out[1] = b;\n    return out;\n}\n\n/**\n * 向量相加\n */\nexport function add<T extends VectorArray>(out: T, v1: VectorArray, v2: VectorArray): T {\n    out[0] = v1[0] + v2[0];\n    out[1] = v1[1] + v2[1];\n    return out;\n}\n\n/**\n * 向量缩放后相加\n */\nexport function scaleAndAdd<T extends VectorArray>(out: T, v1: VectorArray, v2: VectorArray, a: number): T {\n    out[0] = v1[0] + v2[0] * a;\n    out[1] = v1[1] + v2[1] * a;\n    return out;\n}\n\n/**\n * 向量相减\n */\nexport function sub<T extends VectorArray>(out: T, v1: VectorArray, v2: VectorArray): T {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    return out;\n}\n\n/**\n * 向量长度\n */\nexport function len(v: VectorArray): number {\n    return Math.sqrt(lenSquare(v));\n}\nexport const length = len;\n\n/**\n * 向量长度平方\n */\nexport function lenSquare(v: VectorArray): number {\n    return v[0] * v[0] + v[1] * v[1];\n}\nexport const lengthSquare = lenSquare;\n\n/**\n * 向量乘法\n */\nexport function mul<T extends VectorArray>(out: T, v1: VectorArray, v2: VectorArray): T {\n    out[0] = v1[0] * v2[0];\n    out[1] = v1[1] * v2[1];\n    return out;\n}\n\n/**\n * 向量除法\n */\nexport function div<T extends VectorArray>(out: T, v1: VectorArray, v2: VectorArray): T {\n    out[0] = v1[0] / v2[0];\n    out[1] = v1[1] / v2[1];\n    return out;\n}\n\n/**\n * 向量点乘\n */\nexport function dot(v1: VectorArray, v2: VectorArray) {\n    return v1[0] * v2[0] + v1[1] * v2[1];\n}\n\n/**\n * 向量缩放\n */\nexport function scale<T extends VectorArray>(out: T, v: VectorArray, s: number): T {\n    out[0] = v[0] * s;\n    out[1] = v[1] * s;\n    return out;\n}\n\n/**\n * 向量归一化\n */\nexport function normalize<T extends VectorArray>(out: T, v: VectorArray): T {\n    const d = len(v);\n    if (d === 0) {\n        out[0] = 0;\n        out[1] = 0;\n    }\n    else {\n        out[0] = v[0] / d;\n        out[1] = v[1] / d;\n    }\n    return out;\n}\n\n/**\n * 计算向量间距离\n */\nexport function distance(v1: VectorArray, v2: VectorArray): number {\n    return Math.sqrt(\n        (v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1])\n    );\n}\nexport const dist = distance;\n\n/**\n * 向量距离平方\n */\nexport function distanceSquare(v1: VectorArray, v2: VectorArray): number {\n    return (v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n}\nexport const distSquare = distanceSquare;\n\n/**\n * 求负向量\n */\nexport function negate<T extends VectorArray>(out: T, v: VectorArray): T {\n    out[0] = -v[0];\n    out[1] = -v[1];\n    return out;\n}\n\n/**\n * 插值两个点\n */\nexport function lerp<T extends VectorArray>(out: T, v1: VectorArray, v2: VectorArray, t: number): T {\n    out[0] = v1[0] + t * (v2[0] - v1[0]);\n    out[1] = v1[1] + t * (v2[1] - v1[1]);\n    return out;\n}\n\n/**\n * 矩阵左乘向量\n */\nexport function applyTransform<T extends VectorArray>(out: T, v: VectorArray, m: MatrixArray): T {\n    const x = v[0];\n    const y = v[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n}\n\n/**\n * 求两个向量最小值\n */\nexport function min<T extends VectorArray>(out: T, v1: VectorArray, v2: VectorArray): T {\n    out[0] = Math.min(v1[0], v2[0]);\n    out[1] = Math.min(v1[1], v2[1]);\n    return out;\n}\n\n/**\n * 求两个向量最大值\n */\nexport function max<T extends VectorArray>(out: T, v1: VectorArray, v2: VectorArray): T {\n    out[0] = Math.max(v1[0], v2[0]);\n    out[1] = Math.max(v1[1], v2[1]);\n    return out;\n}\n","import Handler from '../Handler';\nimport Element, { ElementEvent } from '../Element';\nimport Displayable from '../graphic/Displayable';\n\nclass Param {\n\n    target: Element\n    topTarget: Element\n\n    constructor(target: Element, e?: ElementEvent) {\n        this.target = target;\n        this.topTarget = e && e.topTarget;\n    }\n}\n\n// FIXME Draggable on element which has parent rotation or scale\nexport default class Draggable {\n\n    handler: Handler\n\n    _draggingTarget: Element\n    _dropTarget: Element\n\n    _x: number\n    _y: number\n\n    constructor(handler: Handler) {\n        this.handler = handler;\n\n        handler.on('mousedown', this._dragStart, this);\n        handler.on('mousemove', this._drag, this);\n        handler.on('mouseup', this._dragEnd, this);\n        // `mosuemove` and `mouseup` can be continue to fire when dragging.\n        // See [DRAG_OUTSIDE] in `Handler.js`. So we do not need to trigger\n        // `_dragEnd` when globalout. That would brings better user experience.\n        // this.on('globalout', this._dragEnd, this);\n\n        // this._dropTarget = null;\n        // this._draggingTarget = null;\n\n        // this._x = 0;\n        // this._y = 0;\n    }\n\n    _dragStart(e: ElementEvent) {\n        let draggingTarget = e.target;\n        // Find if there is draggable in the ancestor\n        while (draggingTarget && !draggingTarget.draggable) {\n            draggingTarget = draggingTarget.parent;\n        }\n        if (draggingTarget) {\n            this._draggingTarget = draggingTarget;\n            draggingTarget.dragging = true;\n            this._x = e.offsetX;\n            this._y = e.offsetY;\n\n            this.handler.dispatchToElement(\n                new Param(draggingTarget, e), 'dragstart', e.event\n            );\n        }\n    }\n\n    _drag(e: ElementEvent) {\n        const draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n\n            const x = e.offsetX;\n            const y = e.offsetY;\n\n            const dx = x - this._x;\n            const dy = y - this._y;\n            this._x = x;\n            this._y = y;\n\n            draggingTarget.drift(dx, dy, e);\n            this.handler.dispatchToElement(\n                new Param(draggingTarget, e), 'drag', e.event\n            );\n\n            const dropTarget = this.handler.findHover(\n                x, y, draggingTarget as Displayable // PENDING\n            ).target;\n            const lastDropTarget = this._dropTarget;\n            this._dropTarget = dropTarget;\n\n            if (draggingTarget !== dropTarget) {\n                if (lastDropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(\n                        new Param(lastDropTarget, e), 'dragleave', e.event\n                    );\n                }\n                if (dropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(\n                        new Param(dropTarget, e), 'dragenter', e.event\n                    );\n                }\n            }\n        }\n    }\n\n    _dragEnd(e: ElementEvent) {\n        const draggingTarget = this._draggingTarget;\n\n        if (draggingTarget) {\n            draggingTarget.dragging = false;\n        }\n\n        this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragend', e.event);\n\n        if (this._dropTarget) {\n            this.handler.dispatchToElement(new Param(this._dropTarget, e), 'drop', e.event);\n        }\n\n        this._draggingTarget = null;\n        this._dropTarget = null;\n    }\n\n}","import { Dictionary, WithThisType } from './types';\n\n// Return true to cancel bubble\nexport type EventCallbackSingleParam<EvtParam = any> = EvtParam extends any\n    ? (params: EvtParam) => boolean | void\n    : never\n\nexport type EventCallback<EvtParams = any[]> = EvtParams extends any[]\n    ? (...args: EvtParams) => boolean | void\n    : never\nexport type EventQuery = string | Object\n\ntype CbThis<Ctx, Impl> = unknown extends Ctx ? Impl : Ctx;\n\ntype EventHandler<Ctx, Impl, EvtParams> = {\n    h: EventCallback<EvtParams>\n    ctx: CbThis<Ctx, Impl>\n    query: EventQuery\n\n    callAtLast: boolean\n}\n\ntype DefaultEventDefinition = Dictionary<EventCallback<any[]>>;\n\nexport interface EventProcessor<EvtDef = DefaultEventDefinition> {\n    normalizeQuery?: (query: EventQuery) => EventQuery\n    filter?: (eventType: keyof EvtDef, query: EventQuery) => boolean\n    afterTrigger?: (eventType: keyof EvtDef) => void\n}\n\n/**\n * Event dispatcher.\n *\n * Event can be defined in EvtDef to enable type check. For example:\n * ```ts\n * interface FooEvents {\n *     // key: event name, value: the first event param in `trigger` and `callback`.\n *     myevent: {\n *        aa: string;\n *        bb: number;\n *     };\n * }\n * class Foo extends Eventful<FooEvents> {\n *     fn() {\n *         // Type check of event name and the first event param is enabled here.\n *         this.trigger('myevent', {aa: 'xx', bb: 3});\n *     }\n * }\n * let foo = new Foo();\n * // Type check of event name and the first event param is enabled here.\n * foo.on('myevent', (eventParam) => { ... });\n * ```\n *\n * @param eventProcessor The object eventProcessor is the scope when\n *        `eventProcessor.xxx` called.\n * @param eventProcessor.normalizeQuery\n *        param: {string|Object} Raw query.\n *        return: {string|Object} Normalized query.\n * @param eventProcessor.filter Event will be dispatched only\n *        if it returns `true`.\n *        param: {string} eventType\n *        param: {string|Object} query\n *        return: {boolean}\n * @param eventProcessor.afterTrigger Called after all handlers called.\n *        param: {string} eventType\n */\nexport default class Eventful<EvtDef extends DefaultEventDefinition = DefaultEventDefinition> {\n\n    private _$handlers: Dictionary<EventHandler<any, any, any[]>[]>\n\n    protected _$eventProcessor: EventProcessor<EvtDef>\n\n    constructor(eventProcessors?: EventProcessor<EvtDef>) {\n        if (eventProcessors) {\n            this._$eventProcessor = eventProcessors;\n        }\n    }\n\n    on<Ctx, EvtNm extends keyof EvtDef>(\n        event: EvtNm,\n        handler: WithThisType<EvtDef[EvtNm], CbThis<Ctx, this>>,\n        context?: Ctx\n    ): this\n    on<Ctx, EvtNm extends keyof EvtDef>(\n        event: EvtNm,\n        query: EventQuery,\n        handler: WithThisType<EvtDef[EvtNm], CbThis<Ctx, this>>,\n        context?: Ctx\n    ): this\n    /**\n     * Bind a handler.\n     *\n     * @param event The event name.\n     * @param Condition used on event filter.\n     * @param handler The event handler.\n     * @param context\n     */\n    on<Ctx, EvtNm extends keyof EvtDef>(\n        event: EvtNm,\n        query: EventQuery | WithThisType<EventCallback<EvtDef[EvtNm]>, CbThis<Ctx, this>>,\n        handler?: WithThisType<EventCallback<EvtDef[EvtNm]>, CbThis<Ctx, this>> | Ctx,\n        context?: Ctx\n    ): this {\n        if (!this._$handlers) {\n            this._$handlers = {};\n        }\n\n        const _h = this._$handlers;\n\n        if (typeof query === 'function') {\n            context = handler as Ctx;\n            handler = query as (...args: any) => any;\n            query = null;\n        }\n\n        if (!handler || !event) {\n            return this;\n        }\n\n        const eventProcessor = this._$eventProcessor;\n        if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\n            query = eventProcessor.normalizeQuery(query);\n        }\n\n        if (!_h[event as string]) {\n            _h[event as string] = [];\n        }\n\n        for (let i = 0; i < _h[event as string].length; i++) {\n            if (_h[event as string][i].h === handler) {\n                return this;\n            }\n        }\n\n        const wrap: EventHandler<Ctx, this, unknown[]> = {\n            h: handler as EventCallback<unknown[]>,\n            query: query,\n            ctx: (context || this) as CbThis<Ctx, this>,\n            // FIXME\n            // Do not publish this feature util it is proved that it makes sense.\n            callAtLast: (handler as any).zrEventfulCallAtLast\n        };\n\n        const lastIndex = _h[event as string].length - 1;\n        const lastWrap = _h[event as string][lastIndex];\n        (lastWrap && lastWrap.callAtLast)\n            ? _h[event as string].splice(lastIndex, 0, wrap)\n            : _h[event as string].push(wrap);\n\n        return this;\n    }\n\n    /**\n     * Whether any handler has bound.\n     */\n    isSilent(eventName: keyof EvtDef): boolean {\n        const _h = this._$handlers;\n        return !_h || !_h[eventName as string] || !_h[eventName as string].length;\n    }\n\n    /**\n     * Unbind a event.\n     *\n     * @param eventType The event name.\n     *        If no `event` input, \"off\" all listeners.\n     * @param handler The event handler.\n     *        If no `handler` input, \"off\" all listeners of the `event`.\n     */\n    off(eventType?: keyof EvtDef, handler?: Function): this {\n        const _h = this._$handlers;\n\n        if (!_h) {\n            return this;\n        }\n\n        if (!eventType) {\n            this._$handlers = {};\n            return this;\n        }\n\n        if (handler) {\n            if (_h[eventType as string]) {\n                const newList = [];\n                for (let i = 0, l = _h[eventType as string].length; i < l; i++) {\n                    if (_h[eventType as string][i].h !== handler) {\n                        newList.push(_h[eventType as string][i]);\n                    }\n                }\n                _h[eventType as string] = newList;\n            }\n\n            if (_h[eventType as string] && _h[eventType as string].length === 0) {\n                delete _h[eventType as string];\n            }\n        }\n        else {\n            delete _h[eventType as string];\n        }\n\n        return this;\n    }\n\n    /**\n     * Dispatch a event.\n     *\n     * @param {string} eventType The event name.\n     */\n    trigger<EvtNm extends keyof EvtDef>(\n        eventType: EvtNm,\n        ...args: Parameters<EvtDef[EvtNm]>\n    ): this {\n        if (!this._$handlers) {\n            return this;\n        }\n\n        const _h = this._$handlers[eventType as string];\n        const eventProcessor = this._$eventProcessor;\n\n        if (_h) {\n            const argLen = args.length;\n\n            const len = _h.length;\n            for (let i = 0; i < len; i++) {\n                const hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(eventType, hItem.query)\n                ) {\n                    continue;\n                }\n\n                // Optimize advise from backbone\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(hItem.ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(hItem.ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(hItem.ctx, args[0], args[1]);\n                        break;\n                    default:\n                        // have more than 2 given arguments\n                        hItem.h.apply(hItem.ctx, args);\n                        break;\n                }\n            }\n        }\n\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(eventType);\n\n        return this;\n    }\n\n    /**\n     * Dispatch a event with context, which is specified at the last parameter.\n     *\n     * @param {string} type The event name.\n     */\n    triggerWithContext(type: keyof EvtDef, ...args: any[]): this {\n        if (!this._$handlers) {\n            return this;\n        }\n\n        const _h = this._$handlers[type as string];\n        const eventProcessor = this._$eventProcessor;\n\n        if (_h) {\n            const argLen = args.length;\n            const ctx = args[argLen - 1];\n\n            const len = _h.length;\n            for (let i = 0; i < len; i++) {\n                const hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(type, hItem.query)\n                ) {\n                    continue;\n                }\n\n                // Optimize advise from backbone\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(ctx, args[0], args[1]);\n                        break;\n                    default:\n                        // have more than 2 given arguments\n                        hItem.h.apply(ctx, args.slice(1, argLen - 1));\n                        break;\n                }\n            }\n        }\n\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(type);\n\n        return this;\n    }\n\n}\n","/**\n * The algoritm is learnt from\n * https://franklinta.com/2014/09/08/computing-css-matrix3d-transforms/\n * And we made some optimization for matrix inversion.\n * Other similar approaches:\n * \"cv::getPerspectiveTransform\", \"Direct Linear Transformation\".\n */\n\nconst LN2 = Math.log(2);\n\nfunction determinant(\n    rows: number[][],\n    rank: number,\n    rowStart: number,\n    rowMask: number,\n    colMask: number,\n    detCache: {[key: string]: number}\n) {\n    const cacheKey = rowMask + '-' + colMask;\n    const fullRank = rows.length;\n\n    if (detCache.hasOwnProperty(cacheKey)) {\n        return detCache[cacheKey];\n    }\n\n    if (rank === 1) {\n        // In this case the colMask must be like: `11101111`. We can find the place of `0`.\n        const colStart = Math.round(Math.log(((1 << fullRank) - 1) & ~colMask) / LN2);\n        return rows[rowStart][colStart];\n    }\n\n    const subRowMask = rowMask | (1 << rowStart);\n    let subRowStart = rowStart + 1;\n    while (rowMask & (1 << subRowStart)) {\n        subRowStart++;\n    }\n\n    let sum = 0;\n    for (let j = 0, colLocalIdx = 0; j < fullRank; j++) {\n        const colTag = 1 << j;\n        if (!(colTag & colMask)) {\n            sum += (colLocalIdx % 2 ? -1 : 1) * rows[rowStart][j]\n                // det(subMatrix(0, j))\n                * determinant(rows, rank - 1, subRowStart, subRowMask, colMask | colTag, detCache);\n            colLocalIdx++;\n        }\n    }\n\n    detCache[cacheKey] = sum;\n\n    return sum;\n}\n\n/**\n * Usage:\n * ```js\n * const transformer = buildTransformer(\n *     [10, 44, 100, 44, 100, 300, 10, 300],\n *     [50, 54, 130, 14, 140, 330, 14, 220]\n * );\n * const out = [];\n * transformer && transformer([11, 33], out);\n * ```\n *\n * Notice: `buildTransformer` may take more than 10ms in some Android device.\n *\n * @param src source four points, [x0, y0, x1, y1, x2, y2, x3, y3]\n * @param dest destination four points, [x0, y0, x1, y1, x2, y2, x3, y3]\n * @return transformer If fail, return null/undefined.\n */\nexport function buildTransformer(src: number[], dest: number[]) {\n    const mA = [\n        [src[0], src[1], 1, 0, 0, 0, -dest[0] * src[0], -dest[0] * src[1]],\n        [0, 0, 0, src[0], src[1], 1, -dest[1] * src[0], -dest[1] * src[1]],\n        [src[2], src[3], 1, 0, 0, 0, -dest[2] * src[2], -dest[2] * src[3]],\n        [0, 0, 0, src[2], src[3], 1, -dest[3] * src[2], -dest[3] * src[3]],\n        [src[4], src[5], 1, 0, 0, 0, -dest[4] * src[4], -dest[4] * src[5]],\n        [0, 0, 0, src[4], src[5], 1, -dest[5] * src[4], -dest[5] * src[5]],\n        [src[6], src[7], 1, 0, 0, 0, -dest[6] * src[6], -dest[6] * src[7]],\n        [0, 0, 0, src[6], src[7], 1, -dest[7] * src[6], -dest[7] * src[7]]\n    ];\n\n    const detCache = {};\n    const det = determinant(mA, 8, 0, 0, 0, detCache);\n    if (det === 0) {\n        // can not make transformer when and only when\n        // any three of the markers are collinear.\n        return;\n    }\n\n    // `invert(mA) * dest`, that is, `adj(mA) / det * dest`.\n    const vh: number[] = [];\n    for (let i = 0; i < 8; i++) {\n        for (let j = 0; j < 8; j++) {\n            vh[j] == null && (vh[j] = 0);\n            vh[j] += ((i + j) % 2 ? -1 : 1)\n                // det(subMatrix(i, j))\n                * determinant(mA, 7, i === 0 ? 1 : 0, 1 << i, 1 << j, detCache)\n                / det * dest[i];\n        }\n    }\n\n    return function (out: number[], srcPointX: number, srcPointY: number) {\n        const pk = srcPointX * vh[6] + srcPointY * vh[7] + 1;\n        out[0] = (srcPointX * vh[0] + srcPointY * vh[1] + vh[2]) / pk;\n        out[1] = (srcPointX * vh[3] + srcPointY * vh[4] + vh[5]) / pk;\n    };\n}\n","\nimport env from './env';\nimport {buildTransformer} from './fourPointsTransform';\n\nconst EVENT_SAVED_PROP = '___zrEVENTSAVED';\nconst _calcOut: number[] = [];\n\ntype SavedInfo = {\n    markers?: HTMLDivElement[]\n    trans?: ReturnType<typeof buildTransformer>\n    invTrans?: ReturnType<typeof buildTransformer>\n    srcCoords?: number[]\n}\n\n/**\n * Transform \"local coord\" from `elFrom` to `elTarget`.\n * \"local coord\": the coord based on the input `el`. The origin point is at\n *     the position of \"left: 0; top: 0;\" in the `el`.\n *\n * Support when CSS transform is used.\n *\n * Having the `out` (that is, `[outX, outY]`), we can create an DOM element\n * and set the CSS style as \"left: outX; top: outY;\" and append it to `elTarge`\n * to locate the element.\n *\n * For example, this code below positions a child of `document.body` on the event\n * point, no matter whether `body` has `margin`/`paddin`/`transfrom`/... :\n * ```js\n * transformLocalCoord(out, container, document.body, event.offsetX, event.offsetY);\n * if (!eqNaN(out[0])) {\n *     // Then locate the tip element on the event point.\n *     var tipEl = document.createElement('div');\n *     tipEl.style.cssText = 'position: absolute; left:' + out[0] + ';top:' + out[1] + ';';\n *     document.body.appendChild(tipEl);\n * }\n * ```\n *\n * Notice: In some env this method is not supported. If called, `out` will be `[NaN, NaN]`.\n *\n * @param {Array.<number>} out [inX: number, inY: number] The output..\n *        If can not transform, `out` will not be modified but return `false`.\n * @param {HTMLElement} elFrom The `[inX, inY]` is based on elFrom.\n * @param {HTMLElement} elTarget The `out` is based on elTarget.\n * @param {number} inX\n * @param {number} inY\n * @return {boolean} Whether transform successfully.\n */\nexport function transformLocalCoord(\n    out: number[],\n    elFrom: HTMLElement,\n    elTarget: HTMLElement,\n    inX: number,\n    inY: number\n) {\n    return transformCoordWithViewport(_calcOut, elFrom, inX, inY, true)\n        && transformCoordWithViewport(out, elTarget, _calcOut[0], _calcOut[1]);\n}\n\n/**\n * Transform between a \"viewport coord\" and a \"local coord\".\n * \"viewport coord\": the coord based on the left-top corner of the viewport\n *     of the browser.\n * \"local coord\": the coord based on the input `el`. The origin point is at\n *     the position of \"left: 0; top: 0;\" in the `el`.\n *\n * Support the case when CSS transform is used on el.\n *\n * @param out [inX: number, inY: number] The output. If `inverse: false`,\n *        it represents \"local coord\", otherwise \"vireport coord\".\n *        If can not transform, `out` will not be modified but return `false`.\n * @param el The \"local coord\" is based on the `el`, see comment above.\n * @param inX If `inverse: false`,\n *        it represents \"vireport coord\", otherwise \"local coord\".\n * @param inY If `inverse: false`,\n *        it represents \"vireport coord\", otherwise \"local coord\".\n * @param inverse\n *        `true`: from \"viewport coord\" to \"local coord\".\n *        `false`: from \"local coord\" to \"viewport coord\".\n * @return {boolean} Whether transform successfully.\n */\nexport function transformCoordWithViewport(\n    out: number[],\n    el: HTMLElement,\n    inX: number,\n    inY: number,\n    inverse?: boolean\n) {\n    if (el.getBoundingClientRect && env.domSupported && !isCanvasEl(el)) {\n        const saved = (el as any)[EVENT_SAVED_PROP] || ((el as any)[EVENT_SAVED_PROP] = {});\n        const markers = prepareCoordMarkers(el, saved);\n        const transformer = preparePointerTransformer(markers, saved, inverse);\n        if (transformer) {\n            transformer(out, inX, inY);\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction prepareCoordMarkers(el: HTMLElement, saved: SavedInfo) {\n    let markers = saved.markers;\n    if (markers) {\n        return markers;\n    }\n\n    markers = saved.markers = [];\n    const propLR = ['left', 'right'];\n    const propTB = ['top', 'bottom'];\n\n    for (let i = 0; i < 4; i++) {\n        const marker = document.createElement('div');\n        const stl = marker.style;\n        const idxLR = i % 2;\n        const idxTB = (i >> 1) % 2;\n        stl.cssText = [\n            'position: absolute',\n            'visibility: hidden',\n            'padding: 0',\n            'margin: 0',\n            'border-width: 0',\n            'user-select: none',\n            'width:0',\n            'height:0',\n            // 'width: 5px',\n            // 'height: 5px',\n            propLR[idxLR] + ':0',\n            propTB[idxTB] + ':0',\n            propLR[1 - idxLR] + ':auto',\n            propTB[1 - idxTB] + ':auto',\n            ''\n        ].join('!important;');\n        el.appendChild(marker);\n        markers.push(marker);\n    }\n\n    return markers;\n}\n\nfunction preparePointerTransformer(markers: HTMLDivElement[], saved: SavedInfo, inverse?: boolean) {\n    const transformerName: 'invTrans' | 'trans' = inverse ? 'invTrans' : 'trans';\n    const transformer = saved[transformerName];\n    const oldSrcCoords = saved.srcCoords;\n    const srcCoords = [];\n    const destCoords = [];\n    let oldCoordTheSame = true;\n\n    for (let i = 0; i < 4; i++) {\n        const rect = markers[i].getBoundingClientRect();\n        const ii = 2 * i;\n        const x = rect.left;\n        const y = rect.top;\n        srcCoords.push(x, y);\n        oldCoordTheSame = oldCoordTheSame && oldSrcCoords && x === oldSrcCoords[ii] && y === oldSrcCoords[ii + 1];\n        destCoords.push(markers[i].offsetLeft, markers[i].offsetTop);\n    }\n    // Cache to avoid time consuming of `buildTransformer`.\n    return (oldCoordTheSame && transformer)\n        ? transformer\n        : (\n            saved.srcCoords = srcCoords,\n            saved[transformerName] = inverse\n                ? buildTransformer(destCoords, srcCoords)\n                : buildTransformer(srcCoords, destCoords)\n        );\n}\n\nexport function isCanvasEl(el: HTMLElement): el is HTMLCanvasElement {\n    return el.nodeName.toUpperCase() === 'CANVAS';\n}\n","/**\n * Utilities for mouse or touch events.\n */\n\nimport Eventful from './Eventful';\nimport env from './env';\nimport { ZRRawEvent } from './types';\nimport {isCanvasEl, transformCoordWithViewport} from './dom';\n\nconst isDomLevel2 = (typeof window !== 'undefined') && !!window.addEventListener;\n\nconst MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\nconst _calcOut: number[] = [];\n\ntype FirefoxMouseEvent = {\n    layerX: number\n    layerY: number\n}\n\n\n/**\n * Get the `zrX` and `zrY`, which are relative to the top-left of\n * the input `el`.\n * CSS transform (2D & 3D) is supported.\n *\n * The strategy to fetch the coords:\n * + If `calculate` is not set as `true`, users of this method should\n * ensure that `el` is the same or the same size & location as `e.target`.\n * Otherwise the result coords are probably not expected. Because we\n * firstly try to get coords from e.offsetX/e.offsetY.\n * + If `calculate` is set as `true`, the input `el` can be any element\n * and we force to calculate the coords based on `el`.\n * + The input `el` should be positionable (not position:static).\n *\n * The force `calculate` can be used in case like:\n * When mousemove event triggered on ec tooltip, `e.target` is not `el`(zr painter.dom).\n *\n * @param  el DOM element.\n * @param  e Mouse event or touch event.\n * @param  out Get `out.zrX` and `out.zrY` as the result.\n * @param  calculate Whether to force calculate\n *        the coordinates but not use ones provided by browser.\n */\nexport function clientToLocal(\n    el: HTMLElement,\n    e: ZRRawEvent | FirefoxMouseEvent | Touch,\n    out: {zrX?: number, zrY?: number},\n    calculate?: boolean\n) {\n    out = out || {};\n\n    // According to the W3C Working Draft, offsetX and offsetY should be relative\n    // to the padding edge of the target element. The only browser using this convention\n    // is IE. Webkit uses the border edge, Opera uses the content edge, and FireFox does\n    // not support the properties.\n    // (see http://www.jacklmoore.com/notes/mouse-position/)\n    // In zr painter.dom, padding edge equals to border edge.\n\n    if (calculate || !env.canvasSupported) {\n        calculateZrXY(el, e as ZRRawEvent, out);\n    }\n    // Caution: In FireFox, layerX/layerY Mouse position relative to the closest positioned\n    // ancestor element, so we should make sure el is positioned (e.g., not position:static).\n    // BTW1, Webkit don't return the same results as FF in non-simple cases (like add\n    // zoom-factor, overflow / opacity layers, transforms ...)\n    // BTW2, (ev.offsetY || ev.pageY - $(ev.target).offset().top) is not correct in preserve-3d.\n    // <https://bugs.jquery.com/ticket/8523#comment:14>\n    // BTW3, In ff, offsetX/offsetY is always 0.\n    else if (env.browser.firefox\n        // use offsetX/offsetY for Firefox >= 39\n        // PENDING: consider Firefox for Android and Firefox OS? >= 43\n        && env.browser.version < '39'\n        && (e as FirefoxMouseEvent).layerX != null\n        && (e as FirefoxMouseEvent).layerX !== (e as MouseEvent).offsetX\n    ) {\n        out.zrX = (e as FirefoxMouseEvent).layerX;\n        out.zrY = (e as FirefoxMouseEvent).layerY;\n    }\n    // For IE6+, chrome, safari, opera, firefox >= 39\n    else if ((e as MouseEvent).offsetX != null) {\n        out.zrX = (e as MouseEvent).offsetX;\n        out.zrY = (e as MouseEvent).offsetY;\n    }\n    // For some other device, e.g., IOS safari.\n    else {\n        calculateZrXY(el, e as ZRRawEvent, out);\n    }\n\n    return out;\n}\n\nfunction calculateZrXY(\n    el: HTMLElement,\n    e: ZRRawEvent,\n    out: {zrX?: number, zrY?: number}\n) {\n    // BlackBerry 5, iOS 3 (original iPhone) don't have getBoundingRect.\n    if (env.domSupported && el.getBoundingClientRect) {\n        const ex = (e as MouseEvent).clientX;\n        const ey = (e as MouseEvent).clientY;\n\n        if (isCanvasEl(el)) {\n            // Original approach, which do not support CSS transform.\n            // marker can not be locationed in a canvas container\n            // (getBoundingClientRect is always 0). We do not support\n            // that input a pre-created canvas to zr while using css\n            // transform in iOS.\n            const box = el.getBoundingClientRect();\n            out.zrX = ex - box.left;\n            out.zrY = ey - box.top;\n            return;\n        }\n        else {\n            if (transformCoordWithViewport(_calcOut, el, ex, ey)) {\n                out.zrX = _calcOut[0];\n                out.zrY = _calcOut[1];\n                return;\n            }\n        }\n    }\n    out.zrX = out.zrY = 0;\n}\n\n/**\n * Find native event compat for legency IE.\n * Should be called at the begining of a native event listener.\n *\n * @param e Mouse event or touch event or pointer event.\n *        For lagency IE, we use `window.event` is used.\n * @return The native event.\n */\nexport function getNativeEvent(e: ZRRawEvent): ZRRawEvent {\n    return e\n        || (window.event as any);   // For IE\n}\n\n/**\n * Normalize the coordinates of the input event.\n *\n * Get the `e.zrX` and `e.zrY`, which are relative to the top-left of\n * the input `el`.\n * Get `e.zrDelta` if using mouse wheel.\n * Get `e.which`, see the comment inside this function.\n *\n * Do not calculate repeatly if `zrX` and `zrY` already exist.\n *\n * Notice: see comments in `clientToLocal`. check the relationship\n * between the result coords and the parameters `el` and `calculate`.\n *\n * @param el DOM element.\n * @param e See `getNativeEvent`.\n * @param calculate Whether to force calculate\n *        the coordinates but not use ones provided by browser.\n * @return The normalized native UIEvent.\n */\nexport function normalizeEvent(\n    el: HTMLElement,\n    e: ZRRawEvent,\n    calculate?: boolean\n) {\n\n    e = getNativeEvent(e);\n\n    if (e.zrX != null) {\n        return e;\n    }\n\n    const eventType = e.type;\n    const isTouch = eventType && eventType.indexOf('touch') >= 0;\n\n    if (!isTouch) {\n        clientToLocal(el, e, e, calculate);\n        const wheelDelta = getWheelDeltaMayPolyfill(e);\n        // FIXME: IE8- has \"wheelDeta\" in event \"mousewheel\" but hat different value (120 times)\n        // with Chrome and Safari. It's not correct for zrender event but we left it as it was.\n        e.zrDelta = wheelDelta ? wheelDelta / 120 : -(e.detail || 0) / 3;\n    }\n    else {\n        const touch = eventType !== 'touchend'\n            ? (<TouchEvent>e).targetTouches[0]\n            : (<TouchEvent>e).changedTouches[0];\n        touch && clientToLocal(el, touch, e, calculate);\n    }\n\n    // Add which for click: 1 === left; 2 === middle; 3 === right; otherwise: 0;\n    // See jQuery: https://github.com/jquery/jquery/blob/master/src/event.js\n    // If e.which has been defined, it may be readonly,\n    // see: https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/which\n    const button = (<MouseEvent>e).button;\n    if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\n        (e as any).which = (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)));\n    }\n    // [Caution]: `e.which` from browser is not always reliable. For example,\n    // when press left button and `mousemove (pointermove)` in Edge, the `e.which`\n    // is 65536 and the `e.button` is -1. But the `mouseup (pointerup)` and\n    // `mousedown (pointerdown)` is the same as Chrome does.\n\n    return e;\n}\n\n// TODO: also provide prop \"deltaX\" \"deltaY\" in zrender \"mousewheel\" event.\nfunction getWheelDeltaMayPolyfill(e: ZRRawEvent): number {\n    // Although event \"wheel\" do not has the prop \"wheelDelta\" in spec,\n    // agent like Chrome and Safari still provide \"wheelDelta\" like\n    // event \"mousewheel\" did (perhaps for backward compat).\n    // Since zrender has been using \"wheelDeta\" in zrender event \"mousewheel\".\n    // we currently do not break it.\n    // But event \"wheel\" in firefox do not has \"wheelDelta\", so we calculate\n    // \"wheelDeta\" from \"deltaX\", \"deltaY\" (which is the props in spec).\n\n    const rawWheelDelta = (e as any).wheelDelta;\n    // Theroetically `e.wheelDelta` won't be 0 unless some day it has been deprecated\n    // by agent like Chrome or Safari. So we also calculate it if rawWheelDelta is 0.\n    if (rawWheelDelta) {\n        return rawWheelDelta;\n    }\n\n    const deltaX = (e as any).deltaX;\n    const deltaY = (e as any).deltaY;\n    if (deltaX == null || deltaY == null) {\n        return rawWheelDelta;\n    }\n\n    // Test in Chrome and Safari (MacOS):\n    // The sign is corrent.\n    // The abs value is 99% corrent (inconsist case only like 62~63, 125~126 ...)\n    const delta = deltaY !== 0 ? Math.abs(deltaY) : Math.abs(deltaX);\n    const sign = deltaY > 0 ? -1\n        : deltaY < 0 ? 1\n        : deltaX > 0 ? -1\n        : 1;\n    return 3 * delta * sign;\n}\n\n\ntype AddEventListenerParams = Parameters<typeof HTMLElement.prototype.addEventListener>\ntype RemoveEventListenerParams = Parameters<typeof HTMLElement.prototype.removeEventListener>\n/**\n * @param  el\n * @param  name\n * @param  handler\n * @param  opt If boolean, means `opt.capture`\n * @param  opt.capture\n * @param  opt.passive\n */\nexport function addEventListener(\n    el: HTMLElement | HTMLDocument,\n    name: AddEventListenerParams[0],\n    handler: AddEventListenerParams[1],\n    opt?: AddEventListenerParams[2]\n) {\n    if (isDomLevel2) {\n        // Reproduct the console warning:\n        // [Violation] Added non-passive event listener to a scroll-blocking <some> event.\n        // Consider marking event handler as 'passive' to make the page more responsive.\n        // Just set console log level: verbose in chrome dev tool.\n        // then the warning log will be printed when addEventListener called.\n        // See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n        // We have not yet found a neat way to using passive. Because in zrender the dom event\n        // listener delegate all of the upper events of element. Some of those events need\n        // to prevent default. For example, the feature `preventDefaultMouseMove` of echarts.\n        // Before passive can be adopted, these issues should be considered:\n        // (1) Whether and how a zrender user specifies an event listener passive. And by default,\n        // passive or not.\n        // (2) How to tread that some zrender event listener is passive, and some is not. If\n        // we use other way but not preventDefault of mousewheel and touchmove, browser\n        // compatibility should be handled.\n\n        // const opts = (env.passiveSupported && name === 'mousewheel')\n        //     ? {passive: true}\n        //     // By default, the third param of el.addEventListener is `capture: false`.\n        //     : void 0;\n        // el.addEventListener(name, handler /* , opts */);\n        el.addEventListener(name, handler, opt);\n    }\n    else {\n        // For simplicity, do not implement `setCapture` for IE9-.\n        (el as any).attachEvent('on' + name, handler);\n    }\n}\n\n/**\n * Parameter are the same as `addEventListener`.\n *\n * Notice that if a listener is registered twice, one with capture and one without,\n * remove each one separately. Removal of a capturing listener does not affect a\n * non-capturing version of the same listener, and vice versa.\n */\nexport function removeEventListener(\n    el: HTMLElement | HTMLDocument,\n    name: RemoveEventListenerParams[0],\n    handler: RemoveEventListenerParams[1],\n    opt: RemoveEventListenerParams[2]\n) {\n    if (isDomLevel2) {\n        el.removeEventListener(name, handler, opt);\n    }\n    else {\n        (el as any).detachEvent('on' + name, handler);\n    }\n}\n\n/**\n * preventDefault and stopPropagation.\n * Notice: do not use this method in zrender. It can only be\n * used by upper applications if necessary.\n *\n * @param {Event} e A mouse or touch event.\n */\nexport const stop = isDomLevel2\n    ? function (e: MouseEvent | TouchEvent | PointerEvent) {\n        e.preventDefault();\n        e.stopPropagation();\n        e.cancelBubble = true;\n    }\n    : function (e: MouseEvent | TouchEvent | PointerEvent) {\n        e.returnValue = false;\n        e.cancelBubble = true;\n    };\n\n/**\n * This method only works for mouseup and mousedown. The functionality is restricted\n * for fault tolerance, See the `e.which` compatibility above.\n *\n * params can be MouseEvent or ElementEvent\n */\nexport function isMiddleOrRightButtonOnMouseUpDown(e: { which: number }) {\n    return e.which === 2 || e.which === 3;\n}\n\n/**\n * To be removed.\n * @deprecated\n */\nexport function notLeftMouse(e: MouseEvent) {\n    // If e.which is undefined, considered as left mouse event.\n    return e.which > 1;\n}\n\n\n// For backward compatibility\nexport {Eventful as Dispatcher};\n","/**\n * Only implements needed gestures for mobile.\n */\n\nimport * as eventUtil from './event';\nimport { ZRRawTouchEvent, ZRPinchEvent, Dictionary } from './types';\nimport Displayable from '../graphic/Displayable';\n\ninterface TrackItem {\n    points: number[][]\n    touches: Touch[]\n    target: Displayable,\n    event: ZRRawTouchEvent\n}\n\nexport class GestureMgr {\n\n    private _track: TrackItem[] = []\n\n    constructor() {}\n\n    recognize(event: ZRRawTouchEvent, target: Displayable, root: HTMLElement) {\n        this._doTrack(event, target, root);\n        return this._recognize(event);\n    }\n\n    clear() {\n        this._track.length = 0;\n        return this;\n    }\n\n    _doTrack(event: ZRRawTouchEvent, target: Displayable, root: HTMLElement) {\n        const touches = event.touches;\n\n        if (!touches) {\n            return;\n        }\n\n        const trackItem: TrackItem = {\n            points: [],\n            touches: [],\n            target: target,\n            event: event\n        };\n\n        for (let i = 0, len = touches.length; i < len; i++) {\n            const touch = touches[i];\n            const pos = eventUtil.clientToLocal(root, touch, {});\n            trackItem.points.push([pos.zrX, pos.zrY]);\n            trackItem.touches.push(touch);\n        }\n\n        this._track.push(trackItem);\n    }\n\n    _recognize(event: ZRRawTouchEvent) {\n        for (let eventName in recognizers) {\n            if (recognizers.hasOwnProperty(eventName)) {\n                const gestureInfo = recognizers[eventName](this._track, event);\n                if (gestureInfo) {\n                    return gestureInfo;\n                }\n            }\n        }\n    }\n}\n\nfunction dist(pointPair: number[][]): number {\n    const dx = pointPair[1][0] - pointPair[0][0];\n    const dy = pointPair[1][1] - pointPair[0][1];\n\n    return Math.sqrt(dx * dx + dy * dy);\n}\n\nfunction center(pointPair: number[][]): number[] {\n    return [\n        (pointPair[0][0] + pointPair[1][0]) / 2,\n        (pointPair[0][1] + pointPair[1][1]) / 2\n    ];\n}\n\ntype Recognizer = (tracks: TrackItem[], event: ZRRawTouchEvent) => {\n    type: string\n    target: Displayable\n    event: ZRRawTouchEvent\n}\n\nconst recognizers: Dictionary<Recognizer> = {\n\n    pinch: function (tracks: TrackItem[], event: ZRRawTouchEvent) {\n        const trackLen = tracks.length;\n\n        if (!trackLen) {\n            return;\n        }\n\n        const pinchEnd = (tracks[trackLen - 1] || {}).points;\n        const pinchPre = (tracks[trackLen - 2] || {}).points || pinchEnd;\n\n        if (pinchPre\n            && pinchPre.length > 1\n            && pinchEnd\n            && pinchEnd.length > 1\n        ) {\n            let pinchScale = dist(pinchEnd) / dist(pinchPre);\n            !isFinite(pinchScale) && (pinchScale = 1);\n\n            (event as ZRPinchEvent).pinchScale = pinchScale;\n\n            const pinchCenter = center(pinchEnd);\n            (event as ZRPinchEvent).pinchX = pinchCenter[0];\n            (event as ZRPinchEvent).pinchY = pinchCenter[1];\n\n            return {\n                type: 'pinch',\n                target: tracks[0].target,\n                event: event\n            };\n        }\n    }\n\n    // Only pinch currently.\n};","import * as util from './core/util';\nimport * as vec2 from './core/vector';\nimport Draggable from './mixin/Draggable';\nimport Eventful from './core/Eventful';\nimport * as eventTool from './core/event';\nimport {GestureMgr} from './core/GestureMgr';\nimport Displayable from './graphic/Displayable';\nimport {PainterBase} from './PainterBase';\nimport HandlerDomProxy, { HandlerProxyInterface } from './dom/HandlerProxy';\nimport { ZRRawEvent, ZRPinchEvent, ElementEventName, ElementEventNameWithOn, ZRRawTouchEvent } from './core/types';\nimport Storage from './Storage';\nimport Element, {ElementEvent} from './Element';\nimport CanvasPainter from './canvas/Painter';\n\n\n/**\n * [The interface between `Handler` and `HandlerProxy`]:\n *\n * The default `HandlerProxy` only support the common standard web environment\n * (e.g., standalone browser, headless browser, embed browser in mobild APP, ...).\n * But `HandlerProxy` can be replaced to support more non-standard environment\n * (e.g., mini app), or to support more feature that the default `HandlerProxy`\n * not provided (like echarts-gl did).\n * So the interface between `Handler` and `HandlerProxy` should be stable. Do not\n * make break changes util inevitable. The interface include the public methods\n * of `Handler` and the events listed in `handlerNames` below, by which `HandlerProxy`\n * drives `Handler`.\n */\n\n/**\n * [DRAG_OUTSIDE]:\n *\n * That is, triggering `mousemove` and `mouseup` event when the pointer is out of the\n * zrender area when dragging. That is important for the improvement of the user experience\n * when dragging something near the boundary without being terminated unexpectedly.\n *\n * We originally consider to introduce new events like `pagemovemove` and `pagemouseup`\n * to resolve this issue. But some drawbacks of it is described in\n * https://github.com/ecomfe/zrender/pull/536#issuecomment-560286899\n *\n * Instead, we referenced the specifications:\n * https://www.w3.org/TR/touch-events/#the-touchmove-event\n * https://www.w3.org/TR/2014/WD-DOM-Level-3-Events-20140925/#event-type-mousemove\n * where the the mousemove/touchmove can be continue to fire if the user began a drag\n * operation and the pointer has left the boundary. (for the mouse event, browsers\n * only do it on `document` and when the pointer has left the boundary of the browser.)\n *\n * So the default `HandlerProxy` supports this feature similarly: if it is in the dragging\n * state (see `pointerCapture` in `HandlerProxy`), the `mousemove` and `mouseup` continue\n * to fire until release the pointer. That is implemented by listen to those event on\n * `document`.\n * If we implement some other `HandlerProxy` only for touch device, that would be easier.\n * The touch event support this feature by default.\n * The term \"pointer capture\" is from the spec:\n * https://www.w3.org/TR/pointerevents2/#idl-def-element-setpointercapture-pointerid\n *\n * Note:\n * There might be some cases that the mouse event can not be received on `document`.\n * For example,\n * (A) When `useCapture` is not supported and some user defined event listeners on the ancestor\n * of zr dom throw Error.\n * (B) When `useCapture` is not supported and some user defined event listeners on the ancestor of\n * zr dom call `stopPropagation`.\n * In these cases, the `mousemove` event might be keep triggering event when the mouse is released.\n * We try to reduce the side-effect in those cases, that is, use `isOutsideBoundary` to prevent\n * it from do anything (especially, `findHover`).\n * (`useCapture` mean, `addEvnetListener(listener, {capture: true})`, althought it may not be\n * suppported in some environments.)\n *\n * Note:\n * If `HandlerProxy` listens to `document` with `useCapture`, `HandlerProxy` needs to\n * prevent user-registered-handler from calling `stopPropagation` and `preventDefault`\n * when the `event.target` is not a zrender dom element. Otherwise the user-registered-handler\n * may be able to prevent other elements (that not relevant to zrender) in the web page from receiving\n * dom events.\n */\n\nconst SILENT = 'silent';\n\nfunction makeEventPacket(eveType: ElementEventName, targetInfo: {\n    target?: Element\n    topTarget?: Element\n}, event: ZRRawEvent): ElementEvent {\n    return {\n        type: eveType,\n        event: event,\n        // target can only be an element that is not silent.\n        target: targetInfo.target,\n        // topTarget can be a silent element.\n        topTarget: targetInfo.topTarget,\n        cancelBubble: false,\n        offsetX: event.zrX,\n        offsetY: event.zrY,\n        gestureEvent: (event as ZRPinchEvent).gestureEvent,\n        pinchX: (event as ZRPinchEvent).pinchX,\n        pinchY: (event as ZRPinchEvent).pinchY,\n        pinchScale: (event as ZRPinchEvent).pinchScale,\n        wheelDelta: event.zrDelta,\n        zrByTouch: event.zrByTouch,\n        which: event.which,\n        stop: stopEvent\n    };\n}\n\nfunction stopEvent(this: ElementEvent) {\n    eventTool.stop(this.event);\n}\n\nclass EmptyProxy extends Eventful {\n    handler: Handler = null\n    dispose() {}\n    setCursor() {}\n}\n\nclass HoveredResult {\n    x: number\n    y: number\n    target: Displayable\n    topTarget: Displayable\n    constructor(x?: number, y?: number) {\n        this.x = x;\n        this.y = y;\n    }\n}\n\nconst handlerNames = [\n    'click', 'dblclick', 'mousewheel', 'mouseout',\n    'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n];\n\ntype HandlerName = 'click' |'dblclick' |'mousewheel' |'mouseout' |\n    'mouseup' |'mousedown' |'mousemove' |'contextmenu';\n\n\n// TODO draggable\nclass Handler extends Eventful {\n\n    storage: Storage\n    painter: PainterBase\n    painterRoot: HTMLElement\n\n    proxy: HandlerProxyInterface\n\n    private _hovered = new HoveredResult(0, 0)\n\n    private _gestureMgr: GestureMgr\n\n    private _draggingMgr: Draggable\n\n    _downEl: Element\n    _upEl: Element\n    _downPoint: [number, number]\n\n    constructor(\n        storage: Storage,\n        painter: PainterBase,\n        proxy: HandlerProxyInterface,\n        painterRoot: HTMLElement\n    ) {\n        super();\n\n        this.storage = storage;\n\n        this.painter = painter;\n\n        this.painterRoot = painterRoot;\n\n        proxy = proxy || new EmptyProxy();\n\n        /**\n         * Proxy of event. can be Dom, WebGLSurface, etc.\n         */\n        this.proxy = null;\n\n        this.setHandlerProxy(proxy);\n\n        this._draggingMgr = new Draggable(this);\n    }\n\n    setHandlerProxy(proxy: HandlerProxyInterface) {\n        if (this.proxy) {\n            this.proxy.dispose();\n        }\n\n        if (proxy) {\n            util.each(handlerNames, function (name) {\n                proxy.on && proxy.on(name, this[name as HandlerName], this);\n            }, this);\n            // Attach handler\n            proxy.handler = this;\n        }\n        this.proxy = proxy;\n    }\n\n    mousemove(event: ZRRawEvent) {\n        const x = event.zrX;\n        const y = event.zrY;\n\n        const isOutside = isOutsideBoundary(this, x, y);\n\n        let lastHovered = this._hovered;\n        let lastHoveredTarget = lastHovered.target;\n\n        // If lastHoveredTarget is removed from zr (detected by '__zr') by some API call\n        // (like 'setOption' or 'dispatchAction') in event handlers, we should find\n        // lastHovered again here. Otherwise 'mouseout' can not be triggered normally.\n        // See #6198.\n        if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n            lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n            lastHoveredTarget = lastHovered.target;\n        }\n\n        const hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\n        const hoveredTarget = hovered.target;\n\n        const proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\n\n        // Mouse out on previous hovered element\n        if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(lastHovered, 'mouseout', event);\n        }\n\n        // Mouse moving on one element\n        this.dispatchToElement(hovered, 'mousemove', event);\n\n        // Mouse over on a new element\n        if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(hovered, 'mouseover', event);\n        }\n    }\n\n    mouseout(event: ZRRawEvent) {\n        const eventControl = event.zrEventControl;\n\n        if (eventControl !== 'only_globalout') {\n            this.dispatchToElement(this._hovered, 'mouseout', event);\n        }\n\n        if (eventControl !== 'no_globalout') {\n            // FIXME: if the pointer moving from the extra doms to realy \"outside\",\n            // the `globalout` should have been triggered. But currently not.\n            this.trigger('globalout', {type: 'globalout', event: event});\n        }\n    }\n\n    /**\n     * Resize\n     */\n    resize() {\n        this._hovered = new HoveredResult(0, 0);\n    }\n\n    /**\n     * Dispatch event\n     */\n    dispatch(eventName: HandlerName, eventArgs?: any) {\n        const handler = this[eventName];\n        handler && handler.call(this, eventArgs);\n    }\n\n    /**\n     * Dispose\n     */\n    dispose() {\n\n        this.proxy.dispose();\n\n        this.storage = null;\n        this.proxy = null;\n        this.painter = null;\n    }\n\n    /**\n     * 设置默认的cursor style\n     * @param cursorStyle 例如 crosshair，默认为 'default'\n     */\n    setCursorStyle(cursorStyle: string) {\n        const proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(cursorStyle);\n    }\n\n    /**\n     * 事件分发代理\n     *\n     * @private\n     * @param {Object} targetInfo {target, topTarget} 目标图形元素\n     * @param {string} eventName 事件名称\n     * @param {Object} event 事件对象\n     */\n    dispatchToElement(targetInfo: {\n        target?: Element\n        topTarget?: Element\n    }, eventName: ElementEventName, event: ZRRawEvent) {\n\n        targetInfo = targetInfo || {};\n\n        let el = targetInfo.target as Element;\n        if (el && el.silent) {\n            return;\n        }\n        const eventKey = ('on' + eventName) as ElementEventNameWithOn;\n        const eventPacket = makeEventPacket(eventName, targetInfo, event);\n\n        while (el) {\n            el[eventKey]\n                && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\n\n            el.trigger(eventName, eventPacket);\n\n            // Bubble to the host if on the textContent.\n            // PENDING\n            el = el.__hostTarget ? el.__hostTarget : el.parent;\n\n            if (eventPacket.cancelBubble) {\n                break;\n            }\n        }\n\n        if (!eventPacket.cancelBubble) {\n            // 冒泡到顶级 zrender 对象\n            this.trigger(eventName, eventPacket);\n            // 分发事件到用户自定义层\n            // 用户有可能在全局 click 事件中 dispose，所以需要判断下 painter 是否存在\n            if (this.painter && (this.painter as CanvasPainter).eachOtherLayer) {\n                (this.painter as CanvasPainter).eachOtherLayer(function (layer) {\n                    if (typeof (layer[eventKey]) === 'function') {\n                        layer[eventKey].call(layer, eventPacket);\n                    }\n                    if (layer.trigger) {\n                        layer.trigger(eventName, eventPacket);\n                    }\n                });\n            }\n        }\n    }\n\n    findHover(x: number, y: number, exclude?: Displayable): HoveredResult {\n        const list = this.storage.getDisplayList();\n        const out = new HoveredResult(x, y);\n\n        for (let i = list.length - 1; i >= 0; i--) {\n            let hoverCheckResult;\n            if (list[i] !== exclude\n                // getDisplayList may include ignored item in VML mode\n                && !list[i].ignore\n                && (hoverCheckResult = isHover(list[i], x, y))\n            ) {\n                !out.topTarget && (out.topTarget = list[i]);\n                if (hoverCheckResult !== SILENT) {\n                    out.target = list[i];\n                    break;\n                }\n            }\n        }\n\n        return out;\n    }\n\n    processGesture(event: ZRRawEvent, stage?: 'start' | 'end' | 'change') {\n        if (!this._gestureMgr) {\n            this._gestureMgr = new GestureMgr();\n        }\n        const gestureMgr = this._gestureMgr;\n\n        stage === 'start' && gestureMgr.clear();\n\n        const gestureInfo = gestureMgr.recognize(\n            event as ZRRawTouchEvent,\n            this.findHover(event.zrX, event.zrY, null).target,\n            (this.proxy as HandlerDomProxy).dom\n        );\n\n        stage === 'end' && gestureMgr.clear();\n\n        // Do not do any preventDefault here. Upper application do that if necessary.\n        if (gestureInfo) {\n            const type = gestureInfo.type;\n            (event as ZRPinchEvent).gestureEvent = type;\n\n            let res = new HoveredResult();\n            res.target = gestureInfo.target;\n            this.dispatchToElement(res, type as ElementEventName, gestureInfo.event as ZRRawEvent);\n        }\n    }\n\n    click: (event: ZRRawEvent) => void\n    mousedown: (event: ZRRawEvent) => void\n    mouseup: (event: ZRRawEvent) => void\n    mousewheel: (event: ZRRawEvent) => void\n    dblclick: (event: ZRRawEvent) => void\n    contextmenu: (event: ZRRawEvent) => void\n}\n\n// Common handlers\nutil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name: HandlerName) {\n    Handler.prototype[name] = function (event) {\n        const x = event.zrX;\n        const y = event.zrY;\n        const isOutside = isOutsideBoundary(this, x, y);\n\n        let hovered;\n        let hoveredTarget;\n\n        if (name !== 'mouseup' || !isOutside) {\n            // Find hover again to avoid click event is dispatched manually. Or click is triggered without mouseover\n            hovered = this.findHover(x, y);\n            hoveredTarget = hovered.target;\n        }\n\n        if (name === 'mousedown') {\n            this._downEl = hoveredTarget;\n            this._downPoint = [event.zrX, event.zrY];\n            // In case click triggered before mouseup\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'mouseup') {\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'click') {\n            if (this._downEl !== this._upEl\n                // Original click event is triggered on the whole canvas element,\n                // including the case that `mousedown` - `mousemove` - `mouseup`,\n                // which should be filtered, otherwise it will bring trouble to\n                // pan and zoom.\n                || !this._downPoint\n                // Arbitrary value\n                || vec2.dist(this._downPoint, [event.zrX, event.zrY]) > 4\n            ) {\n                return;\n            }\n            this._downPoint = null;\n        }\n\n        this.dispatchToElement(hovered, name, event);\n    };\n});\n\nfunction isHover(displayable: Displayable, x: number, y: number) {\n    if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n        let el: Element = displayable;\n        let isSilent;\n        let ignoreClip = false;\n        while (el) {\n            // Ignore clip on any ancestors.\n            if (el.ignoreClip) {\n                ignoreClip = true;\n            }\n            if (!ignoreClip) {\n                let clipPath = el.getClipPath();\n                // If clipped by ancestor.\n                // FIXME: If clipPath has neither stroke nor fill,\n                // el.clipPath.contain(x, y) will always return false.\n                if (clipPath && !clipPath.contain(x, y)) {\n                    return false;\n                }\n                if (el.silent) {\n                    isSilent = true;\n                }\n            }\n            // Consider when el is textContent, also need to be silent\n            // if any of its host el and its ancestors is silent.\n            const hostEl = el.__hostTarget;\n            el = hostEl ? hostEl : el.parent;\n        }\n        return isSilent ? SILENT : true;\n    }\n\n    return false;\n}\n\n/**\n * See [DRAG_OUTSIDE].\n */\nfunction isOutsideBoundary(handlerInstance: Handler, x: number, y: number) {\n    const painter = handlerInstance.painter;\n    return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\n}\n\nexport default Handler;\n","// https://github.com/mziccard/node-timsort\nconst DEFAULT_MIN_MERGE = 32;\n\nconst DEFAULT_MIN_GALLOPING = 7;\n\nconst DEFAULT_TMP_STORAGE_LENGTH = 256;\n\ntype CompareFunc<T> =(a: T, b: T) => number\n\nfunction minRunLength(n: number): number {\n    var r = 0;\n\n    while (n >= DEFAULT_MIN_MERGE) {\n        r |= n & 1;\n        n >>= 1;\n    }\n\n    return n + r;\n}\n\nfunction makeAscendingRun<T>(array: T[], lo: number, hi: number, compare: CompareFunc<T>) {\n    var runHi = lo + 1;\n\n    if (runHi === hi) {\n        return 1;\n    }\n\n    if (compare(array[runHi++], array[lo]) < 0) {\n        while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\n            runHi++;\n        }\n\n        reverseRun<T>(array, lo, runHi);\n    }\n    else {\n        while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\n            runHi++;\n        }\n    }\n\n    return runHi - lo;\n}\n\nfunction reverseRun<T>(array: T[], lo: number, hi: number) {\n    hi--;\n\n    while (lo < hi) {\n        var t = array[lo];\n        array[lo++] = array[hi];\n        array[hi--] = t;\n    }\n}\n\nfunction binaryInsertionSort<T>(array: T[], lo: number, hi: number, start: number, compare: CompareFunc<T>) {\n    if (start === lo) {\n        start++;\n    }\n\n    for (; start < hi; start++) {\n        var pivot = array[start];\n\n        var left = lo;\n        var right = start;\n        var mid;\n\n        while (left < right) {\n            mid = left + right >>> 1;\n\n            if (compare(pivot, array[mid]) < 0) {\n                right = mid;\n            }\n            else {\n                left = mid + 1;\n            }\n        }\n\n        var n = start - left;\n\n        switch (n) {\n            case 3:\n                array[left + 3] = array[left + 2];\n\n            case 2:\n                array[left + 2] = array[left + 1];\n\n            case 1:\n                array[left + 1] = array[left];\n                break;\n            default:\n                while (n > 0) {\n                    array[left + n] = array[left + n - 1];\n                    n--;\n                }\n        }\n\n        array[left] = pivot;\n    }\n}\n\nfunction gallopLeft<T>(value: T, array: T[], start: number, length: number, hint: number, compare: CompareFunc<T>) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n\n    if (compare(value, array[start + hint]) > 0) {\n        maxOffset = length - hint;\n\n        while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n\n        lastOffset += hint;\n        offset += hint;\n    }\n    else {\n        maxOffset = hint + 1;\n        while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n\n        var tmp = lastOffset;\n        lastOffset = hint - offset;\n        offset = hint - tmp;\n    }\n\n    lastOffset++;\n    while (lastOffset < offset) {\n        var m = lastOffset + (offset - lastOffset >>> 1);\n\n        if (compare(value, array[start + m]) > 0) {\n            lastOffset = m + 1;\n        }\n        else {\n            offset = m;\n        }\n    }\n    return offset;\n}\n\nfunction gallopRight<T>(value: T, array: T[], start: number, length: number, hint: number, compare: CompareFunc<T>) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n\n    if (compare(value, array[start + hint]) < 0) {\n        maxOffset = hint + 1;\n\n        while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n\n        var tmp = lastOffset;\n        lastOffset = hint - offset;\n        offset = hint - tmp;\n    }\n    else {\n        maxOffset = length - hint;\n\n        while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n\n        lastOffset += hint;\n        offset += hint;\n    }\n\n    lastOffset++;\n\n    while (lastOffset < offset) {\n        var m = lastOffset + (offset - lastOffset >>> 1);\n\n        if (compare(value, array[start + m]) < 0) {\n            offset = m;\n        }\n        else {\n            lastOffset = m + 1;\n        }\n    }\n\n    return offset;\n}\n\nfunction TimSort<T>(array: T[], compare: CompareFunc<T>) {\n    let minGallop = DEFAULT_MIN_GALLOPING;\n    let length = 0;\n    let tmpStorageLength = DEFAULT_TMP_STORAGE_LENGTH;\n    let stackLength = 0;\n    let runStart: number[];\n    let runLength: number[];\n    let stackSize = 0;\n\n    length = array.length;\n\n    if (length < 2 * DEFAULT_TMP_STORAGE_LENGTH) {\n        tmpStorageLength = length >>> 1;\n    }\n\n    var tmp: T[] = [];\n\n    stackLength = length < 120 ? 5 : length < 1542 ? 10 : length < 119151 ? 19 : 40;\n\n    runStart = [];\n    runLength = [];\n\n    function pushRun(_runStart: number, _runLength: number) {\n        runStart[stackSize] = _runStart;\n        runLength[stackSize] = _runLength;\n        stackSize += 1;\n    }\n\n    function mergeRuns() {\n        while (stackSize > 1) {\n            var n = stackSize - 2;\n\n            if (\n                (n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1])\n                || (n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1])\n            ) {\n                if (runLength[n - 1] < runLength[n + 1]) {\n                    n--;\n                }\n            }\n            else if (runLength[n] > runLength[n + 1]) {\n                break;\n            }\n            mergeAt(n);\n        }\n    }\n\n    function forceMergeRuns() {\n        while (stackSize > 1) {\n            var n = stackSize - 2;\n\n            if (n > 0 && runLength[n - 1] < runLength[n + 1]) {\n                n--;\n            }\n\n            mergeAt(n);\n        }\n    }\n\n    function mergeAt(i: number) {\n        var start1 = runStart[i];\n        var length1 = runLength[i];\n        var start2 = runStart[i + 1];\n        var length2 = runLength[i + 1];\n\n        runLength[i] = length1 + length2;\n\n        if (i === stackSize - 3) {\n            runStart[i + 1] = runStart[i + 2];\n            runLength[i + 1] = runLength[i + 2];\n        }\n\n        stackSize--;\n\n        var k = gallopRight<T>(array[start2], array, start1, length1, 0, compare);\n        start1 += k;\n        length1 -= k;\n\n        if (length1 === 0) {\n            return;\n        }\n\n        length2 = gallopLeft<T>(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\n\n        if (length2 === 0) {\n            return;\n        }\n\n        if (length1 <= length2) {\n            mergeLow(start1, length1, start2, length2);\n        }\n        else {\n            mergeHigh(start1, length1, start2, length2);\n        }\n    }\n\n    function mergeLow(start1: number, length1: number, start2: number, length2: number) {\n        var i = 0;\n\n        for (i = 0; i < length1; i++) {\n            tmp[i] = array[start1 + i];\n        }\n\n        var cursor1 = 0;\n        var cursor2 = start2;\n        var dest = start1;\n\n        array[dest++] = array[cursor2++];\n\n        if (--length2 === 0) {\n            for (i = 0; i < length1; i++) {\n                array[dest + i] = tmp[cursor1 + i];\n            }\n            return;\n        }\n\n        if (length1 === 1) {\n            for (i = 0; i < length2; i++) {\n                array[dest + i] = array[cursor2 + i];\n            }\n            array[dest + length2] = tmp[cursor1];\n            return;\n        }\n\n        var _minGallop = minGallop;\n        var count1;\n        var count2;\n        var exit;\n\n        while (1) {\n            count1 = 0;\n            count2 = 0;\n            exit = false;\n\n            do {\n                if (compare(array[cursor2], tmp[cursor1]) < 0) {\n                    array[dest++] = array[cursor2++];\n                    count2++;\n                    count1 = 0;\n\n                    if (--length2 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                else {\n                    array[dest++] = tmp[cursor1++];\n                    count1++;\n                    count2 = 0;\n                    if (--length1 === 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n            } while ((count1 | count2) < _minGallop);\n\n            if (exit) {\n                break;\n            }\n\n            do {\n                count1 = gallopRight<T>(array[cursor2], tmp, cursor1, length1, 0, compare);\n\n                if (count1 !== 0) {\n                    for (i = 0; i < count1; i++) {\n                        array[dest + i] = tmp[cursor1 + i];\n                    }\n\n                    dest += count1;\n                    cursor1 += count1;\n                    length1 -= count1;\n                    if (length1 <= 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n\n                array[dest++] = array[cursor2++];\n\n                if (--length2 === 0) {\n                    exit = true;\n                    break;\n                }\n\n                count2 = gallopLeft<T>(tmp[cursor1], array, cursor2, length2, 0, compare);\n\n                if (count2 !== 0) {\n                    for (i = 0; i < count2; i++) {\n                        array[dest + i] = array[cursor2 + i];\n                    }\n\n                    dest += count2;\n                    cursor2 += count2;\n                    length2 -= count2;\n\n                    if (length2 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest++] = tmp[cursor1++];\n\n                if (--length1 === 1) {\n                    exit = true;\n                    break;\n                }\n\n                _minGallop--;\n            } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n\n            if (exit) {\n                break;\n            }\n\n            if (_minGallop < 0) {\n                _minGallop = 0;\n            }\n\n            _minGallop += 2;\n        }\n\n        minGallop = _minGallop;\n\n        minGallop < 1 && (minGallop = 1);\n\n        if (length1 === 1) {\n            for (i = 0; i < length2; i++) {\n                array[dest + i] = array[cursor2 + i];\n            }\n            array[dest + length2] = tmp[cursor1];\n        }\n        else if (length1 === 0) {\n            throw new Error();\n            // throw new Error('mergeLow preconditions were not respected');\n        }\n        else {\n            for (i = 0; i < length1; i++) {\n                array[dest + i] = tmp[cursor1 + i];\n            }\n        }\n    }\n\n    function mergeHigh(start1: number, length1: number, start2: number, length2: number) {\n        var i = 0;\n\n        for (i = 0; i < length2; i++) {\n            tmp[i] = array[start2 + i];\n        }\n\n        var cursor1 = start1 + length1 - 1;\n        var cursor2 = length2 - 1;\n        var dest = start2 + length2 - 1;\n        var customCursor = 0;\n        var customDest = 0;\n\n        array[dest--] = array[cursor1--];\n\n        if (--length1 === 0) {\n            customCursor = dest - (length2 - 1);\n\n            for (i = 0; i < length2; i++) {\n                array[customCursor + i] = tmp[i];\n            }\n\n            return;\n        }\n\n        if (length2 === 1) {\n            dest -= length1;\n            cursor1 -= length1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n\n            for (i = length1 - 1; i >= 0; i--) {\n                array[customDest + i] = array[customCursor + i];\n            }\n\n            array[dest] = tmp[cursor2];\n            return;\n        }\n\n        var _minGallop = minGallop;\n\n        while (true) {\n            var count1 = 0;\n            var count2 = 0;\n            var exit = false;\n\n            do {\n                if (compare(tmp[cursor2], array[cursor1]) < 0) {\n                    array[dest--] = array[cursor1--];\n                    count1++;\n                    count2 = 0;\n                    if (--length1 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                else {\n                    array[dest--] = tmp[cursor2--];\n                    count2++;\n                    count1 = 0;\n                    if (--length2 === 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n            } while ((count1 | count2) < _minGallop);\n\n            if (exit) {\n                break;\n            }\n\n            do {\n                count1 = length1 - gallopRight<T>(tmp[cursor2], array, start1, length1, length1 - 1, compare);\n\n                if (count1 !== 0) {\n                    dest -= count1;\n                    cursor1 -= count1;\n                    length1 -= count1;\n                    customDest = dest + 1;\n                    customCursor = cursor1 + 1;\n\n                    for (i = count1 - 1; i >= 0; i--) {\n                        array[customDest + i] = array[customCursor + i];\n                    }\n\n                    if (length1 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n\n                array[dest--] = tmp[cursor2--];\n\n                if (--length2 === 1) {\n                    exit = true;\n                    break;\n                }\n\n                count2 = length2 - gallopLeft<T>(array[cursor1], tmp, 0, length2, length2 - 1, compare);\n\n                if (count2 !== 0) {\n                    dest -= count2;\n                    cursor2 -= count2;\n                    length2 -= count2;\n                    customDest = dest + 1;\n                    customCursor = cursor2 + 1;\n\n                    for (i = 0; i < count2; i++) {\n                        array[customDest + i] = tmp[customCursor + i];\n                    }\n\n                    if (length2 <= 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n\n                array[dest--] = array[cursor1--];\n\n                if (--length1 === 0) {\n                    exit = true;\n                    break;\n                }\n\n                _minGallop--;\n            } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n\n            if (exit) {\n                break;\n            }\n\n            if (_minGallop < 0) {\n                _minGallop = 0;\n            }\n\n            _minGallop += 2;\n        }\n\n        minGallop = _minGallop;\n\n        if (minGallop < 1) {\n            minGallop = 1;\n        }\n\n        if (length2 === 1) {\n            dest -= length1;\n            cursor1 -= length1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n\n            for (i = length1 - 1; i >= 0; i--) {\n                array[customDest + i] = array[customCursor + i];\n            }\n\n            array[dest] = tmp[cursor2];\n        }\n        else if (length2 === 0) {\n            throw new Error();\n            // throw new Error('mergeHigh preconditions were not respected');\n        }\n        else {\n            customCursor = dest - (length2 - 1);\n            for (i = 0; i < length2; i++) {\n                array[customCursor + i] = tmp[i];\n            }\n        }\n    }\n\n    return {\n        mergeRuns,\n        forceMergeRuns,\n        pushRun\n    };\n}\n\nexport default function sort<T>(\n    array: T[],\n    compare: CompareFunc<T>,\n    lo?: number, hi?: number\n) {\n    if (!lo) {\n        lo = 0;\n    }\n    if (!hi) {\n        hi = array.length;\n    }\n\n    var remaining = hi - lo;\n\n    if (remaining < 2) {\n        return;\n    }\n\n    var runLength = 0;\n\n    if (remaining < DEFAULT_MIN_MERGE) {\n        runLength = makeAscendingRun<T>(array, lo, hi, compare);\n        binaryInsertionSort<T>(array, lo, hi, lo + runLength, compare);\n        return;\n    }\n\n    var ts = TimSort<T>(array, compare);\n\n    var minRun = minRunLength(remaining);\n\n    do {\n        runLength = makeAscendingRun<T>(array, lo, hi, compare);\n        if (runLength < minRun) {\n            var force = remaining;\n            if (force > minRun) {\n                force = minRun;\n            }\n\n            binaryInsertionSort<T>(array, lo, lo + force, lo + runLength, compare);\n            runLength = force;\n        }\n\n        ts.pushRun(lo, runLength);\n        ts.mergeRuns();\n\n        remaining -= runLength;\n        lo += runLength;\n    } while (remaining !== 0);\n\n    ts.forceMergeRuns();\n}\n","// Bit masks to check which parts of element needs to be updated.\nexport const REDRAW_BIT = 1;\nexport const STYLE_CHANGED_BIT = 2;\nexport const SHAPE_CHANGED_BIT = 4;\n","import * as util from './core/util';\nimport env from './core/env';\nimport Group, { GroupLike } from './graphic/Group';\nimport Element from './Element';\n\n// Use timsort because in most case elements are partially sorted\n// https://jsfiddle.net/pissang/jr4x7mdm/8/\nimport timsort from './core/timsort';\nimport Displayable from './graphic/Displayable';\nimport Path from './graphic/Path';\nimport { REDRAW_BIT } from './graphic/constants';\n\nlet invalidZErrorLogged = false;\nfunction logInvalidZError() {\n    if (invalidZErrorLogged) {\n        return;\n    }\n    invalidZErrorLogged = true;\n    console.warn('z / z2 / zlevel of displayable is invalid, which may cause unexpected errors');\n}\n\nfunction shapeCompareFunc(a: Displayable, b: Displayable) {\n    if (a.zlevel === b.zlevel) {\n        if (a.z === b.z) {\n            // if (a.z2 === b.z2) {\n            //     // FIXME Slow has renderidx compare\n            //     // http://stackoverflow.com/questions/20883421/sorting-in-javascript-should-every-compare-function-have-a-return-0-statement\n            //     // https://github.com/v8/v8/blob/47cce544a31ed5577ffe2963f67acb4144ee0232/src/js/array.js#L1012\n            //     return a.__renderidx - b.__renderidx;\n            // }\n            return a.z2 - b.z2;\n        }\n        return a.z - b.z;\n    }\n    return a.zlevel - b.zlevel;\n}\n\nexport default class Storage {\n\n    private _roots: Element[] = []\n\n    private _displayList: Displayable[] = []\n\n    private _displayListLen = 0\n\n    traverse<T>(\n        cb: (this: T, el: Element) => void,\n        context?: T\n    ) {\n        for (let i = 0; i < this._roots.length; i++) {\n            this._roots[i].traverse(cb, context);\n        }\n    }\n\n    /**\n     * get a list of elements to be rendered\n     *\n     * @param {boolean} update whether to update elements before return\n     * @param {DisplayParams} params options\n     * @return {Displayable[]} a list of elements\n     */\n    getDisplayList(update?: boolean, includeIgnore?: boolean): Displayable[] {\n        includeIgnore = includeIgnore || false;\n        const displayList = this._displayList;\n        // If displaylist is not created yet. Update force\n        if (update || !displayList.length) {\n            this.updateDisplayList(includeIgnore);\n        }\n        return displayList;\n    }\n\n    /**\n     * 更新图形的绘制队列。\n     * 每次绘制前都会调用，该方法会先深度优先遍历整个树，更新所有Group和Shape的变换并且把所有可见的Shape保存到数组中，\n     * 最后根据绘制的优先级（zlevel > z > 插入顺序）排序得到绘制队列\n     */\n    updateDisplayList(includeIgnore?: boolean) {\n        this._displayListLen = 0;\n\n        const roots = this._roots;\n        const displayList = this._displayList;\n        for (let i = 0, len = roots.length; i < len; i++) {\n            this._updateAndAddDisplayable(roots[i], null, includeIgnore);\n        }\n\n        displayList.length = this._displayListLen;\n\n        env.canvasSupported && timsort(displayList, shapeCompareFunc);\n    }\n\n    private _updateAndAddDisplayable(\n        el: Element,\n        clipPaths: Path[],\n        includeIgnore?: boolean\n    ) {\n        if (el.ignore && !includeIgnore) {\n            return;\n        }\n\n        el.beforeUpdate();\n        el.update();\n        el.afterUpdate();\n\n        const userSetClipPath = el.getClipPath();\n\n        if (el.ignoreClip) {\n            clipPaths = null;\n        }\n        else if (userSetClipPath) {\n\n            // FIXME 效率影响\n            if (clipPaths) {\n                clipPaths = clipPaths.slice();\n            }\n            else {\n                clipPaths = [];\n            }\n\n            let currentClipPath = userSetClipPath;\n            let parentClipPath = el;\n            // Recursively add clip path\n            while (currentClipPath) {\n                // clipPath 的变换是基于使用这个 clipPath 的元素\n                // TODO: parent should be group type.\n                currentClipPath.parent = parentClipPath as Group;\n                currentClipPath.updateTransform();\n\n                clipPaths.push(currentClipPath);\n\n                parentClipPath = currentClipPath;\n                currentClipPath = currentClipPath.getClipPath();\n            }\n        }\n\n        // ZRText and Group and combining morphing Path may use children\n        if ((el as GroupLike).childrenRef) {\n            const children = (el as GroupLike).childrenRef();\n\n            for (let i = 0; i < children.length; i++) {\n                const child = children[i];\n\n                // Force to mark as dirty if group is dirty\n                if (el.__dirty) {\n                    child.__dirty |= REDRAW_BIT;\n                }\n\n                this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\n            }\n\n            // Mark group clean here\n            el.__dirty = 0;\n\n        }\n        else {\n            const disp = el as Displayable;\n            // Element is displayable\n            if (clipPaths && clipPaths.length) {\n                disp.__clipPaths = clipPaths;\n            }\n            else if (disp.__clipPaths && disp.__clipPaths.length > 0) {\n                disp.__clipPaths = [];\n            }\n\n            // Avoid invalid z, z2, zlevel cause sorting error.\n            if (isNaN(disp.z)) {\n                logInvalidZError();\n                disp.z = 0;\n            }\n            if (isNaN(disp.z2)) {\n                logInvalidZError();\n                disp.z2 = 0;\n            }\n            if (isNaN(disp.zlevel)) {\n                logInvalidZError();\n                disp.zlevel = 0;\n            }\n\n            this._displayList[this._displayListLen++] = disp;\n        }\n\n        // Add decal\n        const decalEl = (el as Path).getDecalElement && (el as Path).getDecalElement();\n        if (decalEl) {\n            this._updateAndAddDisplayable(decalEl, clipPaths, includeIgnore);\n        }\n\n        // Add attached text element and guide line.\n        const textGuide = el.getTextGuideLine();\n        if (textGuide) {\n            this._updateAndAddDisplayable(textGuide, clipPaths, includeIgnore);\n        }\n\n        const textEl = el.getTextContent();\n        if (textEl) {\n            this._updateAndAddDisplayable(textEl, clipPaths, includeIgnore);\n        }\n    }\n\n    /**\n     * 添加图形(Displayable)或者组(Group)到根节点\n     */\n    addRoot(el: Element) {\n        if (el.__zr && el.__zr.storage === this) {\n            return;\n        }\n\n        this._roots.push(el);\n    }\n\n    /**\n     * 删除指定的图形(Displayable)或者组(Group)\n     * @param el\n     */\n    delRoot(el: Element | Element[]) {\n\n        if (el instanceof Array) {\n            for (let i = 0, l = el.length; i < l; i++) {\n                this.delRoot(el[i]);\n            }\n            return;\n        }\n\n        const idx = util.indexOf(this._roots, el);\n        if (idx >= 0) {\n            this._roots.splice(idx, 1);\n        }\n    }\n\n    delAllRoots() {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n\n        return;\n    }\n\n    getRoots() {\n        return this._roots;\n    }\n\n    /**\n     * 清空并且释放Storage\n     */\n    dispose() {\n        this._displayList = null;\n        this._roots = null;\n    }\n\n    displayableSortFunc = shapeCompareFunc\n}","type RequestAnimationFrameType = typeof window.requestAnimationFrame\n\nlet requestAnimationFrame: RequestAnimationFrameType;\n\nrequestAnimationFrame = (\n\ttypeof window !== 'undefined'\n\t\t&& (\n\t\t\t(window.requestAnimationFrame && window.requestAnimationFrame.bind(window))\n\t\t\t// https://github.com/ecomfe/zrender/issues/189#issuecomment-224919809\n\t\t\t|| ((window as any).msRequestAnimationFrame && (window as any).msRequestAnimationFrame.bind(window))\n\t\t\t|| (window as any).mozRequestAnimationFrame\n\t\t\t|| window.webkitRequestAnimationFrame\n\t\t)\n) || function (func: Parameters<RequestAnimationFrameType>[0]): number {\n\treturn setTimeout(func, 16) as any;\n};\n\nexport default requestAnimationFrame;\n","/**\n * 缓动代码来自 https://github.com/sole/tween.js/blob/master/src/Tween.js\n * @see http://sole.github.io/tween.js/examples/03_graphs.html\n * @exports zrender/animation/easing\n */\n\ntype easingFunc = (percent: number) => number;\n\nexport type AnimationEasing = keyof typeof easing | easingFunc | 'spline';\n\nconst easing = {\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    linear(k: number) {\n        return k;\n    },\n\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    quadraticIn(k: number) {\n        return k * k;\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    quadraticOut(k: number) {\n        return k * (2 - k);\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    quadraticInOut(k: number) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k;\n        }\n        return -0.5 * (--k * (k - 2) - 1);\n    },\n\n    // 三次方的缓动（t^3）\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    cubicIn(k: number) {\n        return k * k * k;\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    cubicOut(k: number) {\n        return --k * k * k + 1;\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    cubicInOut(k: number) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k + 2);\n    },\n\n    // 四次方的缓动（t^4）\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    quarticIn(k: number) {\n        return k * k * k * k;\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    quarticOut(k: number) {\n        return 1 - (--k * k * k * k);\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    quarticInOut(k: number) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k;\n        }\n        return -0.5 * ((k -= 2) * k * k * k - 2);\n    },\n\n    // 五次方的缓动（t^5）\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    quinticIn(k: number) {\n        return k * k * k * k * k;\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    quinticOut(k: number) {\n        return --k * k * k * k * k + 1;\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    quinticInOut(k: number) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    },\n\n    // 正弦曲线的缓动（sin(t)）\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    sinusoidalIn(k: number) {\n        return 1 - Math.cos(k * Math.PI / 2);\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    sinusoidalOut(k: number) {\n        return Math.sin(k * Math.PI / 2);\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    sinusoidalInOut(k: number) {\n        return 0.5 * (1 - Math.cos(Math.PI * k));\n    },\n\n    // 指数曲线的缓动（2^t）\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    exponentialIn(k: number) {\n        return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    exponentialOut(k: number) {\n        return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    exponentialInOut(k: number) {\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if ((k *= 2) < 1) {\n            return 0.5 * Math.pow(1024, k - 1);\n        }\n        return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    },\n\n    // 圆形曲线的缓动（sqrt(1-t^2)）\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    circularIn(k: number) {\n        return 1 - Math.sqrt(1 - k * k);\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    circularOut(k: number) {\n        return Math.sqrt(1 - (--k * k));\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    circularInOut(k: number) {\n        if ((k *= 2) < 1) {\n            return -0.5 * (Math.sqrt(1 - k * k) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    },\n\n    // 创建类似于弹簧在停止前来回振荡的动画\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    elasticIn(k: number) {\n        let s;\n        let a = 0.1;\n        let p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return -(a * Math.pow(2, 10 * (k -= 1))\n                    * Math.sin((k - s) * (2 * Math.PI) / p));\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    elasticOut(k: number) {\n        let s;\n        let a = 0.1;\n        let p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return (a * Math.pow(2, -10 * k)\n                    * Math.sin((k - s) * (2 * Math.PI) / p) + 1);\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    elasticInOut(k: number) {\n        let s;\n        let a = 0.1;\n        let p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        if ((k *= 2) < 1) {\n            return -0.5 * (a * Math.pow(2, 10 * (k -= 1))\n                * Math.sin((k - s) * (2 * Math.PI) / p));\n        }\n        return a * Math.pow(2, -10 * (k -= 1))\n                * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n\n    },\n\n    // 在某一动画开始沿指示的路径进行动画处理前稍稍收回该动画的移动\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    backIn(k: number) {\n        let s = 1.70158;\n        return k * k * ((s + 1) * k - s);\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    backOut(k: number) {\n        let s = 1.70158;\n        return --k * k * ((s + 1) * k + s) + 1;\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    backInOut(k: number) {\n        let s = 1.70158 * 1.525;\n        if ((k *= 2) < 1) {\n            return 0.5 * (k * k * ((s + 1) * k - s));\n        }\n        return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    },\n\n    // 创建弹跳效果\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    bounceIn(k: number) {\n        return 1 - easing.bounceOut(1 - k);\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    bounceOut(k: number) {\n        if (k < (1 / 2.75)) {\n            return 7.5625 * k * k;\n        }\n        else if (k < (2 / 2.75)) {\n            return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n        }\n        else if (k < (2.5 / 2.75)) {\n            return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n        }\n        else {\n            return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n        }\n    },\n    /**\n    * @param {number} k\n    * @return {number}\n    */\n    bounceInOut(k: number) {\n        if (k < 0.5) {\n            return easing.bounceIn(k * 2) * 0.5;\n        }\n        return easing.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n};\n\nexport default easing;","/**\n * 动画主控制器\n * @config target 动画对象，可以是数组，如果是数组的话会批量分发onframe等事件\n * @config life(1000) 动画时长\n * @config delay(0) 动画延迟时间\n * @config loop(true)\n * @config gap(0) 循环的间隔时间\n * @config onframe\n * @config easing(optional)\n * @config ondestroy(optional)\n * @config onrestart(optional)\n *\n * TODO pause\n */\n\nimport easingFuncs, {AnimationEasing} from './easing';\nimport type Animation from './Animation';\n\ntype OnframeCallback = (percent: number) => void;\ntype ondestroyCallback = () => void\ntype onrestartCallback = () => void\n\nexport type DeferredEventTypes = 'destroy' | 'restart'\n// type DeferredEventKeys = 'ondestroy' | 'onrestart'\n\nexport interface ClipProps {\n    life?: number\n    delay?: number\n    loop?: boolean\n    gap?: number\n    easing?: AnimationEasing\n\n    onframe?: OnframeCallback\n    ondestroy?: ondestroyCallback\n    onrestart?: onrestartCallback\n}\n\nexport default class Clip {\n\n    // 生命周期\n    private _life: number\n    // 延时\n    private _delay: number\n\n    private _initialized: boolean = false\n    // 开始时间\n    private _startTime = 0 // 开始时间单位毫秒\n\n    private _pausedTime = 0\n    private _paused = false\n\n    animation: Animation\n\n    loop: boolean\n    gap: number\n    easing: AnimationEasing\n\n    // For linked list. Readonly\n    next: Clip\n    prev: Clip\n\n    onframe: OnframeCallback\n    ondestroy: ondestroyCallback\n    onrestart: onrestartCallback\n\n    constructor(opts: ClipProps) {\n\n        this._life = opts.life || 1000;\n\n        this._delay = opts.delay || 0;\n\n        // this._startTime = new Date().getTime() + this._delay;\n\n        // 是否循环\n        this.loop = opts.loop == null ? false : opts.loop;\n\n        this.gap = opts.gap || 0;\n\n        this.easing = opts.easing || 'linear';\n\n        this.onframe = opts.onframe;\n        this.ondestroy = opts.ondestroy;\n        this.onrestart = opts.onrestart;\n    }\n\n    step(globalTime: number, deltaTime: number): boolean {\n        // Set startTime on first step, or _startTime may has milleseconds different between clips\n        // PENDING\n        if (!this._initialized) {\n            this._startTime = globalTime + this._delay;\n            this._initialized = true;\n        }\n\n        if (this._paused) {\n            this._pausedTime += deltaTime;\n            return;\n        }\n\n        let percent = (globalTime - this._startTime - this._pausedTime) / this._life;\n\n        // PENDING: Not begin yet. Still run the loop.\n        // In the case callback needs to be invoked.\n        // Or want to update to the begin state at next frame when `setToFinal` and `delay` are both used.\n        // To avoid the unexpected blink.\n        if (percent < 0) {\n            percent = 0;\n        }\n\n        percent = Math.min(percent, 1);\n\n        const easing = this.easing;\n        const easingFunc = typeof easing === 'string'\n            ? easingFuncs[easing as keyof typeof easingFuncs] : easing;\n        const schedule = typeof easingFunc === 'function'\n            ? easingFunc(percent)\n            : percent;\n\n        this.onframe && this.onframe(schedule);\n\n        // 结束\n        if (percent === 1) {\n            if (this.loop) {\n                this._restart(globalTime);\n                this.onrestart && this.onrestart();\n            }\n            else {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    private _restart(globalTime: number) {\n        const remainder = (globalTime - this._startTime - this._pausedTime) % this._life;\n        this._startTime = globalTime - remainder + this.gap;\n        this._pausedTime = 0;\n    }\n\n    pause() {\n        this._paused = true;\n    }\n\n    resume() {\n        this._paused = false;\n    }\n}","import { Dictionary } from './types';\n\n// Simple LRU cache use doubly linked list\n// @module zrender/core/LRU\n\nexport class Entry<T> {\n\n    value: T\n\n    key: string | number\n\n    next: Entry<T>\n\n    prev: Entry<T>\n\n    constructor(val: T) {\n        this.value = val;\n    }\n}\n/**\n * Simple double linked list. Compared with array, it has O(1) remove operation.\n * @constructor\n */\nexport class LinkedList<T> {\n\n    head: Entry<T>\n    tail: Entry<T>\n\n    private _len = 0\n\n    /**\n     * Insert a new value at the tail\n     */\n    insert(val: T): Entry<T> {\n        const entry = new Entry(val);\n        this.insertEntry(entry);\n        return entry;\n    }\n\n    /**\n     * Insert an entry at the tail\n     */\n    insertEntry(entry: Entry<T>) {\n        if (!this.head) {\n            this.head = this.tail = entry;\n        }\n        else {\n            this.tail.next = entry;\n            entry.prev = this.tail;\n            entry.next = null;\n            this.tail = entry;\n        }\n        this._len++;\n    }\n\n    /**\n     * Remove entry.\n     */\n    remove(entry: Entry<T>) {\n        const prev = entry.prev;\n        const next = entry.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            // Is head\n            this.head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            // Is tail\n            this.tail = prev;\n        }\n        entry.next = entry.prev = null;\n        this._len--;\n    }\n\n    /**\n     * Get length\n     */\n    len(): number {\n        return this._len;\n    }\n\n    /**\n     * Clear list\n     */\n    clear() {\n        this.head = this.tail = null;\n        this._len = 0;\n    }\n\n}\n\n/**\n * LRU Cache\n */\nexport default class LRU<T> {\n\n    private _list = new LinkedList<T>()\n\n    private _maxSize = 10\n\n    private _lastRemovedEntry: Entry<T>\n\n    private _map: Dictionary<Entry<T>> = {}\n\n    constructor(maxSize: number) {\n        this._maxSize = maxSize;\n    }\n\n    /**\n     * @return Removed value\n     */\n    put(key: string | number, value: T): T {\n        const list = this._list;\n        const map = this._map;\n        let removed = null;\n        if (map[key] == null) {\n            const len = list.len();\n            // Reuse last removed entry\n            let entry = this._lastRemovedEntry;\n\n            if (len >= this._maxSize && len > 0) {\n                // Remove the least recently used\n                const leastUsedEntry = list.head;\n                list.remove(leastUsedEntry);\n                delete map[leastUsedEntry.key];\n\n                removed = leastUsedEntry.value;\n                this._lastRemovedEntry = leastUsedEntry;\n            }\n\n            if (entry) {\n                entry.value = value;\n            }\n            else {\n                entry = new Entry(value);\n            }\n            entry.key = key;\n            list.insertEntry(entry);\n            map[key] = entry;\n        }\n\n        return removed;\n    }\n\n    get(key: string | number): T {\n        const entry = this._map[key];\n        const list = this._list;\n        if (entry != null) {\n            // Put the latest used entry in the tail\n            if (entry !== list.tail) {\n                list.remove(entry);\n                list.insertEntry(entry);\n            }\n\n            return entry.value;\n        }\n    }\n\n    /**\n     * Clear the cache\n     */\n    clear() {\n        this._list.clear();\n        this._map = {};\n    }\n\n    len() {\n        return this._list.len();\n    }\n}","import LRU from '../core/LRU';\n\nconst kCSSColorTable = {\n    'transparent': [0, 0, 0, 0], 'aliceblue': [240, 248, 255, 1],\n    'antiquewhite': [250, 235, 215, 1], 'aqua': [0, 255, 255, 1],\n    'aquamarine': [127, 255, 212, 1], 'azure': [240, 255, 255, 1],\n    'beige': [245, 245, 220, 1], 'bisque': [255, 228, 196, 1],\n    'black': [0, 0, 0, 1], 'blanchedalmond': [255, 235, 205, 1],\n    'blue': [0, 0, 255, 1], 'blueviolet': [138, 43, 226, 1],\n    'brown': [165, 42, 42, 1], 'burlywood': [222, 184, 135, 1],\n    'cadetblue': [95, 158, 160, 1], 'chartreuse': [127, 255, 0, 1],\n    'chocolate': [210, 105, 30, 1], 'coral': [255, 127, 80, 1],\n    'cornflowerblue': [100, 149, 237, 1], 'cornsilk': [255, 248, 220, 1],\n    'crimson': [220, 20, 60, 1], 'cyan': [0, 255, 255, 1],\n    'darkblue': [0, 0, 139, 1], 'darkcyan': [0, 139, 139, 1],\n    'darkgoldenrod': [184, 134, 11, 1], 'darkgray': [169, 169, 169, 1],\n    'darkgreen': [0, 100, 0, 1], 'darkgrey': [169, 169, 169, 1],\n    'darkkhaki': [189, 183, 107, 1], 'darkmagenta': [139, 0, 139, 1],\n    'darkolivegreen': [85, 107, 47, 1], 'darkorange': [255, 140, 0, 1],\n    'darkorchid': [153, 50, 204, 1], 'darkred': [139, 0, 0, 1],\n    'darksalmon': [233, 150, 122, 1], 'darkseagreen': [143, 188, 143, 1],\n    'darkslateblue': [72, 61, 139, 1], 'darkslategray': [47, 79, 79, 1],\n    'darkslategrey': [47, 79, 79, 1], 'darkturquoise': [0, 206, 209, 1],\n    'darkviolet': [148, 0, 211, 1], 'deeppink': [255, 20, 147, 1],\n    'deepskyblue': [0, 191, 255, 1], 'dimgray': [105, 105, 105, 1],\n    'dimgrey': [105, 105, 105, 1], 'dodgerblue': [30, 144, 255, 1],\n    'firebrick': [178, 34, 34, 1], 'floralwhite': [255, 250, 240, 1],\n    'forestgreen': [34, 139, 34, 1], 'fuchsia': [255, 0, 255, 1],\n    'gainsboro': [220, 220, 220, 1], 'ghostwhite': [248, 248, 255, 1],\n    'gold': [255, 215, 0, 1], 'goldenrod': [218, 165, 32, 1],\n    'gray': [128, 128, 128, 1], 'green': [0, 128, 0, 1],\n    'greenyellow': [173, 255, 47, 1], 'grey': [128, 128, 128, 1],\n    'honeydew': [240, 255, 240, 1], 'hotpink': [255, 105, 180, 1],\n    'indianred': [205, 92, 92, 1], 'indigo': [75, 0, 130, 1],\n    'ivory': [255, 255, 240, 1], 'khaki': [240, 230, 140, 1],\n    'lavender': [230, 230, 250, 1], 'lavenderblush': [255, 240, 245, 1],\n    'lawngreen': [124, 252, 0, 1], 'lemonchiffon': [255, 250, 205, 1],\n    'lightblue': [173, 216, 230, 1], 'lightcoral': [240, 128, 128, 1],\n    'lightcyan': [224, 255, 255, 1], 'lightgoldenrodyellow': [250, 250, 210, 1],\n    'lightgray': [211, 211, 211, 1], 'lightgreen': [144, 238, 144, 1],\n    'lightgrey': [211, 211, 211, 1], 'lightpink': [255, 182, 193, 1],\n    'lightsalmon': [255, 160, 122, 1], 'lightseagreen': [32, 178, 170, 1],\n    'lightskyblue': [135, 206, 250, 1], 'lightslategray': [119, 136, 153, 1],\n    'lightslategrey': [119, 136, 153, 1], 'lightsteelblue': [176, 196, 222, 1],\n    'lightyellow': [255, 255, 224, 1], 'lime': [0, 255, 0, 1],\n    'limegreen': [50, 205, 50, 1], 'linen': [250, 240, 230, 1],\n    'magenta': [255, 0, 255, 1], 'maroon': [128, 0, 0, 1],\n    'mediumaquamarine': [102, 205, 170, 1], 'mediumblue': [0, 0, 205, 1],\n    'mediumorchid': [186, 85, 211, 1], 'mediumpurple': [147, 112, 219, 1],\n    'mediumseagreen': [60, 179, 113, 1], 'mediumslateblue': [123, 104, 238, 1],\n    'mediumspringgreen': [0, 250, 154, 1], 'mediumturquoise': [72, 209, 204, 1],\n    'mediumvioletred': [199, 21, 133, 1], 'midnightblue': [25, 25, 112, 1],\n    'mintcream': [245, 255, 250, 1], 'mistyrose': [255, 228, 225, 1],\n    'moccasin': [255, 228, 181, 1], 'navajowhite': [255, 222, 173, 1],\n    'navy': [0, 0, 128, 1], 'oldlace': [253, 245, 230, 1],\n    'olive': [128, 128, 0, 1], 'olivedrab': [107, 142, 35, 1],\n    'orange': [255, 165, 0, 1], 'orangered': [255, 69, 0, 1],\n    'orchid': [218, 112, 214, 1], 'palegoldenrod': [238, 232, 170, 1],\n    'palegreen': [152, 251, 152, 1], 'paleturquoise': [175, 238, 238, 1],\n    'palevioletred': [219, 112, 147, 1], 'papayawhip': [255, 239, 213, 1],\n    'peachpuff': [255, 218, 185, 1], 'peru': [205, 133, 63, 1],\n    'pink': [255, 192, 203, 1], 'plum': [221, 160, 221, 1],\n    'powderblue': [176, 224, 230, 1], 'purple': [128, 0, 128, 1],\n    'red': [255, 0, 0, 1], 'rosybrown': [188, 143, 143, 1],\n    'royalblue': [65, 105, 225, 1], 'saddlebrown': [139, 69, 19, 1],\n    'salmon': [250, 128, 114, 1], 'sandybrown': [244, 164, 96, 1],\n    'seagreen': [46, 139, 87, 1], 'seashell': [255, 245, 238, 1],\n    'sienna': [160, 82, 45, 1], 'silver': [192, 192, 192, 1],\n    'skyblue': [135, 206, 235, 1], 'slateblue': [106, 90, 205, 1],\n    'slategray': [112, 128, 144, 1], 'slategrey': [112, 128, 144, 1],\n    'snow': [255, 250, 250, 1], 'springgreen': [0, 255, 127, 1],\n    'steelblue': [70, 130, 180, 1], 'tan': [210, 180, 140, 1],\n    'teal': [0, 128, 128, 1], 'thistle': [216, 191, 216, 1],\n    'tomato': [255, 99, 71, 1], 'turquoise': [64, 224, 208, 1],\n    'violet': [238, 130, 238, 1], 'wheat': [245, 222, 179, 1],\n    'white': [255, 255, 255, 1], 'whitesmoke': [245, 245, 245, 1],\n    'yellow': [255, 255, 0, 1], 'yellowgreen': [154, 205, 50, 1]\n};\n\nfunction clampCssByte(i: number): number {  // Clamp to integer 0 .. 255.\n    i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clampCssAngle(i: number): number {  // Clamp to integer 0 .. 360.\n    i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n    return i < 0 ? 0 : i > 360 ? 360 : i;\n}\n\nfunction clampCssFloat(f: number): number {  // Clamp to float 0.0 .. 1.0.\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n}\n\nfunction parseCssInt(val: string | number): number {  // int or percentage.\n    let str = val as string;\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssByte(parseFloat(str) / 100 * 255);\n    }\n    return clampCssByte(parseInt(str, 10));\n}\n\nfunction parseCssFloat(val: string | number): number {  // float or percentage.\n    let str = val as string;\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssFloat(parseFloat(str) / 100);\n    }\n    return clampCssFloat(parseFloat(str));\n}\n\nfunction cssHueToRgb(m1: number, m2: number, h: number): number {\n    if (h < 0) {\n        h += 1;\n    }\n    else if (h > 1) {\n        h -= 1;\n    }\n\n    if (h * 6 < 1) {\n        return m1 + (m2 - m1) * h * 6;\n    }\n    if (h * 2 < 1) {\n        return m2;\n    }\n    if (h * 3 < 2) {\n        return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n    }\n    return m1;\n}\n\nfunction lerpNumber(a: number, b: number, p: number): number {\n    return a + (b - a) * p;\n}\n\nfunction setRgba(out: number[], r: number, g: number, b: number, a: number): number[] {\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n}\nfunction copyRgba(out: number[], a: number[]) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\n\nconst colorCache = new LRU<number[]>(20);\nlet lastRemovedArr: number[] = null;\n\nfunction putToCache(colorStr: string, rgbaArr: number[]) {\n    // Reuse removed array\n    if (lastRemovedArr) {\n        copyRgba(lastRemovedArr, rgbaArr);\n    }\n    lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || (rgbaArr.slice()));\n}\n\nexport function parse(colorStr: string, rgbaArr?: number[]): number[] {\n    if (!colorStr) {\n        return;\n    }\n    rgbaArr = rgbaArr || [];\n\n    let cached = colorCache.get(colorStr);\n    if (cached) {\n        return copyRgba(rgbaArr, cached);\n    }\n\n    // colorStr may be not string\n    colorStr = colorStr + '';\n    // Remove all whitespace, not compliant, but should just be more accepting.\n    let str = colorStr.replace(/ /g, '').toLowerCase();\n\n    // Color keywords (and transparent) lookup.\n    if (str in kCSSColorTable) {\n        copyRgba(rgbaArr, kCSSColorTable[str as keyof typeof kCSSColorTable]);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n    }\n\n    // supports the forms #rgb, #rrggbb, #rgba, #rrggbbaa\n    // #rrggbbaa(use the last pair of digits as alpha)\n    // see https://drafts.csswg.org/css-color/#hex-notation\n    const strLen = str.length;\n    if (str.charAt(0) === '#') {\n        if (strLen === 4 || strLen === 5) {\n            const iv = parseInt(str.slice(1, 4), 16);  // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 0xfff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;  // Covers NaN.\n            }\n            // interpret values of the form #rgb as #rrggbb and #rgba as #rrggbbaa\n            setRgba(rgbaArr,\n                ((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8),\n                (iv & 0xf0) | ((iv & 0xf0) >> 4),\n                (iv & 0xf) | ((iv & 0xf) << 4),\n                strLen === 5 ? parseInt(str.slice(4), 16) / 0xf : 1\n            );\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        else if (strLen === 7 || strLen === 9) {\n            const iv = parseInt(str.slice(1, 7), 16);  // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 0xffffff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;  // Covers NaN.\n            }\n            setRgba(rgbaArr,\n                (iv & 0xff0000) >> 16,\n                (iv & 0xff00) >> 8,\n                iv & 0xff,\n                strLen === 9 ? parseInt(str.slice(7), 16) / 0xff : 1\n            );\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n\n        return;\n    }\n    let op = str.indexOf('(');\n    let ep = str.indexOf(')');\n    if (op !== -1 && ep + 1 === strLen) {\n        let fname = str.substr(0, op);\n        let params: (number | string)[] = str.substr(op + 1, ep - (op + 1)).split(',');\n        let alpha = 1;  // To allow case fallthrough.\n        switch (fname) {\n            case 'rgba':\n                if (params.length !== 4) {\n                    return params.length === 3\n                        // to be compatible with rgb\n                        ? setRgba(rgbaArr, +params[0], +params[1], +params[2], 1)\n                        : setRgba(rgbaArr, 0, 0, 0, 1);\n                }\n                alpha = parseCssFloat(params.pop() as string); // jshint ignore:line\n            // Fall through.\n            case 'rgb':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                setRgba(rgbaArr,\n                    parseCssInt(params[0]),\n                    parseCssInt(params[1]),\n                    parseCssInt(params[2]),\n                    alpha\n                );\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsla':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                params[3] = parseCssFloat(params[3] as string);\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsl':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            default:\n                return;\n        }\n    }\n\n    setRgba(rgbaArr, 0, 0, 0, 1);\n    return;\n}\n\nfunction hsla2rgba(hsla: (number | string) [], rgba?: number[]): number[] {\n    const h = (((parseFloat(hsla[0] as string) % 360) + 360) % 360) / 360;  // 0 .. 1\n    // NOTE(deanm): According to the CSS spec s/l should only be\n    // percentages, but we don't bother and let float or percentage.\n    const s = parseCssFloat(hsla[1]);\n    const l = parseCssFloat(hsla[2]);\n    const m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    const m1 = l * 2 - m2;\n\n    rgba = rgba || [];\n    setRgba(rgba,\n        clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255),\n        clampCssByte(cssHueToRgb(m1, m2, h) * 255),\n        clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255),\n        1\n    );\n\n    if (hsla.length === 4) {\n        rgba[3] = hsla[3] as number;\n    }\n\n    return rgba;\n}\n\nfunction rgba2hsla(rgba: number[]): number[] {\n    if (!rgba) {\n        return;\n    }\n\n    // RGB from 0 to 255\n    const R = rgba[0] / 255;\n    const G = rgba[1] / 255;\n    const B = rgba[2] / 255;\n\n    const vMin = Math.min(R, G, B); // Min. value of RGB\n    const vMax = Math.max(R, G, B); // Max. value of RGB\n    const delta = vMax - vMin; // Delta RGB value\n\n    const L = (vMax + vMin) / 2;\n    let H;\n    let S;\n    // HSL results from 0 to 1\n    if (delta === 0) {\n        H = 0;\n        S = 0;\n    }\n    else {\n        if (L < 0.5) {\n            S = delta / (vMax + vMin);\n        }\n        else {\n            S = delta / (2 - vMax - vMin);\n        }\n\n        const deltaR = (((vMax - R) / 6) + (delta / 2)) / delta;\n        const deltaG = (((vMax - G) / 6) + (delta / 2)) / delta;\n        const deltaB = (((vMax - B) / 6) + (delta / 2)) / delta;\n\n        if (R === vMax) {\n            H = deltaB - deltaG;\n        }\n        else if (G === vMax) {\n            H = (1 / 3) + deltaR - deltaB;\n        }\n        else if (B === vMax) {\n            H = (2 / 3) + deltaG - deltaR;\n        }\n\n        if (H < 0) {\n            H += 1;\n        }\n\n        if (H > 1) {\n            H -= 1;\n        }\n    }\n\n    const hsla = [H * 360, S, L];\n\n    if (rgba[3] != null) {\n        hsla.push(rgba[3]);\n    }\n\n    return hsla;\n}\n\nexport function lift(color: string, level: number) {\n    const colorArr = parse(color);\n    if (colorArr) {\n        for (let i = 0; i < 3; i++) {\n            if (level < 0) {\n                colorArr[i] = colorArr[i] * (1 - level) | 0;\n            }\n            else {\n                colorArr[i] = ((255 - colorArr[i]) * level + colorArr[i]) | 0;\n            }\n            if (colorArr[i] > 255) {\n                colorArr[i] = 255;\n            }\n            else if (colorArr[i] < 0) {\n                colorArr[i] = 0;\n            }\n        }\n        return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n    }\n}\n\nexport function toHex(color: string): string {\n    const colorArr = parse(color);\n    if (colorArr) {\n        return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + (+colorArr[2])).toString(16).slice(1);\n    }\n}\n\n/**\n * Map value to color. Faster than lerp methods because color is represented by rgba array.\n * @param normalizedValue A float between 0 and 1.\n * @param colors List of rgba color array\n * @param out Mapped gba color array\n * @return will be null/undefined if input illegal.\n */\nexport function fastLerp(\n    normalizedValue: number,\n    colors: number[][],\n    out?: number[]\n): number[] {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)\n    ) {\n        return;\n    }\n\n    out = out || [];\n\n    const value = normalizedValue * (colors.length - 1);\n    const leftIndex = Math.floor(value);\n    const rightIndex = Math.ceil(value);\n    const leftColor = colors[leftIndex];\n    const rightColor = colors[rightIndex];\n    const dv = value - leftIndex;\n    out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n    out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n    out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n    out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n\n    return out;\n}\n\n/**\n * @deprecated\n */\nexport const fastMapToColor = fastLerp;\n\ntype LerpFullOutput = {\n    color: string\n    leftIndex: number\n    rightIndex: number\n    value: number\n}\n/**\n * @param normalizedValue A float between 0 and 1.\n * @param colors Color list.\n * @param fullOutput Default false.\n * @return Result color. If fullOutput,\n            return {color: ..., leftIndex: ..., rightIndex: ..., value: ...},\n */\nexport function lerp(\n    normalizedValue: number,\n    colors: string[],\n    fullOutput: boolean\n): LerpFullOutput\nexport function lerp(\n    normalizedValue: number,\n    colors: string[]\n): string\nexport function lerp(\n    normalizedValue: number,\n    colors: string[],\n    fullOutput?: boolean\n): string | LerpFullOutput {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)\n    ) {\n        return;\n    }\n\n    const value = normalizedValue * (colors.length - 1);\n    const leftIndex = Math.floor(value);\n    const rightIndex = Math.ceil(value);\n    const leftColor = parse(colors[leftIndex]);\n    const rightColor = parse(colors[rightIndex]);\n    const dv = value - leftIndex;\n\n    const color = stringify(\n        [\n            clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)),\n            clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)),\n            clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)),\n            clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))\n        ],\n        'rgba'\n    );\n\n    return fullOutput\n        ? {\n            color: color,\n            leftIndex: leftIndex,\n            rightIndex: rightIndex,\n            value: value\n        }\n        : color;\n}\n\n/**\n * @deprecated\n */\nexport const mapToColor = lerp;\n\n/**\n * @param color\n * @param h 0 ~ 360, ignore when null.\n * @param s 0 ~ 1, ignore when null.\n * @param l 0 ~ 1, ignore when null.\n * @return Color string in rgba format.\n * @memberOf module:zrender/util/color\n */\nexport function modifyHSL(color: string, h?: number, s?: number, l?: number): string {\n    let colorArr = parse(color);\n\n    if (color) {\n        colorArr = rgba2hsla(colorArr);\n        h != null && (colorArr[0] = clampCssAngle(h));\n        s != null && (colorArr[1] = parseCssFloat(s));\n        l != null && (colorArr[2] = parseCssFloat(l));\n\n        return stringify(hsla2rgba(colorArr), 'rgba');\n    }\n}\n\n/**\n * @param color\n * @param alpha 0 ~ 1\n * @return Color string in rgba format.\n * @memberOf module:zrender/util/color\n */\nexport function modifyAlpha(color: string, alpha?: number): string {\n    const colorArr = parse(color);\n\n    if (colorArr && alpha != null) {\n        colorArr[3] = clampCssFloat(alpha);\n        return stringify(colorArr, 'rgba');\n    }\n}\n\n/**\n * @param arrColor like [12,33,44,0.4]\n * @param type 'rgba', 'hsva', ...\n * @return Result color. (If input illegal, return undefined).\n */\nexport function stringify(arrColor: number[], type: string): string {\n    if (!arrColor || !arrColor.length) {\n        return;\n    }\n    let colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n    if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n        colorStr += ',' + arrColor[3];\n    }\n    return type + '(' + colorStr + ')';\n}\n\n/**\n * Calculate luminance. It will include alpha.\n */\nexport function lum(color: string, backgroundLum: number) {\n    const arr = parse(color);\n    return arr\n        ? (0.299 * arr[0] + 0.587 * arr[1] + 0.114 * arr[2]) * arr[3] / 255\n            + (1 - arr[3]) * backgroundLum  // Blending with assumed white background.\n        : 0;\n}\n\n/**\n * Generate a random color\n */\nexport function random(): string {\n    let r = Math.round(Math.random() * 255);\n    let g = Math.round(Math.random() * 255);\n    let b = Math.round(Math.random() * 255);\n\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n}","/**\n * @module echarts/animation/Animator\n */\n\nimport Clip from './Clip';\nimport * as color from '../tool/color';\nimport {isArrayLike, keys, logError} from '../core/util';\nimport {ArrayLike, Dictionary} from '../core/types';\nimport { AnimationEasing } from './easing';\nimport Animation from './Animation';\n\ntype NumberArray = ArrayLike<number>\ntype InterpolatableType = string | number | NumberArray | NumberArray[];\n\nconst arraySlice = Array.prototype.slice;\n\nexport function interpolateNumber(p0: number, p1: number, percent: number): number {\n    return (p1 - p0) * percent + p0;\n}\n\nexport function step(p0: any, p1: any, percent: number): any {\n    return percent > 0.5 ? p1 : p0;\n}\n\nexport function interpolate1DArray(\n    out: NumberArray,\n    p0: NumberArray,\n    p1: NumberArray,\n    percent: number\n) {\n    // TODO Handling different length TypedArray\n    const len = p0.length;\n    for (let i = 0; i < len; i++) {\n        out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n}\n\nexport function interpolate2DArray(\n    out: NumberArray[],\n    p0: NumberArray[],\n    p1: NumberArray[],\n    percent: number\n) {\n    const len = p0.length;\n    // TODO differnt length on each item?\n    const len2 = len && p0[0].length;\n    for (let i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (let j = 0; j < len2; j++) {\n            out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n        }\n    }\n}\n\nfunction add1DArray(\n    out: NumberArray,\n    p0: NumberArray,\n    p1: NumberArray,\n    sign: 1 | -1\n) {\n    const len = p0.length;\n    for (let i = 0; i < len; i++) {\n        out[i] = p0[i] + p1[i] * sign;\n    }\n    return out;\n}\n\nfunction add2DArray(\n    out: NumberArray[],\n    p0: NumberArray[],\n    p1: NumberArray[],\n    sign: 1 | -1\n) {\n    const len = p0.length;\n    const len2 = len && p0[0].length;\n    for (let i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (let j = 0; j < len2; j++) {\n            out[i][j] = p0[i][j] + p1[i][j] * sign;\n        }\n    }\n    return out;\n}\n// arr0 is source array, arr1 is target array.\n// Do some preprocess to avoid error happened when interpolating from arr0 to arr1\nfunction fillArray(\n    val0: NumberArray | NumberArray[],\n    val1: NumberArray | NumberArray[],\n    arrDim: number\n) {\n    // TODO Handling different length TypedArray\n    let arr0 = val0 as (number | number[])[];\n    let arr1 = val1 as (number | number[])[];\n    if (!arr0.push || !arr1.push) {\n        return;\n    }\n    const arr0Len = arr0.length;\n    const arr1Len = arr1.length;\n    if (arr0Len !== arr1Len) {\n        // FIXME Not work for TypedArray\n        const isPreviousLarger = arr0Len > arr1Len;\n        if (isPreviousLarger) {\n            // Cut the previous\n            arr0.length = arr1Len;\n        }\n        else {\n            // Fill the previous\n            for (let i = arr0Len; i < arr1Len; i++) {\n                arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n            }\n        }\n    }\n    // Handling NaN value\n    const len2 = arr0[0] && (arr0[0] as number[]).length;\n    for (let i = 0; i < arr0.length; i++) {\n        if (arrDim === 1) {\n            if (isNaN(arr0[i] as number)) {\n                arr0[i] = arr1[i];\n            }\n        }\n        else {\n            for (let j = 0; j < len2; j++) {\n                if (isNaN((arr0 as number[][])[i][j])) {\n                    (arr0 as number[][])[i][j] = (arr1 as number[][])[i][j];\n                }\n            }\n        }\n    }\n}\n\nfunction is1DArraySame(arr0: NumberArray, arr1: NumberArray) {\n    const len = arr0.length;\n    if (len !== arr1.length) {\n        return false;\n    }\n    for (let i = 0; i < len; i++) {\n        if (arr0[i] !== arr1[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\n\n/**\n * Catmull Rom interpolate number\n */\nfunction catmullRomInterpolate(\n    p0: number, p1: number, p2: number, p3: number, t: number, t2: number, t3: number\n) {\n    const v0 = (p2 - p0) * 0.5;\n    const v1 = (p3 - p1) * 0.5;\n    return (2 * (p1 - p2) + v0 + v1) * t3\n            + (-3 * (p1 - p2) - 2 * v0 - v1) * t2\n            + v0 * t + p1;\n}\n/**\n * Catmull Rom interpolate 1D array\n */\nfunction catmullRomInterpolate1DArray(\n    out: NumberArray,\n    p0: NumberArray,\n    p1: NumberArray,\n    p2: NumberArray,\n    p3: NumberArray,\n    t: number,\n    t2: number,\n    t3: number\n) {\n    const len = p0.length;\n    for (let i = 0; i < len; i++) {\n        out[i] = catmullRomInterpolate(\n            p0[i], p1[i], p2[i], p3[i], t, t2, t3\n        );\n    }\n}\n\n/**\n * Catmull Rom interpolate 2D array\n */\nfunction catmullRomInterpolate2DArray(\n    out: NumberArray[],\n    p0: NumberArray[],\n    p1: NumberArray[],\n    p2: NumberArray[],\n    p3: NumberArray[],\n    t: number,\n    t2: number,\n    t3: number\n) {\n    const len = p0.length;\n    const len2 = p0[0].length;\n    for (let i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[1] = [];\n        }\n        for (let j = 0; j < len2; j++) {\n            out[i][j] = catmullRomInterpolate(\n                p0[i][j], p1[i][j], p2[i][j], p3[i][j],\n                t, t2, t3\n            );\n        }\n    }\n}\n\n\nexport function cloneValue(value: InterpolatableType) {\n    if (isArrayLike(value)) {\n        const len = value.length;\n        if (isArrayLike(value[0])) {\n            const ret = [];\n            for (let i = 0; i < len; i++) {\n                ret.push(arraySlice.call(value[i]));\n            }\n            return ret;\n        }\n\n        return arraySlice.call(value);\n    }\n\n    return value;\n}\n\nfunction rgba2String(rgba: number[]): string {\n    rgba[0] = Math.floor(rgba[0]);\n    rgba[1] = Math.floor(rgba[1]);\n    rgba[2] = Math.floor(rgba[2]);\n\n    return 'rgba(' + rgba.join(',') + ')';\n}\n\nfunction guessArrayDim(value: ArrayLike<unknown>): number {\n    return isArrayLike(value && (value as ArrayLike<unknown>)[0]) ? 2 : 1;\n}\n\ntype Keyframe = {\n    time: number\n    value: unknown\n    percent: number\n\n    additiveValue?: unknown\n}\n\nlet tmpRgba: number[] = [0, 0, 0, 0];\nclass Track {\n\n    keyframes: Keyframe[] = []\n    maxTime: number = 0\n\n    propName: string\n\n    /**\n     * If use spline interpolate\n     */\n    useSpline: boolean\n\n    // Larger than 0 if value is array\n    arrDim: number = 0\n    isValueColor: boolean\n\n    interpolable: boolean = true\n\n    private _finished: boolean\n\n    private _needsSort: boolean = false\n\n    private _isAllValueEqual = true\n\n    private _additiveTrack: Track\n    // Temporal storage for interpolated additive value.\n    private _additiveValue: unknown\n\n    // Info for run\n    private _lastFrame = 0\n    private _lastFramePercent = 0\n\n    constructor(propName: string) {\n        this.propName = propName;\n    }\n\n    isFinished() {\n        return this._finished;\n    }\n\n    setFinished() {\n        this._finished = true;\n        // Also set additive track to finished.\n        // Make sure the final value stopped on the latest track\n        if (this._additiveTrack) {\n            this._additiveTrack.setFinished();\n        }\n    }\n\n    needsAnimate() {\n        return !this._isAllValueEqual\n             && this.keyframes.length >= 2\n             && this.interpolable\n             && this.maxTime > 0;\n    }\n\n    getAdditiveTrack() {\n        return this._additiveTrack;\n    }\n\n    addKeyframe(time: number, value: unknown) {\n        if (time >= this.maxTime) {\n            this.maxTime = time;\n        }\n        else {\n            this._needsSort = true;\n        }\n\n        let keyframes = this.keyframes;\n\n        let len = keyframes.length;\n\n        if (this.interpolable) {\n            // Handling values only if it's possible to be interpolated.\n            if (isArrayLike(value)) {\n                let arrayDim = guessArrayDim(value);\n                if (len > 0 && this.arrDim !== arrayDim) { // Two values has differnt dimension.\n                    this.interpolable = false;\n                    return;\n                }\n                // Not a number array.\n                if (arrayDim === 1 && typeof value[0] !== 'number'\n                    || arrayDim === 2 && typeof value[0][0] !== 'number') {\n                    this.interpolable = false;\n                    return;\n                }\n                if (len > 0) {\n                    let lastFrame = keyframes[len - 1];\n\n                    // For performance consideration. only check 1d array\n                    if (this._isAllValueEqual) {\n                        if (arrayDim === 1) {\n                            if (!is1DArraySame(value, lastFrame.value as number[])) {\n                                this._isAllValueEqual = false;\n                            }\n                        }\n                        else {\n                            this._isAllValueEqual = false;\n                        }\n                    }\n                }\n                this.arrDim = arrayDim;\n            }\n            else {\n                if (this.arrDim > 0) {  // Previous value is array.\n                    this.interpolable = false;\n                    return;\n                }\n\n                if (typeof value === 'string') {\n                    const colorArray = color.parse(value);\n                    if (colorArray) {\n                        value = colorArray;\n                        this.isValueColor = true;\n                    }\n                    else {\n                        this.interpolable = false;\n                    }\n                }\n                else if (typeof value !== 'number' || isNaN(value)) {\n                    this.interpolable = false;\n                    return;\n                }\n\n                if (this._isAllValueEqual && len > 0) {\n                    let lastFrame = keyframes[len - 1];\n                    if (this.isValueColor && !is1DArraySame(lastFrame.value as number[], value as number[])) {\n                        this._isAllValueEqual = false;\n                    }\n                    else if (lastFrame.value !== value) {\n                        this._isAllValueEqual = false;\n                    }\n                }\n            }\n        }\n\n        const kf = {\n            time,\n            value,\n            percent: 0\n        };\n        // Not check if value equal here.\n        this.keyframes.push(kf);\n        return kf;\n    }\n\n    prepare(additiveTrack?: Track) {\n        let kfs = this.keyframes;\n        if (this._needsSort) {\n            // Sort keyframe as ascending\n            kfs.sort(function (a: Keyframe, b: Keyframe) {\n                return a.time - b.time;\n            });\n        }\n\n        const arrDim = this.arrDim;\n        const kfsLen = kfs.length;\n        const lastKf = kfs[kfsLen - 1];\n\n        for (let i = 0; i < kfsLen; i++) {\n            kfs[i].percent = kfs[i].time / this.maxTime;\n\n            if (arrDim > 0 && i !== kfsLen - 1) {\n                // Align array with target frame.\n                fillArray(kfs[i].value as NumberArray, lastKf.value as NumberArray, arrDim);\n            }\n        }\n\n        // Only apply additive animaiton on INTERPOLABLE SAME TYPE values.\n        if (additiveTrack\n            // If two track both will be animated and have same value format.\n            && this.needsAnimate()\n            && additiveTrack.needsAnimate()\n            && arrDim === additiveTrack.arrDim\n            && this.isValueColor === additiveTrack.isValueColor\n            && !additiveTrack._finished\n        ) {\n            this._additiveTrack = additiveTrack;\n\n            const startValue = kfs[0].value;\n            // Calculate difference\n            for (let i = 0; i < kfsLen; i++) {\n                if (arrDim === 0) {\n                    if (this.isValueColor) {\n                        kfs[i].additiveValue =\n                            add1DArray([], kfs[i].value as NumberArray, startValue as NumberArray, -1);\n                    }\n                    else {\n                        kfs[i].additiveValue = kfs[i].value as number - (startValue as number);\n                    }\n                }\n                else if (arrDim === 1) {\n                    kfs[i].additiveValue = add1DArray(\n                        [],\n                        kfs[i].value as NumberArray,\n                        startValue as NumberArray,\n                        -1\n                    );\n                }\n                else if (arrDim === 2) {\n                    kfs[i].additiveValue = add2DArray(\n                        [],\n                        kfs[i].value as NumberArray[],\n                        startValue as NumberArray[],\n                        -1\n                    );\n                }\n            }\n        }\n    }\n\n    step(target: any, percent: number) {\n        if (this._finished) {   // Track may be set to finished.\n            return;\n        }\n\n        if (this._additiveTrack && this._additiveTrack._finished) {\n            // Remove additive track if it's finished.\n            this._additiveTrack = null;\n        }\n        const isAdditive = this._additiveTrack != null;\n        const valueKey = isAdditive ? 'additiveValue' : 'value';\n\n        const keyframes = this.keyframes;\n        const kfsNum = this.keyframes.length;\n        const propName = this.propName;\n        const arrDim = this.arrDim;\n        const isValueColor = this.isValueColor;\n        // Find the range keyframes\n        // kf1-----kf2---------current--------kf3\n        // find kf2 and kf3 and do interpolation\n        let frameIdx;\n        // In the easing function like elasticOut, percent may less than 0\n        if (percent < 0) {\n            frameIdx = 0;\n        }\n        else if (percent < this._lastFramePercent) {\n            // Start from next key\n            // PENDING start from lastFrame ?\n            const start = Math.min(this._lastFrame + 1, kfsNum - 1);\n            for (frameIdx = start; frameIdx >= 0; frameIdx--) {\n                if (keyframes[frameIdx].percent <= percent) {\n                    break;\n                }\n            }\n            // PENDING really need to do this ?\n            frameIdx = Math.min(frameIdx, kfsNum - 2);\n        }\n        else {\n            for (frameIdx = this._lastFrame; frameIdx < kfsNum; frameIdx++) {\n                if (keyframes[frameIdx].percent > percent) {\n                    break;\n                }\n            }\n            frameIdx = Math.min(frameIdx - 1, kfsNum - 2);\n        }\n        let nextFrame = keyframes[frameIdx + 1];\n        let frame = keyframes[frameIdx];\n\n        // Defensive coding.\n        if (!(frame && nextFrame)) {\n            return;\n        }\n\n        this._lastFrame = frameIdx;\n        this._lastFramePercent = percent;\n\n\n        const range = (nextFrame.percent - frame.percent);\n        if (range === 0) {\n            return;\n        }\n        const w = (percent - frame.percent) / range;\n\n        // If value is arr\n        let targetArr = isAdditive ? this._additiveValue\n            : (isValueColor ? tmpRgba : target[propName]);\n\n        if ((arrDim > 0 || isValueColor) && !targetArr) {\n            targetArr = this._additiveValue = [];\n        }\n        if (this.useSpline) {\n            const p1 = keyframes[frameIdx][valueKey];\n            const p0 = keyframes[frameIdx === 0 ? frameIdx : frameIdx - 1][valueKey];\n            const p2 = keyframes[frameIdx > kfsNum - 2 ? kfsNum - 1 : frameIdx + 1][valueKey];\n            const p3 = keyframes[frameIdx > kfsNum - 3 ? kfsNum - 1 : frameIdx + 2][valueKey];\n\n            if (arrDim > 0) {\n                arrDim === 1\n                    ? catmullRomInterpolate1DArray(\n                        targetArr as NumberArray,\n                        p0 as NumberArray,\n                        p1 as NumberArray,\n                        p2 as NumberArray,\n                        p3 as NumberArray,\n                        w, w * w, w * w * w\n                    )\n                    : catmullRomInterpolate2DArray(\n                        targetArr as NumberArray[],\n                        p0 as NumberArray[], p1 as NumberArray[], p2 as NumberArray[], p3 as NumberArray[],\n                        w, w * w, w * w * w\n                    );\n            }\n            else if (isValueColor) {\n                catmullRomInterpolate1DArray(\n                    targetArr,\n                    p0 as NumberArray, p1 as NumberArray, p2 as NumberArray, p3 as NumberArray,\n                    w, w * w, w * w * w\n                );\n                if (!isAdditive) {  // Convert to string later:)\n                    target[propName] = rgba2String(targetArr);\n                }\n            }\n            else {\n                let value;\n                if (!this.interpolable) {\n                    // String is step(0.5)\n                    // value = step(p1, p2, w);\n                    value = p2;\n                }\n                else {\n                    value = catmullRomInterpolate(\n                        p0 as number, p1 as number, p2 as number, p3 as number,\n                        w, w * w, w * w * w\n                    );\n                }\n                if (isAdditive) {\n                    this._additiveValue = value;\n                }\n                else {\n                    target[propName] = value;\n                }\n            }\n        }\n        else {\n            if (arrDim > 0) {\n                arrDim === 1\n                    ? interpolate1DArray(\n                        targetArr as NumberArray,\n                        frame[valueKey] as NumberArray,\n                        nextFrame[valueKey] as NumberArray,\n                        w\n                    )\n                    : interpolate2DArray(\n                        targetArr as NumberArray[],\n                        frame[valueKey] as NumberArray[],\n                        nextFrame[valueKey] as NumberArray[],\n                        w\n                    );\n            }\n            else if (isValueColor) {\n                interpolate1DArray(\n                    targetArr,\n                    frame[valueKey] as NumberArray,\n                    nextFrame[valueKey] as NumberArray,\n                    w\n                );\n                if (!isAdditive) {  // Convert to string later:)\n                    target[propName] = rgba2String(targetArr);\n                }\n            }\n            else {\n                let value;\n                if (!this.interpolable) {\n                    // String is step(0.5)\n                    value = step(frame[valueKey], nextFrame[valueKey], w);\n                }\n                else {\n                    value = interpolateNumber(frame[valueKey] as number, nextFrame[valueKey] as number, w);\n                }\n                if (isAdditive) {\n                    this._additiveValue = value;\n                }\n                else {\n                    target[propName] = value;\n                }\n            }\n        }\n\n        // Add additive to target\n        if (isAdditive) {\n            this._addToTarget(target);\n        }\n    }\n\n    private _addToTarget(target: any) {\n        const arrDim = this.arrDim;\n        const propName = this.propName;\n        const additiveValue = this._additiveValue;\n\n        if (arrDim === 0) {\n            if (this.isValueColor) {\n                // TODO reduce unnecessary parse\n                color.parse(target[propName], tmpRgba);\n                add1DArray(tmpRgba, tmpRgba, additiveValue as NumberArray, 1);\n                target[propName] = rgba2String(tmpRgba);\n            }\n            else {\n                // Add a difference value based on the change of previous frame.\n                target[propName] = target[propName] + additiveValue;\n            }\n        }\n        else if (arrDim === 1) {\n            add1DArray(target[propName], target[propName], additiveValue as NumberArray, 1);\n        }\n        else if (arrDim === 2) {\n            add2DArray(target[propName], target[propName], additiveValue as NumberArray[], 1);\n        }\n    }\n}\n\n\ntype DoneCallback = () => void;\ntype AbortCallback = () => void;\nexport type OnframeCallback<T> = (target: T, percent: number) => void;\n\nexport type AnimationPropGetter<T> = (target: T, key: string) => InterpolatableType;\nexport type AnimationPropSetter<T> = (target: T, key: string, value: InterpolatableType) => void;\n\nexport default class Animator<T> {\n\n    animation?: Animation\n\n    targetName?: string\n\n    scope?: string\n\n    __fromStateTransition?: string\n\n    private _tracks: Dictionary<Track> = {}\n    private _trackKeys: string[] = []\n\n    private _target: T\n\n    private _loop: boolean\n    private _delay = 0\n    private _maxTime = 0\n\n    // Some status\n    private _paused = false\n    // 0: Not started\n    // 1: Invoked started\n    // 2: Has been run for at least one frame.\n    private _started = 0\n\n    private _additiveAnimators: Animator<any>[]\n\n    private _doneCbs: DoneCallback[]\n    private _onframeCbs: OnframeCallback<T>[]\n\n    private _abortedCbs: AbortCallback[]\n\n    private _clip: Clip = null\n\n    constructor(target: T, loop: boolean, additiveTo?: Animator<any>[]) {\n        this._target = target;\n        this._loop = loop;\n        if (loop && additiveTo) {\n            logError('Can\\' use additive animation on looped animation.');\n            return;\n        }\n        this._additiveAnimators = additiveTo;\n    }\n\n    getTarget() {\n        return this._target;\n    }\n\n    /**\n     * Target can be changed during animation\n     * For example if style is changed during state change.\n     * We need to change target to the new style object.\n     */\n    changeTarget(target: T) {\n        this._target = target;\n    }\n\n    /**\n     * Set Animation keyframe\n     * @param time 关键帧时间，单位是ms\n     * @param props 关键帧的属性值，key-value表示\n     */\n    when(time: number, props: Dictionary<any>) {\n        return this.whenWithKeys(time, props, keys(props) as string[]);\n    }\n\n\n    // Fast path for add keyframes of aniamteTo\n    whenWithKeys(time: number, props: Dictionary<any>, propNames: string[]) {\n        const tracks = this._tracks;\n        for (let i = 0; i < propNames.length; i++) {\n            const propName = propNames[i];\n\n            let track = tracks[propName];\n            if (!track) {\n                track = tracks[propName] = new Track(propName);\n\n                let initialValue;\n                const additiveTrack = this._getAdditiveTrack(propName);\n                if (additiveTrack) {\n                    const lastFinalKf = additiveTrack.keyframes[additiveTrack.keyframes.length - 1];\n                    // Use the last state of additived animator.\n                    initialValue = lastFinalKf && lastFinalKf.value;\n                    if (additiveTrack.isValueColor && initialValue) {\n                        // Convert to rgba string\n                        initialValue = rgba2String(initialValue as number[]);\n                    }\n                }\n                else {\n                    initialValue = (this._target as any)[propName];\n                }\n                // Invalid value\n                if (initialValue == null) {\n                    // zrLog('Invalid property ' + propName);\n                    continue;\n                }\n                // If time is 0\n                //  Then props is given initialize value\n                // Else\n                //  Initialize value from current prop value\n                if (time !== 0) {\n                    track.addKeyframe(0, cloneValue(initialValue));\n                }\n\n                this._trackKeys.push(propName);\n            }\n            // PENDING\n            track.addKeyframe(time, cloneValue(props[propName]));\n        }\n        this._maxTime = Math.max(this._maxTime, time);\n        return this;\n    }\n\n    pause() {\n        this._clip.pause();\n        this._paused = true;\n    }\n\n    resume() {\n        this._clip.resume();\n        this._paused = false;\n    }\n\n    isPaused(): boolean {\n        return !!this._paused;\n    }\n\n    private _doneCallback() {\n        this._setTracksFinished();\n        // Clear clip\n        this._clip = null;\n\n        const doneList = this._doneCbs;\n        if (doneList) {\n            const len = doneList.length;\n            for (let i = 0; i < len; i++) {\n                doneList[i].call(this);\n            }\n        }\n    }\n    private _abortedCallback() {\n        this._setTracksFinished();\n\n        const animation = this.animation;\n        const abortedList = this._abortedCbs;\n\n        if (animation) {\n            animation.removeClip(this._clip);\n        }\n        this._clip = null;\n\n        if (abortedList) {\n            for (let i = 0; i < abortedList.length; i++) {\n                abortedList[i].call(this);\n            }\n        }\n    }\n    private _setTracksFinished() {\n        const tracks = this._tracks;\n        const tracksKeys = this._trackKeys;\n        for (let i = 0; i < tracksKeys.length; i++) {\n            tracks[tracksKeys[i]].setFinished();\n        }\n    }\n\n    private _getAdditiveTrack(trackName: string): Track {\n        let additiveTrack;\n        const additiveAnimators = this._additiveAnimators;\n        if (additiveAnimators) {\n            for (let i = 0; i < additiveAnimators.length; i++) {\n                const track = additiveAnimators[i].getTrack(trackName);\n                if (track) {\n                    // Use the track of latest animator.\n                    additiveTrack = track;\n                }\n            }\n        }\n        return additiveTrack;\n    }\n\n    /**\n     * Start the animation\n     * @param easing\n     * @param  forceAnimate\n     * @return\n     */\n    start(easing?: AnimationEasing, forceAnimate?: boolean) {\n        if (this._started > 0) {\n            return;\n        }\n        this._started = 1;\n\n        const self = this;\n\n        let tracks: Track[] = [];\n        for (let i = 0; i < this._trackKeys.length; i++) {\n            const propName = this._trackKeys[i];\n            const track = this._tracks[propName];\n            const additiveTrack = this._getAdditiveTrack(propName);\n            const kfs = track.keyframes;\n            track.prepare(additiveTrack);\n            if (track.needsAnimate()) {\n                tracks.push(track);\n            }\n            else if (!track.interpolable) {\n                const lastKf = kfs[kfs.length - 1];\n                // Set final value.\n                if (lastKf) {\n                    (self._target as any)[track.propName] = lastKf.value;\n                }\n            }\n        }\n        // Add during callback on the last clip\n        if (tracks.length || forceAnimate) {\n            const clip = new Clip({\n                life: this._maxTime,\n                loop: this._loop,\n                delay: this._delay,\n                onframe(percent: number) {\n                    self._started = 2;\n                    // Remove additived animator if it's finished.\n                    // For the purpose of memory effeciency.\n                    const additiveAnimators = self._additiveAnimators;\n                    if (additiveAnimators) {\n                        let stillHasAdditiveAnimator = false;\n                        for (let i = 0; i < additiveAnimators.length; i++) {\n                            if (additiveAnimators[i]._clip) {\n                                stillHasAdditiveAnimator = true;\n                                break;\n                            }\n                        }\n                        if (!stillHasAdditiveAnimator) {\n                            self._additiveAnimators = null;\n                        }\n                    }\n\n                    for (let i = 0; i < tracks.length; i++) {\n                        // NOTE: don't cache target outside.\n                        // Because target may be changed.\n                        tracks[i].step(self._target, percent);\n                    }\n                    const onframeList = self._onframeCbs;\n                    if (onframeList) {\n                        for (let i = 0; i < onframeList.length; i++) {\n                            onframeList[i](self._target, percent);\n                        }\n                    }\n                },\n                ondestroy() {\n                    self._doneCallback();\n                }\n            });\n            this._clip = clip;\n\n            if (this.animation) {\n                this.animation.addClip(clip);\n            }\n\n            if (easing && easing !== 'spline') {\n                clip.easing = easing;\n            }\n        }\n        else {\n            // This optimization will help the case that in the upper application\n            // the view may be refreshed frequently, where animation will be\n            // called repeatly but nothing changed.\n            this._doneCallback();\n        }\n\n        return this;\n    }\n    /**\n     * Stop animation\n     * @param {boolean} forwardToLast If move to last frame before stop\n     */\n    stop(forwardToLast?: boolean) {\n        if (!this._clip) {\n            return;\n        }\n        const clip = this._clip;\n        if (forwardToLast) {\n            // Move to last frame before stop\n            clip.onframe(1);\n        }\n\n        this._abortedCallback();\n    }\n    /**\n     * Set when animation delay starts\n     * @param time 单位ms\n     */\n    delay(time: number) {\n        this._delay = time;\n        return this;\n    }\n    /**\n     * 添加动画每一帧的回调函数\n     * @param callback\n     */\n    during(cb: OnframeCallback<T>) {\n        if (cb) {\n            if (!this._onframeCbs) {\n                this._onframeCbs = [];\n            }\n            this._onframeCbs.push(cb);\n        }\n        return this;\n    }\n    /**\n     * Add callback for animation end\n     * @param cb\n     */\n    done(cb: DoneCallback) {\n        if (cb) {\n            if (!this._doneCbs) {\n                this._doneCbs = [];\n            }\n            this._doneCbs.push(cb);\n        }\n        return this;\n    }\n\n    aborted(cb: AbortCallback) {\n        if (cb) {\n            if (!this._abortedCbs) {\n                this._abortedCbs = [];\n            }\n            this._abortedCbs.push(cb);\n        }\n        return this;\n    }\n\n    getClip() {\n        return this._clip;\n    }\n\n    getTrack(propName: string) {\n        return this._tracks[propName];\n    }\n\n    /**\n     * Return true if animator is not available anymore.\n     */\n    stopTracks(propNames: string[], forwardToLast?: boolean): boolean {\n        if (!propNames.length || !this._clip) {\n            return true;\n        }\n        const tracks = this._tracks;\n        const tracksKeys = this._trackKeys;\n\n        for (let i = 0; i < propNames.length; i++) {\n            const track = tracks[propNames[i]];\n            if (track) {\n                if (forwardToLast) {\n                    track.step(this._target, 1);\n                }\n                // If the track has not been run for at least wrong frame.\n                // The property may be stayed at the final state. when setToFinal is set true.\n                // For example:\n                // Animate x from 0 to 100, then animate to 150 immediately.\n                // We want the x is translated from 0 to 150, not 100 to 150.\n                else if (this._started === 1) {\n                    track.step(this._target, 0);\n                }\n                // Set track to finished\n                track.setFinished();\n            }\n        }\n        let allAborted = true;\n        for (let i = 0; i < tracksKeys.length; i++) {\n            if (!tracks[tracksKeys[i]].isFinished()) {\n                allAborted = false;\n                break;\n            }\n        }\n        // Remove clip if all tracks has been aborted.\n        if (allAborted) {\n            this._abortedCallback();\n        }\n\n        return allAborted;\n    }\n\n    /**\n     * Save values of final state to target.\n     * It is mainly used in state mangement. When state is switching during animation.\n     * We need to save final state of animation to the normal state. Not interpolated value.\n     */\n    saveFinalToTarget(target: T, trackKeys?: readonly string[]) {\n        if (!target) {  // DO nothing if target is not given.\n            return;\n        }\n\n        trackKeys = trackKeys || this._trackKeys;\n\n        for (let i = 0; i < trackKeys.length; i++) {\n            const propName = trackKeys[i];\n            const track = this._tracks[propName];\n            if (!track || track.isFinished()) {   // Ignore finished track.\n                continue;\n            }\n            const kfs = track.keyframes;\n            const lastKf = kfs[kfs.length - 1];\n            if (lastKf) {\n                // TODO CLONE?\n                let val: unknown = cloneValue(lastKf.value as any);\n                if (track.isValueColor) {\n                    val = rgba2String(val as number[]);\n                }\n\n                (target as any)[propName] = val;\n            }\n        }\n    }\n\n    // Change final value after animator has been started.\n    // NOTE: Be careful to use it.\n    __changeFinalValue(finalProps: Dictionary<any>, trackKeys?: readonly string[]) {\n        trackKeys = trackKeys || keys(finalProps);\n\n        for (let i = 0; i < trackKeys.length; i++) {\n            const propName = trackKeys[i];\n\n            const track = this._tracks[propName];\n            if (!track) {\n                continue;\n            }\n\n            const kfs = track.keyframes;\n            if (kfs.length > 1) {\n                // Remove the original last kf and add again.\n                const lastKf = kfs.pop();\n\n                track.addKeyframe(lastKf.time, finalProps[propName]);\n                // Prepare again.\n                track.prepare(track.getAdditiveTrack());\n            }\n        }\n    }\n\n}","/**\n * Animation main class, dispatch and manage all animation controllers\n *\n */\n// TODO Additive animation\n// http://iosoteric.com/additive-animations-animatewithduration-in-ios-8/\n// https://developer.apple.com/videos/wwdc2014/#236\n\nimport Eventful from '../core/Eventful';\nimport requestAnimationFrame from './requestAnimationFrame';\nimport Animator from './Animator';\nimport Clip from './Clip';\n\n\ninterface Stage {\n    update?: () => void\n}\ntype OnframeCallback = (deltaTime: number) => void\n\ninterface AnimationOption {\n    stage?: Stage\n    onframe?: OnframeCallback\n}\n/**\n * @example\n *     const animation = new Animation();\n *     const obj = {\n *         x: 100,\n *         y: 100\n *     };\n *     animation.animate(node.position)\n *         .when(1000, {\n *             x: 500,\n *             y: 500\n *         })\n *         .when(2000, {\n *             x: 100,\n *             y: 100\n *         })\n *         .start('spline');\n */\n\nexport default class Animation extends Eventful {\n\n    stage: Stage\n\n    onframe: OnframeCallback\n\n    // Use linked list to store clip\n    private _clipsHead: Clip\n    private _clipsTail: Clip\n\n    private _running: boolean = false\n\n    private _time: number = 0\n    private _pausedTime: number = 0\n    private _pauseStart: number = 0\n\n    private _paused = false;\n\n    constructor(opts?: AnimationOption) {\n        super();\n\n        opts = opts || {};\n\n        this.stage = opts.stage || {};\n\n        this.onframe = opts.onframe || function () {};\n    }\n\n    /**\n     * Add clip\n     */\n    addClip(clip: Clip) {\n        if (clip.animation) {\n            // Clip has been added\n            this.removeClip(clip);\n        }\n\n        if (!this._clipsHead) {\n            this._clipsHead = this._clipsTail = clip;\n        }\n        else {\n            this._clipsTail.next = clip;\n            clip.prev = this._clipsTail;\n            clip.next = null;\n            this._clipsTail = clip;\n        }\n        clip.animation = this;\n    }\n    /**\n     * Add animator\n     */\n    addAnimator(animator: Animator<any>) {\n        animator.animation = this;\n        const clip = animator.getClip();\n        if (clip) {\n            this.addClip(clip);\n        }\n    }\n    /**\n     * Delete animation clip\n     */\n    removeClip(clip: Clip) {\n        if (!clip.animation) {\n            return;\n        }\n        const prev = clip.prev;\n        const next = clip.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            // Is head\n            this._clipsHead = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            // Is tail\n            this._clipsTail = prev;\n        }\n        clip.next = clip.prev = clip.animation = null;\n    }\n\n    /**\n     * Delete animation clip\n     */\n    removeAnimator(animator: Animator<any>) {\n        const clip = animator.getClip();\n        if (clip) {\n            this.removeClip(clip);\n        }\n        animator.animation = null;\n    }\n\n    update(notTriggerFrameAndStageUpdate?: boolean) {\n        const time = new Date().getTime() - this._pausedTime;\n        const delta = time - this._time;\n        let clip = this._clipsHead;\n\n        while (clip) {\n            // Save the nextClip before step.\n            // So the loop will not been affected if the clip is removed in the callback\n            const nextClip = clip.next;\n            let finished = clip.step(time, delta);\n            if (finished) {\n                clip.ondestroy && clip.ondestroy();\n                this.removeClip(clip);\n                clip = nextClip;\n            }\n            else {\n                clip = nextClip;\n            }\n        }\n\n        this._time = time;\n\n        if (!notTriggerFrameAndStageUpdate) {\n            this.onframe(delta);\n\n            // 'frame' should be triggered before stage, because upper application\n            // depends on the sequence (e.g., echarts-stream and finish\n            // event judge)\n            this.trigger('frame', delta);\n\n            this.stage.update && this.stage.update();\n        }\n    }\n\n    _startLoop() {\n        const self = this;\n\n        this._running = true;\n\n        function step() {\n            if (self._running) {\n\n                requestAnimationFrame(step);\n\n                !self._paused && self.update();\n            }\n        }\n\n        requestAnimationFrame(step);\n    }\n\n    /**\n     * Start animation.\n     */\n    start() {\n        if (this._running) {\n            return;\n        }\n\n        this._time = new Date().getTime();\n        this._pausedTime = 0;\n\n        this._startLoop();\n    }\n\n    /**\n     * Stop animation.\n     */\n    stop() {\n        this._running = false;\n    }\n\n    /**\n     * Pause animation.\n     */\n    pause() {\n        if (!this._paused) {\n            this._pauseStart = new Date().getTime();\n            this._paused = true;\n        }\n    }\n\n    /**\n     * Resume animation.\n     */\n    resume() {\n        if (this._paused) {\n            this._pausedTime += (new Date().getTime()) - this._pauseStart;\n            this._paused = false;\n        }\n    }\n\n    /**\n     * Clear animation.\n     */\n    clear() {\n        let clip = this._clipsHead;\n\n        while (clip) {\n            let nextClip = clip.next;\n            clip.prev = clip.next = clip.animation = null;\n            clip = nextClip;\n        }\n\n        this._clipsHead = this._clipsTail = null;\n    }\n\n    /**\n     * Whether animation finished.\n     */\n    isFinished() {\n        return this._clipsHead == null;\n    }\n\n    /**\n     * Creat animator for a target, whose props can be animated.\n     */\n    // TODO Gap\n    animate<T>(target: T, options: {\n        loop?: boolean  // Whether loop animation.\n    }) {\n        options = options || {};\n\n        // Start animation loop\n        this.start();\n\n        const animator = new Animator(\n            target,\n            options.loop\n        );\n\n        this.addAnimator(animator);\n\n        return animator;\n    }\n}","\n/* global document */\n\nimport {\n    addEventListener,\n    removeEventListener,\n    normalizeEvent,\n    getNativeEvent\n} from '../core/event';\nimport * as zrUtil from '../core/util';\nimport Eventful from '../core/Eventful';\nimport env from '../core/env';\nimport { Dictionary, ZRRawEvent, ZRRawMouseEvent } from '../core/types';\nimport { VectorArray } from '../core/vector';\nimport Handler from '../Handler';\n\ntype DomHandlersMap = Dictionary<(this: HandlerDomProxy, event: ZRRawEvent) => void>\n\ntype DomExtended = Node & {\n    domBelongToZr: boolean\n}\n\nconst TOUCH_CLICK_DELAY = 300;\n\nconst globalEventSupported = env.domSupported;\n\n\nconst localNativeListenerNames = (function () {\n    const mouseHandlerNames = [\n        'click', 'dblclick', 'mousewheel', 'wheel', 'mouseout',\n        'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n    ];\n    const touchHandlerNames = [\n        'touchstart', 'touchend', 'touchmove'\n    ];\n    const pointerEventNameMap = {\n        pointerdown: 1, pointerup: 1, pointermove: 1, pointerout: 1\n    };\n    const pointerHandlerNames = zrUtil.map(mouseHandlerNames, function (name) {\n        const nm = name.replace('mouse', 'pointer');\n        return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;\n    });\n\n    return {\n        mouse: mouseHandlerNames,\n        touch: touchHandlerNames,\n        pointer: pointerHandlerNames\n    };\n})();\n\nconst globalNativeListenerNames = {\n    mouse: ['mousemove', 'mouseup'],\n    pointer: ['pointermove', 'pointerup']\n};\n\nlet wheelEventSupported = false;\n\n\n// Although firfox has 'DOMMouseScroll' event and do not has 'mousewheel' event,\n// the 'DOMMouseScroll' event do not performe the same behavior on touch pad device\n// (like on Mac) ('DOMMouseScroll' will be triggered only if a big wheel delta).\n// So we should not use it.\n// function eventNameFix(name: string) {\n//     return (name === 'mousewheel' && env.browser.firefox) ? 'DOMMouseScroll' : name;\n// }\n\nfunction isPointerFromTouch(event: ZRRawEvent) {\n    const pointerType = (event as any).pointerType;\n    return pointerType === 'pen' || pointerType === 'touch';\n}\n\n// function useMSGuesture(handlerProxy, event) {\n//     return isPointerFromTouch(event) && !!handlerProxy._msGesture;\n// }\n\n// function onMSGestureChange(proxy, event) {\n//     if (event.translationX || event.translationY) {\n//         // mousemove is carried by MSGesture to reduce the sensitivity.\n//         proxy.handler.dispatchToElement(event.target, 'mousemove', event);\n//     }\n//     if (event.scale !== 1) {\n//         event.pinchX = event.offsetX;\n//         event.pinchY = event.offsetY;\n//         event.pinchScale = event.scale;\n//         proxy.handler.dispatchToElement(event.target, 'pinch', event);\n//     }\n// }\n\n/**\n * Prevent mouse event from being dispatched after Touch Events action\n * @see <https://github.com/deltakosh/handjs/blob/master/src/hand.base.js>\n * 1. Mobile browsers dispatch mouse events 300ms after touchend.\n * 2. Chrome for Android dispatch mousedown for long-touch about 650ms\n * Result: Blocking Mouse Events for 700ms.\n *\n * @param {DOMHandlerScope} scope\n */\nfunction setTouchTimer(scope: DOMHandlerScope) {\n    scope.touching = true;\n    if (scope.touchTimer != null) {\n        clearTimeout(scope.touchTimer);\n        scope.touchTimer = null;\n    }\n    scope.touchTimer = setTimeout(function () {\n        scope.touching = false;\n        scope.touchTimer = null;\n    }, 700);\n}\n\n// Mark touch, which is useful in distinguish touch and\n// mouse event in upper applicatoin.\nfunction markTouch(event: ZRRawEvent) {\n    event && (event.zrByTouch = true);\n}\n\n\n// function markTriggeredFromLocal(event) {\n//     event && (event.__zrIsFromLocal = true);\n// }\n\n// function isTriggeredFromLocal(instance, event) {\n//     return !!(event && event.__zrIsFromLocal);\n// }\n\nfunction normalizeGlobalEvent(instance: HandlerDomProxy, event: ZRRawEvent) {\n    // offsetX, offsetY still need to be calculated. They are necessary in the event\n    // handlers of the upper applications. Set `true` to force calculate them.\n    return normalizeEvent(\n        instance.dom,\n        // TODO ANY TYPE\n        new FakeGlobalEvent(instance, event) as any as ZRRawEvent,\n        true\n    );\n}\n\n/**\n * Detect whether the given el is in `painterRoot`.\n */\nfunction isLocalEl(instance: HandlerDomProxy, el: Node) {\n    let elTmp = el;\n    let isLocal = false;\n    while (elTmp && elTmp.nodeType !== 9\n        && !(\n            isLocal = (elTmp as DomExtended).domBelongToZr\n                || (elTmp !== el && elTmp === instance.painterRoot)\n        )\n    ) {\n        elTmp = elTmp.parentNode;\n    }\n    return isLocal;\n}\n\n/**\n * Make a fake event but not change the original event,\n * becuase the global event probably be used by other\n * listeners not belonging to zrender.\n * @class\n */\nclass FakeGlobalEvent {\n    type: string\n    target: HTMLElement\n    currentTarget: HTMLElement\n\n    pointerType: string\n    clientX: number\n    clientY: number\n\n    constructor(instance: HandlerDomProxy, event: ZRRawEvent) {\n        this.type = event.type;\n        this.target = this.currentTarget = instance.dom;\n        this.pointerType = (event as any).pointerType;\n        // Necessray for the force calculation of zrX, zrY\n        this.clientX = (event as ZRRawMouseEvent).clientX;\n        this.clientY = (event as ZRRawMouseEvent).clientY;\n        // Because we do not mount global listeners to touch events,\n        // we do not copy `targetTouches` and `changedTouches` here.\n    }\n\n    // we make the default methods on the event do nothing,\n    // otherwise it is dangerous. See more details in\n    // [DRAG_OUTSIDE] in `Handler.js`.\n    stopPropagation = zrUtil.noop\n    stopImmediatePropagation = zrUtil.noop\n    preventDefault = zrUtil.noop\n}\n\n\n/**\n * Local DOM Handlers\n * @this {HandlerProxy}\n */\nconst localDOMHandlers: DomHandlersMap = {\n\n    mousedown(event: ZRRawEvent) {\n        event = normalizeEvent(this.dom, event);\n\n        this.__mayPointerCapture = [event.zrX, event.zrY];\n\n        this.trigger('mousedown', event);\n    },\n\n    mousemove(event: ZRRawEvent) {\n        event = normalizeEvent(this.dom, event);\n\n        const downPoint = this.__mayPointerCapture;\n        if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {\n            this.__togglePointerCapture(true);\n        }\n\n        this.trigger('mousemove', event);\n    },\n\n    mouseup(event: ZRRawEvent) {\n        event = normalizeEvent(this.dom, event);\n\n        this.__togglePointerCapture(false);\n\n        this.trigger('mouseup', event);\n    },\n\n    mouseout(event: ZRRawEvent) {\n        event = normalizeEvent(this.dom, event);\n\n        // There might be some doms created by upper layer application\n        // at the same level of painter.getViewportRoot() (e.g., tooltip\n        // dom created by echarts), where 'globalout' event should not\n        // be triggered when mouse enters these doms. (But 'mouseout'\n        // should be triggered at the original hovered element as usual).\n        const element = (event as any).toElement || (event as ZRRawMouseEvent).relatedTarget;\n\n        // For SVG rendering, there are SVG elements inside `this.dom`.\n        // (especially in decal case). Should not to handle those \"mouseout\"..\n        if (!isLocalEl(this, element)) {\n            // Similarly to the browser did on `document` and touch event,\n            // `globalout` will be delayed to final pointer cature release.\n            if (this.__pointerCapturing) {\n                event.zrEventControl = 'no_globalout';\n            }\n\n            this.trigger('mouseout', event);\n        }\n    },\n\n    wheel(event: ZRRawEvent) {\n        // Morden agent has supported event `wheel` instead of `mousewheel`.\n        // About the polyfill of the props \"delta\", see \"arc/core/event.ts\".\n\n        // Firefox only support `wheel` rather than `mousewheel`. Although firfox has been supporting\n        // event `DOMMouseScroll`, it do not act the same behavior as `wheel` on touch pad device\n        // like on Mac, where `DOMMouseScroll` will be triggered only if a big wheel delta occurs,\n        // and it results in no chance to \"preventDefault\". So we should not use `DOMMouseScroll`.\n\n        wheelEventSupported = true;\n        event = normalizeEvent(this.dom, event);\n        // Follow the definition of the previous version, the zrender event name is still 'mousewheel'.\n        this.trigger('mousewheel', event);\n    },\n\n    mousewheel(event: ZRRawEvent) {\n        // IE8- and some other lagacy agent do not support event `wheel`, so we still listen\n        // to the legacy event `mouseevent`.\n        // Typically if event `wheel` is suppored and the handler has been mounted on a\n        // DOM element, the lagecy `mousewheel` event will not be triggered (Chrome and Safari).\n        // But we still do this guard to avoid to duplicated handle.\n        if (wheelEventSupported) {\n            return;\n        }\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n\n    touchstart(event: ZRRawEvent) {\n        // Default mouse behaviour should not be disabled here.\n        // For example, page may needs to be slided.\n        event = normalizeEvent(this.dom, event);\n\n        markTouch(event);\n\n        this.__lastTouchMoment = new Date();\n\n        this.handler.processGesture(event, 'start');\n\n        // For consistent event listener for both touch device and mouse device,\n        // we simulate \"mouseover-->mousedown\" in touch device. So we trigger\n        // `mousemove` here (to trigger `mouseover` inside), and then trigger\n        // `mousedown`.\n        localDOMHandlers.mousemove.call(this, event);\n        localDOMHandlers.mousedown.call(this, event);\n    },\n\n    touchmove(event: ZRRawEvent) {\n        event = normalizeEvent(this.dom, event);\n\n        markTouch(event);\n\n        this.handler.processGesture(event, 'change');\n\n        // Mouse move should always be triggered no matter whether\n        // there is gestrue event, because mouse move and pinch may\n        // be used at the same time.\n        localDOMHandlers.mousemove.call(this, event);\n    },\n\n    touchend(event: ZRRawEvent) {\n        event = normalizeEvent(this.dom, event);\n\n        markTouch(event);\n\n        this.handler.processGesture(event, 'end');\n\n        localDOMHandlers.mouseup.call(this, event);\n\n        // Do not trigger `mouseout` here, in spite of `mousemove`(`mouseover`) is\n        // triggered in `touchstart`. This seems to be illogical, but by this mechanism,\n        // we can conveniently implement \"hover style\" in both PC and touch device just\n        // by listening to `mouseover` to add \"hover style\" and listening to `mouseout`\n        // to remove \"hover style\" on an element, without any additional code for\n        // compatibility. (`mouseout` will not be triggered in `touchend`, so \"hover\n        // style\" will remain for user view)\n\n        // click event should always be triggered no matter whether\n        // there is gestrue event. System click can not be prevented.\n        if (+new Date() - (+this.__lastTouchMoment) < TOUCH_CLICK_DELAY) {\n            localDOMHandlers.click.call(this, event);\n        }\n    },\n\n    pointerdown(event: ZRRawEvent) {\n        localDOMHandlers.mousedown.call(this, event);\n\n        // if (useMSGuesture(this, event)) {\n        //     this._msGesture.addPointer(event.pointerId);\n        // }\n    },\n\n    pointermove(event: ZRRawEvent) {\n        // FIXME\n        // pointermove is so sensitive that it always triggered when\n        // tap(click) on touch screen, which affect some judgement in\n        // upper application. So, we dont support mousemove on MS touch\n        // device yet.\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mousemove.call(this, event);\n        }\n    },\n\n    pointerup(event: ZRRawEvent) {\n        localDOMHandlers.mouseup.call(this, event);\n    },\n\n    pointerout(event: ZRRawEvent) {\n        // pointerout will be triggered when tap on touch screen\n        // (IE11+/Edge on MS Surface) after click event triggered,\n        // which is inconsistent with the mousout behavior we defined\n        // in touchend. So we unify them.\n        // (check localDOMHandlers.touchend for detailed explanation)\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mouseout.call(this, event);\n        }\n    }\n\n};\n\n/**\n * Othere DOM UI Event handlers for zr dom.\n * @this {HandlerProxy}\n */\nzrUtil.each(['click', 'dblclick', 'contextmenu'], function (name) {\n    localDOMHandlers[name] = function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.trigger(name, event);\n    };\n});\n\n\n/**\n * DOM UI Event handlers for global page.\n *\n * [Caution]:\n * those handlers should both support in capture phase and bubble phase!\n */\nconst globalDOMHandlers: DomHandlersMap = {\n\n    pointermove: function (event: ZRRawEvent) {\n        // FIXME\n        // pointermove is so sensitive that it always triggered when\n        // tap(click) on touch screen, which affect some judgement in\n        // upper application. So, we dont support mousemove on MS touch\n        // device yet.\n        if (!isPointerFromTouch(event)) {\n            globalDOMHandlers.mousemove.call(this, event);\n        }\n    },\n\n    pointerup: function (event: ZRRawEvent) {\n        globalDOMHandlers.mouseup.call(this, event);\n    },\n\n    mousemove: function (event: ZRRawEvent) {\n        this.trigger('mousemove', event);\n    },\n\n    mouseup: function (event: ZRRawEvent) {\n        const pointerCaptureReleasing = this.__pointerCapturing;\n\n        this.__togglePointerCapture(false);\n\n        this.trigger('mouseup', event);\n\n        if (pointerCaptureReleasing) {\n            event.zrEventControl = 'only_globalout';\n            this.trigger('mouseout', event);\n        }\n    }\n\n};\n\n\nfunction mountLocalDOMEventListeners(instance: HandlerDomProxy, scope: DOMHandlerScope) {\n    const domHandlers = scope.domHandlers;\n\n    if (env.pointerEventsSupported) { // Only IE11+/Edge\n        // 1. On devices that both enable touch and mouse (e.g., MS Surface and lenovo X240),\n        // IE11+/Edge do not trigger touch event, but trigger pointer event and mouse event\n        // at the same time.\n        // 2. On MS Surface, it probablely only trigger mousedown but no mouseup when tap on\n        // screen, which do not occurs in pointer event.\n        // So we use pointer event to both detect touch gesture and mouse behavior.\n        zrUtil.each(localNativeListenerNames.pointer, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                // markTriggeredFromLocal(event);\n                domHandlers[nativeEventName].call(instance, event);\n            });\n        });\n\n        // FIXME\n        // Note: MS Gesture require CSS touch-action set. But touch-action is not reliable,\n        // which does not prevent defuault behavior occasionally (which may cause view port\n        // zoomed in but use can not zoom it back). And event.preventDefault() does not work.\n        // So we have to not to use MSGesture and not to support touchmove and pinch on MS\n        // touch screen. And we only support click behavior on MS touch screen now.\n\n        // MS Gesture Event is only supported on IE11+/Edge and on Windows 8+.\n        // We dont support touch on IE on win7.\n        // See <https://msdn.microsoft.com/en-us/library/dn433243(v=vs.85).aspx>\n        // if (typeof MSGesture === 'function') {\n        //     (this._msGesture = new MSGesture()).target = dom; // jshint ignore:line\n        //     dom.addEventListener('MSGestureChange', onMSGestureChange);\n        // }\n    }\n    else {\n        if (env.touchEventsSupported) {\n            zrUtil.each(localNativeListenerNames.touch, function (nativeEventName) {\n                mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                    // markTriggeredFromLocal(event);\n                    domHandlers[nativeEventName].call(instance, event);\n                    setTouchTimer(scope);\n                });\n            });\n            // Handler of 'mouseout' event is needed in touch mode, which will be mounted below.\n            // addEventListener(root, 'mouseout', this._mouseoutHandler);\n        }\n\n        // 1. Considering some devices that both enable touch and mouse event (like on MS Surface\n        // and lenovo X240, @see #2350), we make mouse event be always listened, otherwise\n        // mouse event can not be handle in those devices.\n        // 2. On MS Surface, Chrome will trigger both touch event and mouse event. How to prevent\n        // mouseevent after touch event triggered, see `setTouchTimer`.\n        zrUtil.each(localNativeListenerNames.mouse, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event: ZRRawEvent) {\n                event = getNativeEvent(event);\n                if (!scope.touching) {\n                    // markTriggeredFromLocal(event);\n                    domHandlers[nativeEventName].call(instance, event);\n                }\n            });\n        });\n    }\n}\n\nfunction mountGlobalDOMEventListeners(instance: HandlerDomProxy, scope: DOMHandlerScope) {\n    // Only IE11+/Edge. See the comment in `mountLocalDOMEventListeners`.\n    if (env.pointerEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.pointer, mount);\n    }\n    // Touch event has implemented \"drag outside\" so we do not mount global listener for touch event.\n    // (see https://www.w3.org/TR/touch-events/#the-touchmove-event) (see also `DRAG_OUTSIDE`).\n    // We do not consider \"both-support-touch-and-mouse device\" for this feature (see the comment of\n    // `mountLocalDOMEventListeners`) to avoid bugs util some requirements come.\n    else if (!env.touchEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.mouse, mount);\n    }\n\n    function mount(nativeEventName: string) {\n        function nativeEventListener(event: ZRRawEvent) {\n            event = getNativeEvent(event);\n            // See the reason in [DRAG_OUTSIDE] in `Handler.js`\n            // This checking supports both `useCapture` or not.\n            // PENDING: if there is performance issue in some devices,\n            // we probably can not use `useCapture` and change a easier\n            // to judes whether local (mark).\n            if (!isLocalEl(instance, event.target as Node)) {\n                event = normalizeGlobalEvent(instance, event);\n                scope.domHandlers[nativeEventName].call(instance, event);\n            }\n        }\n        mountSingleDOMEventListener(\n            scope, nativeEventName, nativeEventListener,\n            {capture: true} // See [DRAG_OUTSIDE] in `Handler.js`\n        );\n    }\n}\n\nfunction mountSingleDOMEventListener(\n    scope: DOMHandlerScope,\n    nativeEventName: string,\n    listener: EventListener,\n    opt?: boolean | AddEventListenerOptions\n) {\n    scope.mounted[nativeEventName] = listener;\n    scope.listenerOpts[nativeEventName] = opt;\n    addEventListener(scope.domTarget, nativeEventName, listener, opt);\n}\n\nfunction unmountDOMEventListeners(scope: DOMHandlerScope) {\n    const mounted = scope.mounted;\n    for (let nativeEventName in mounted) {\n        if (mounted.hasOwnProperty(nativeEventName)) {\n            removeEventListener(\n                scope.domTarget, nativeEventName, mounted[nativeEventName],\n                scope.listenerOpts[nativeEventName]\n            );\n        }\n    }\n    scope.mounted = {};\n}\n\n\nclass DOMHandlerScope {\n    domTarget: HTMLElement | HTMLDocument\n    domHandlers: DomHandlersMap\n\n    // Key: eventName, value: mounted handler funcitons.\n    // Used for unmount.\n    mounted: Dictionary<EventListener> = {};\n\n    listenerOpts: Dictionary<boolean | AddEventListenerOptions> = {};\n\n    touchTimer: ReturnType<typeof setTimeout>;\n    touching = false;\n\n    constructor(\n        domTarget: HTMLElement | HTMLDocument,\n        domHandlers: DomHandlersMap\n    ) {\n        this.domTarget = domTarget;\n        this.domHandlers = domHandlers;\n\n    }\n}\n\n\nexport default class HandlerDomProxy extends Eventful {\n\n    dom: HTMLElement\n    painterRoot: HTMLElement\n\n    handler: Handler\n\n    private _localHandlerScope: DOMHandlerScope\n    private _globalHandlerScope: DOMHandlerScope\n\n    __lastTouchMoment: Date\n\n    // See [DRAG_OUTSIDE] in `Handler.ts`.\n    __pointerCapturing = false\n    // [x, y]\n    __mayPointerCapture: VectorArray\n\n\n    constructor(dom: HTMLElement, painterRoot: HTMLElement) {\n        super();\n\n        this.dom = dom;\n        this.painterRoot = painterRoot;\n\n        this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);\n\n        if (globalEventSupported) {\n            this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);\n        }\n\n        mountLocalDOMEventListeners(this, this._localHandlerScope);\n    }\n\n    dispose() {\n        unmountDOMEventListeners(this._localHandlerScope);\n        if (globalEventSupported) {\n            unmountDOMEventListeners(this._globalHandlerScope);\n        }\n    }\n\n    setCursor(cursorStyle: string) {\n        this.dom.style && (this.dom.style.cursor = cursorStyle || 'default');\n    }\n\n    /**\n     * See [DRAG_OUTSIDE] in `Handler.js`.\n     * @implement\n     * @param isPointerCapturing Should never be `null`/`undefined`.\n     *        `true`: start to capture pointer if it is not capturing.\n     *        `false`: end the capture if it is capturing.\n     */\n    __togglePointerCapture(isPointerCapturing?: boolean) {\n        this.__mayPointerCapture = null;\n\n        if (globalEventSupported\n            && ((+this.__pointerCapturing) ^ (+isPointerCapturing))\n        ) {\n            this.__pointerCapturing = isPointerCapturing;\n\n            const globalHandlerScope = this._globalHandlerScope;\n            isPointerCapturing\n                ? mountGlobalDOMEventListeners(this, globalHandlerScope)\n                : unmountDOMEventListeners(globalHandlerScope);\n        }\n    }\n}\n\nexport interface HandlerProxyInterface extends Eventful {\n    handler: Handler\n    dispose: () => void\n    setCursor: (cursorStyle?: string) => void\n}","let dpr = 1;\n\n// If in browser environment\nif (typeof window !== 'undefined') {\n    dpr = Math.max(\n        window.devicePixelRatio\n        || (window.screen && (window.screen as any).deviceXDPI / (window.screen as any).logicalXDPI)\n        || 1, 1\n    );\n}\n\n/**\n * Debug log mode:\n * 0: Do nothing, for release.\n * 1: console.error, for debug.\n */\nexport const debugMode = 0;\n\n// retina 屏幕优化\nexport const devicePixelRatio = dpr;\n\n\n/**\n * Determine when to turn on dark mode based on the luminance of backgroundColor\n */\nexport const DARK_MODE_THRESHOLD = 0.4;\n\n/**\n * Color of default dark label.\n */\nexport const DARK_LABEL_COLOR = '#333';\n\n/**\n * Color of default light label.\n */\nexport const LIGHT_LABEL_COLOR = '#ccc';\n\n/**\n * Color of default light label.\n */\nexport const LIGHTER_LABEL_COLOR = '#eee';\n","/**\n * 3x2矩阵操作类\n * @exports zrender/tool/matrix\n */\n\n/* global Float32Array */\n\nimport {VectorArray} from './vector';\n\nexport type MatrixArray = number[]\n/**\n * Create a identity matrix.\n */\nexport function create(): MatrixArray {\n    return [1, 0, 0, 1, 0, 0];\n}\n\n/**\n * 设置矩阵为单位矩阵\n */\nexport function identity(out: MatrixArray): MatrixArray {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n}\n\n/**\n * 复制矩阵\n */\nexport function copy(out: MatrixArray, m: MatrixArray): MatrixArray {\n    out[0] = m[0];\n    out[1] = m[1];\n    out[2] = m[2];\n    out[3] = m[3];\n    out[4] = m[4];\n    out[5] = m[5];\n    return out;\n}\n\n/**\n * 矩阵相乘\n */\nexport function mul(out: MatrixArray, m1: MatrixArray, m2: MatrixArray): MatrixArray {\n    // Consider matrix.mul(m, m2, m);\n    // where out is the same as m2.\n    // So use temp constiable to escape error.\n    const out0 = m1[0] * m2[0] + m1[2] * m2[1];\n    const out1 = m1[1] * m2[0] + m1[3] * m2[1];\n    const out2 = m1[0] * m2[2] + m1[2] * m2[3];\n    const out3 = m1[1] * m2[2] + m1[3] * m2[3];\n    const out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n    const out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n    out[0] = out0;\n    out[1] = out1;\n    out[2] = out2;\n    out[3] = out3;\n    out[4] = out4;\n    out[5] = out5;\n    return out;\n}\n\n/**\n * 平移变换\n */\nexport function translate(out: MatrixArray, a: MatrixArray, v: VectorArray): MatrixArray {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4] + v[0];\n    out[5] = a[5] + v[1];\n    return out;\n}\n\n/**\n * 旋转变换\n */\nexport function rotate(out: MatrixArray, a: MatrixArray, rad: number): MatrixArray {\n    const aa = a[0];\n    const ac = a[2];\n    const atx = a[4];\n    const ab = a[1];\n    const ad = a[3];\n    const aty = a[5];\n    const st = Math.sin(rad);\n    const ct = Math.cos(rad);\n\n    out[0] = aa * ct + ab * st;\n    out[1] = -aa * st + ab * ct;\n    out[2] = ac * ct + ad * st;\n    out[3] = -ac * st + ct * ad;\n    out[4] = ct * atx + st * aty;\n    out[5] = ct * aty - st * atx;\n    return out;\n}\n\n/**\n * 缩放变换\n */\nexport function scale(out: MatrixArray, a: MatrixArray, v: VectorArray): MatrixArray {\n    const vx = v[0];\n    const vy = v[1];\n    out[0] = a[0] * vx;\n    out[1] = a[1] * vy;\n    out[2] = a[2] * vx;\n    out[3] = a[3] * vy;\n    out[4] = a[4] * vx;\n    out[5] = a[5] * vy;\n    return out;\n}\n\n/**\n * 求逆矩阵\n */\nexport function invert(out: MatrixArray, a: MatrixArray): MatrixArray | null {\n\n    const aa = a[0];\n    const ac = a[2];\n    const atx = a[4];\n    const ab = a[1];\n    const ad = a[3];\n    const aty = a[5];\n\n    let det = aa * ad - ab * ac;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = ad * det;\n    out[1] = -ab * det;\n    out[2] = -ac * det;\n    out[3] = aa * det;\n    out[4] = (ac * aty - ad * atx) * det;\n    out[5] = (ab * atx - aa * aty) * det;\n    return out;\n}\n\n/**\n * Clone a new matrix.\n */\nexport function clone(a: MatrixArray): MatrixArray {\n    const b = create();\n    copy(b, a);\n    return b;\n}\n","import * as matrix from './matrix';\nimport * as vector from './vector';\n\nconst mIdentity = matrix.identity;\n\nconst EPSILON = 5e-5;\n\nfunction isNotAroundZero(val: number) {\n    return val > EPSILON || val < -EPSILON;\n}\n\nconst scaleTmp: vector.VectorArray = [];\nconst tmpTransform: matrix.MatrixArray = [];\nconst originTransform = matrix.create();\nconst abs = Math.abs;\n\nclass Transformable {\n\n    parent: Transformable\n\n    x: number\n    y: number\n\n    scaleX: number\n    scaleY: number\n\n    skewX: number\n    skewY: number\n\n    rotation: number\n    /**\n     * Origin of scale, rotation, skew\n     */\n    originX: number\n    originY: number\n\n    /**\n     * Scale ratio\n     */\n    globalScaleRatio: number\n\n    transform: matrix.MatrixArray\n    invTransform: matrix.MatrixArray\n\n    /**\n     * Get computed local transform\n     */\n    getLocalTransform(m?: matrix.MatrixArray) {\n        return Transformable.getLocalTransform(this, m);\n    }\n\n    /**\n     * Set position from array\n     */\n    setPosition(arr: number[]) {\n        this.x = arr[0];\n        this.y = arr[1];\n    }\n    /**\n     * Set scale from array\n     */\n    setScale(arr: number[]) {\n        this.scaleX = arr[0];\n        this.scaleY = arr[1];\n    }\n\n    /**\n     * Set skew from array\n     */\n    setSkew(arr: number[]) {\n        this.skewX = arr[0];\n        this.skewY = arr[1];\n    }\n\n    /**\n     * Set origin from array\n     */\n    setOrigin(arr: number[]) {\n        this.originX = arr[0];\n        this.originY = arr[1];\n    }\n\n    /**\n     * If needs to compute transform\n     */\n    needLocalTransform(): boolean {\n        return isNotAroundZero(this.rotation)\n            || isNotAroundZero(this.x)\n            || isNotAroundZero(this.y)\n            || isNotAroundZero(this.scaleX - 1)\n            || isNotAroundZero(this.scaleY - 1);\n    }\n\n    /**\n     * Update global transform\n     */\n    updateTransform() {\n        const parentTransform = this.parent && this.parent.transform;\n        const needLocalTransform = this.needLocalTransform();\n\n        let m = this.transform;\n        if (!(needLocalTransform || parentTransform)) {\n            m && mIdentity(m);\n            return;\n        }\n\n        m = m || matrix.create();\n\n        if (needLocalTransform) {\n            this.getLocalTransform(m);\n        }\n        else {\n            mIdentity(m);\n        }\n\n        // 应用父节点变换\n        if (parentTransform) {\n            if (needLocalTransform) {\n                matrix.mul(m, parentTransform, m);\n            }\n            else {\n                matrix.copy(m, parentTransform);\n            }\n        }\n        // 保存这个变换矩阵\n        this.transform = m;\n\n        this._resolveGlobalScaleRatio(m);\n    }\n\n    private _resolveGlobalScaleRatio(m: matrix.MatrixArray) {\n        const globalScaleRatio = this.globalScaleRatio;\n        if (globalScaleRatio != null && globalScaleRatio !== 1) {\n            this.getGlobalScale(scaleTmp);\n            const relX = scaleTmp[0] < 0 ? -1 : 1;\n            const relY = scaleTmp[1] < 0 ? -1 : 1;\n            const sx = ((scaleTmp[0] - relX) * globalScaleRatio + relX) / scaleTmp[0] || 0;\n            const sy = ((scaleTmp[1] - relY) * globalScaleRatio + relY) / scaleTmp[1] || 0;\n\n            m[0] *= sx;\n            m[1] *= sx;\n            m[2] *= sy;\n            m[3] *= sy;\n        }\n\n        this.invTransform = this.invTransform || matrix.create();\n        matrix.invert(this.invTransform, m);\n    }\n\n    /**\n     * Get computed global transform\n     * NOTE: this method will force update transform on all ancestors.\n     * Please be aware of the potential performance cost.\n     */\n    getComputedTransform() {\n        let transformNode: Transformable = this;\n        const ancestors: Transformable[] = [];\n        while (transformNode) {\n            ancestors.push(transformNode);\n            transformNode = transformNode.parent;\n        }\n\n        // Update from topdown.\n        while (transformNode = ancestors.pop()) {\n            transformNode.updateTransform();\n        }\n\n        return this.transform;\n    }\n\n    setLocalTransform(m: vector.VectorArray) {\n        if (!m) {\n            // TODO return or set identity?\n            return;\n        }\n        let sx = m[0] * m[0] + m[1] * m[1];\n        let sy = m[2] * m[2] + m[3] * m[3];\n\n        const rotation = Math.atan2(m[1], m[0]);\n\n        const shearX = Math.PI / 2 + rotation - Math.atan2(m[3], m[2]);\n        sy = Math.sqrt(sy) * Math.cos(shearX);\n        sx = Math.sqrt(sx);\n\n        this.skewX = shearX;\n        this.skewY = 0;\n        this.rotation = -rotation;\n\n        this.x = +m[4];\n        this.y = +m[5];\n        this.scaleX = sx;\n        this.scaleY = sy;\n\n        this.originX = 0;\n        this.originY = 0;\n    }\n    /**\n     * 分解`transform`矩阵到`position`, `rotation`, `scale`\n     */\n    decomposeTransform() {\n        if (!this.transform) {\n            return;\n        }\n        const parent = this.parent;\n        let m = this.transform;\n        if (parent && parent.transform) {\n            // Get local transform and decompose them to position, scale, rotation\n            matrix.mul(tmpTransform, parent.invTransform, m);\n            m = tmpTransform;\n        }\n        const ox = this.originX;\n        const oy = this.originY;\n        if (ox || oy) {\n            originTransform[4] = ox;\n            originTransform[5] = oy;\n            matrix.mul(tmpTransform, m, originTransform);\n            tmpTransform[4] -= ox;\n            tmpTransform[5] -= oy;\n            m = tmpTransform;\n        }\n\n        this.setLocalTransform(m);\n    }\n\n    /**\n     * Get global scale\n     */\n    getGlobalScale(out?: vector.VectorArray): vector.VectorArray {\n        const m = this.transform;\n        out = out || [];\n        if (!m) {\n            out[0] = 1;\n            out[1] = 1;\n            return out;\n        }\n        out[0] = Math.sqrt(m[0] * m[0] + m[1] * m[1]);\n        out[1] = Math.sqrt(m[2] * m[2] + m[3] * m[3]);\n        if (m[0] < 0) {\n            out[0] = -out[0];\n        }\n        if (m[3] < 0) {\n            out[1] = -out[1];\n        }\n        return out;\n    }\n    /**\n     * 变换坐标位置到 shape 的局部坐标空间\n     */\n    transformCoordToLocal(x: number, y: number): number[] {\n        const v2 = [x, y];\n        const invTransform = this.invTransform;\n        if (invTransform) {\n            vector.applyTransform(v2, v2, invTransform);\n        }\n        return v2;\n    }\n\n    /**\n     * 变换局部坐标位置到全局坐标空间\n     */\n    transformCoordToGlobal(x: number, y: number): number[] {\n        const v2 = [x, y];\n        const transform = this.transform;\n        if (transform) {\n            vector.applyTransform(v2, v2, transform);\n        }\n        return v2;\n    }\n\n\n    getLineScale() {\n        const m = this.transform;\n        // Get the line scale.\n        // Determinant of `m` means how much the area is enlarged by the\n        // transformation. So its square root can be used as a scale factor\n        // for width.\n        return m && abs(m[0] - 1) > 1e-10 && abs(m[3] - 1) > 1e-10\n            ? Math.sqrt(abs(m[0] * m[3] - m[2] * m[1]))\n            : 1;\n    }\n\n    copyTransform(source: Transformable) {\n        const target = this;\n\n        for (let i = 0; i < TRANSFORMABLE_PROPS.length; i++) {\n            const propName = TRANSFORMABLE_PROPS[i];\n            target[propName] = source[propName];\n        }\n    }\n\n\n    static getLocalTransform(target: Transformable, m?: matrix.MatrixArray): matrix.MatrixArray {\n        m = m || [];\n\n        const ox = target.originX || 0;\n        const oy = target.originY || 0;\n        const sx = target.scaleX;\n        const sy = target.scaleY;\n        const rotation = target.rotation || 0;\n        const x = target.x;\n        const y = target.y;\n        const skewX = target.skewX ? Math.tan(target.skewX) : 0;\n        // TODO: zrender use different hand in coordinate system and y axis is inversed.\n        const skewY = target.skewY ? Math.tan(-target.skewY) : 0;\n\n        // The order of transform (-origin * scale * skew * rotate * origin * translate).\n        // We merge (-origin * scale * skew) into one. Also did identity in these operations.\n        // origin\n        if (ox || oy) {\n            m[4] = -ox * sx - skewX * oy * sy;\n            m[5] = -oy * sy - skewY * ox * sx;\n        }\n        else {\n            m[4] = m[5] = 0;\n        }\n        // scale\n        m[0] = sx;\n        m[3] = sy;\n        // skew\n        m[1] = skewY * sx;\n        m[2] = skewX * sy;\n\n        // Apply rotation\n        rotation && matrix.rotate(m, m, rotation);\n\n        // Translate back from origin and apply translation\n        m[4] += ox + x;\n        m[5] += oy + y;\n\n        return m;\n    }\n\n    private static initDefaultProps = (function () {\n        const proto = Transformable.prototype;\n        proto.x = 0;\n        proto.y = 0;\n        proto.scaleX = 1;\n        proto.scaleY = 1;\n        proto.originX = 0;\n        proto.originY = 0;\n        proto.skewX = 0;\n        proto.skewY = 0;\n        proto.rotation = 0;\n        proto.globalScaleRatio = 1;\n    })()\n};\n\nexport const TRANSFORMABLE_PROPS = [\n    'x', 'y', 'originX', 'originY', 'rotation', 'scaleX', 'scaleY', 'skewX', 'skewY'\n] as const;\n\nexport default Transformable;","import { MatrixArray } from './matrix';\n\nexport interface PointLike {\n    x: number\n    y: number\n}\nexport default class Point {\n\n    x: number\n\n    y: number\n\n    constructor(x?: number, y?: number) {\n        this.x = x || 0;\n        this.y = y || 0;\n    }\n\n    /**\n     * Copy from another point\n     */\n    copy(other: PointLike) {\n        this.x = other.x;\n        this.y = other.y;\n        return this;\n    }\n\n    /**\n     * Clone a point\n     */\n    clone() {\n        return new Point(this.x, this.y);\n    }\n\n    /**\n     * Set x and y\n     */\n    set(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n        return this;\n    }\n\n    /**\n     * If equal to another point\n     */\n    equal(other: PointLike) {\n        return other.x === this.x && other.y === this.y;\n    }\n\n    /**\n     * Add another point\n     */\n    add(other: PointLike) {\n        this.x += other.x;\n        this.y += other.y;\n        return this;\n    }\n\n    scale(scalar: number) {\n        this.x *= scalar;\n        this.y *= scalar;\n    }\n\n    scaleAndAdd(other: PointLike, scalar: number) {\n        this.x += other.x * scalar;\n        this.y += other.y * scalar;\n    }\n\n    /**\n     * Sub another point\n     */\n    sub(other: PointLike) {\n        this.x -= other.x;\n        this.y -= other.y;\n        return this;\n    }\n\n    /**\n     * Dot product with other point\n     */\n    dot(other: PointLike) {\n        return this.x * other.x + this.y * other.y;\n    }\n\n    /**\n     * Get length of point\n     */\n    len() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    }\n\n    /**\n     * Get squared length\n     */\n    lenSquare() {\n        return this.x * this.x + this.y * this.y;\n    }\n\n    /**\n     * Normalize\n     */\n    normalize() {\n        const len = this.len();\n        this.x /= len;\n        this.y /= len;\n        return this;\n    }\n\n    /**\n     * Distance to another point\n     */\n    distance(other: PointLike) {\n        const dx = this.x - other.x;\n        const dy = this.y - other.y;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    /**\n     * Square distance to another point\n     */\n    distanceSquare(other: Point) {\n        const dx = this.x - other.x;\n        const dy = this.y - other.y;\n        return dx * dx + dy * dy;\n    }\n\n    /**\n     * Negate\n     */\n    negate() {\n        this.x = -this.x;\n        this.y = -this.y;\n        return this;\n    }\n\n    /**\n     * Apply a transform matrix array.\n     */\n    transform(m: MatrixArray) {\n        if (!m) {\n            return;\n        }\n        const x = this.x;\n        const y = this.y;\n        this.x = m[0] * x + m[2] * y + m[4];\n        this.y = m[1] * x + m[3] * y + m[5];\n        return this;\n    }\n\n    toArray(out: number[]) {\n        out[0] = this.x;\n        out[1] = this.y;\n        return out;\n    }\n\n    fromArray(input: number[]) {\n        this.x = input[0];\n        this.y = input[1];\n    }\n\n    static set(p: PointLike, x: number, y: number) {\n        p.x = x;\n        p.y = y;\n    }\n\n    static copy(p: PointLike, p2: PointLike) {\n        p.x = p2.x;\n        p.y = p2.y;\n    }\n\n    static len(p: PointLike) {\n        return Math.sqrt(p.x * p.x + p.y * p.y);\n    }\n\n    static lenSquare(p: PointLike) {\n        return p.x * p.x + p.y * p.y;\n    }\n\n    static dot(p0: PointLike, p1: PointLike) {\n        return p0.x * p1.x + p0.y * p1.y;\n    }\n\n    static add(out: PointLike, p0: PointLike, p1: PointLike) {\n        out.x = p0.x + p1.x;\n        out.y = p0.y + p1.y;\n    }\n\n    static sub(out: PointLike, p0: PointLike, p1: PointLike) {\n        out.x = p0.x - p1.x;\n        out.y = p0.y - p1.y;\n    }\n\n    static scale(out: PointLike, p0: PointLike, scalar: number) {\n        out.x = p0.x * scalar;\n        out.y = p0.y * scalar;\n    }\n\n    static scaleAndAdd(out: PointLike, p0: PointLike, p1: PointLike, scalar: number) {\n        out.x = p0.x + p1.x * scalar;\n        out.y = p0.y + p1.y * scalar;\n    }\n\n    static lerp(out: PointLike, p0: PointLike, p1: PointLike, t: number) {\n        const onet = 1 - t;\n        out.x = onet * p0.x + t * p1.x;\n        out.y = onet * p0.y + t * p1.y;\n    }\n}","/**\n * @module echarts/core/BoundingRect\n */\n\nimport * as matrix from './matrix';\nimport Point, { PointLike } from './Point';\n\nconst mathMin = Math.min;\nconst mathMax = Math.max;\n\nconst lt = new Point();\nconst rb = new Point();\nconst lb = new Point();\nconst rt = new Point();\n\nconst minTv = new Point();\nconst maxTv = new Point();\n\nclass BoundingRect {\n\n    x: number\n    y: number\n    width: number\n    height: number\n\n    constructor(x: number, y: number, width: number, height: number) {\n        if (width < 0) {\n            x = x + width;\n            width = -width;\n        }\n        if (height < 0) {\n            y = y + height;\n            height = -height;\n        }\n\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n\n    union(other: BoundingRect) {\n        const x = mathMin(other.x, this.x);\n        const y = mathMin(other.y, this.y);\n\n        // If x is -Infinity and width is Infinity (like in the case of\n        // IncrementalDisplayble), x + width would be NaN\n        if (isFinite(this.x) && isFinite(this.width)) {\n            this.width = mathMax(\n                other.x + other.width,\n                this.x + this.width\n            ) - x;\n        }\n        else {\n            this.width = other.width;\n        }\n\n        if (isFinite(this.y) && isFinite(this.height)) {\n            this.height = mathMax(\n                other.y + other.height,\n                this.y + this.height\n            ) - y;\n        }\n        else {\n            this.height = other.height;\n        }\n\n        this.x = x;\n        this.y = y;\n    }\n\n    applyTransform(m: matrix.MatrixArray) {\n        BoundingRect.applyTransform(this, this, m);\n    }\n\n    calculateTransform(b: RectLike): matrix.MatrixArray {\n        const a = this;\n        const sx = b.width / a.width;\n        const sy = b.height / a.height;\n\n        const m = matrix.create();\n\n        // 矩阵右乘\n        matrix.translate(m, m, [-a.x, -a.y]);\n        matrix.scale(m, m, [sx, sy]);\n        matrix.translate(m, m, [b.x, b.y]);\n\n        return m;\n    }\n\n    intersect(b: RectLike, mtv?: PointLike): boolean {\n        if (!b) {\n            return false;\n        }\n\n        if (!(b instanceof BoundingRect)) {\n            // Normalize negative width/height.\n            b = BoundingRect.create(b);\n        }\n\n        const a = this;\n        const ax0 = a.x;\n        const ax1 = a.x + a.width;\n        const ay0 = a.y;\n        const ay1 = a.y + a.height;\n\n        const bx0 = b.x;\n        const bx1 = b.x + b.width;\n        const by0 = b.y;\n        const by1 = b.y + b.height;\n\n        let overlap = !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\n        if (mtv) {\n            let dMin = Infinity;\n            let dMax = 0;\n            const d0 = Math.abs(ax1 - bx0);\n            const d1 = Math.abs(bx1 - ax0);\n            const d2 = Math.abs(ay1 - by0);\n            const d3 = Math.abs(by1 - ay0);\n            const dx = Math.min(d0, d1);\n            const dy = Math.min(d2, d3);\n            // On x axis\n            if (ax1 < bx0 || bx1 < ax0) {\n                if (dx > dMax) {\n                    dMax = dx;\n                    if (d0 < d1) {\n                        Point.set(maxTv, -d0, 0); // b is on the right\n                    }\n                    else {\n                        Point.set(maxTv, d1, 0);  // b is on the left\n                    }\n                }\n            }\n            else {\n                if (dx < dMin) {\n                    dMin = dx;\n                    if (d0 < d1) {\n                        Point.set(minTv, d0, 0); // b is on the right\n                    }\n                    else {\n                        Point.set(minTv, -d1, 0);  // b is on the left\n                    }\n                }\n            }\n\n            // On y axis\n            if (ay1 < by0 || by1 < ay0) {\n                if (dy > dMax) {\n                    dMax = dy;\n                    if (d2 < d3) {\n                        Point.set(maxTv, 0, -d2); // b is on the bottom(larger y)\n                    }\n                    else {\n                        Point.set(maxTv, 0, d3);  // b is on the top(smaller y)\n                    }\n                }\n            }\n            else {\n                if (dx < dMin) {\n                    dMin = dx;\n                    if (d2 < d3) {\n                        Point.set(minTv, 0, d2); // b is on the bottom\n                    }\n                    else {\n                        Point.set(minTv, 0, -d3);  // b is on the top\n                    }\n                }\n            }\n        }\n\n        if (mtv) {\n            Point.copy(mtv, overlap ? minTv : maxTv);\n        }\n        return overlap;\n    }\n\n    contain(x: number, y: number): boolean {\n        const rect = this;\n        return x >= rect.x\n            && x <= (rect.x + rect.width)\n            && y >= rect.y\n            && y <= (rect.y + rect.height);\n    }\n\n    clone() {\n        return new BoundingRect(this.x, this.y, this.width, this.height);\n    }\n\n    /**\n     * Copy from another rect\n     */\n    copy(other: RectLike) {\n        BoundingRect.copy(this, other);\n    }\n\n    plain(): RectLike {\n        return {\n            x: this.x,\n            y: this.y,\n            width: this.width,\n            height: this.height\n        };\n    }\n\n    /**\n     * If not having NaN or Infinity with attributes\n     */\n    isFinite(): boolean {\n        return isFinite(this.x)\n            && isFinite(this.y)\n            && isFinite(this.width)\n            && isFinite(this.height);\n    }\n\n    isZero(): boolean {\n        return this.width === 0 || this.height === 0;\n    }\n\n    static create(rect: RectLike): BoundingRect {\n        return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\n    }\n\n    static copy(target: RectLike, source: RectLike) {\n        target.x = source.x;\n        target.y = source.y;\n        target.width = source.width;\n        target.height = source.height;\n    }\n\n    static applyTransform(target: RectLike, source: RectLike, m: matrix.MatrixArray) {\n        // In case usage like this\n        // el.getBoundingRect().applyTransform(el.transform)\n        // And element has no transform\n        if (!m) {\n            if (target !== source) {\n                BoundingRect.copy(target, source);\n            }\n            return;\n        }\n        // Fast path when there is no rotation in matrix.\n        if (m[1] < 1e-5 && m[1] > -1e-5 && m[2] < 1e-5 && m[2] > -1e-5) {\n            const sx = m[0];\n            const sy = m[3];\n            const tx = m[4];\n            const ty = m[5];\n            target.x = source.x * sx + tx;\n            target.y = source.y * sy + ty;\n            target.width = source.width * sx;\n            target.height = source.height * sy;\n            if (target.width < 0) {\n                target.x += target.width;\n                target.width = -target.width;\n            }\n            if (target.height < 0) {\n                target.y += target.height;\n                target.height = -target.height;\n            }\n            return;\n        }\n\n        // source and target can be same instance.\n        lt.x = lb.x = source.x;\n        lt.y = rt.y = source.y;\n        rb.x = rt.x = source.x + source.width;\n        rb.y = lb.y = source.y + source.height;\n\n        lt.transform(m);\n        rt.transform(m);\n        rb.transform(m);\n        lb.transform(m);\n\n        target.x = mathMin(lt.x, rb.x, lb.x, rt.x);\n        target.y = mathMin(lt.y, rb.y, lb.y, rt.y);\n        const maxX = mathMax(lt.x, rb.x, lb.x, rt.x);\n        const maxY = mathMax(lt.y, rb.y, lb.y, rt.y);\n        target.width = maxX - target.x;\n        target.height = maxY - target.y;\n    }\n}\n\n\nexport type RectLike = {\n    x: number\n    y: number\n    width: number\n    height: number\n}\n\nexport default BoundingRect;","import BoundingRect, { RectLike } from '../core/BoundingRect';\nimport { createCanvas } from '../core/util';\nimport { Dictionary, PropType, TextAlign, TextVerticalAlign, BuiltinTextPosition } from '../core/types';\nimport LRU from '../core/LRU';\n\nlet textWidthCache: Dictionary<LRU<number>> = {};\n\nexport const DEFAULT_FONT = '12px sans-serif';\n\nlet _ctx: CanvasRenderingContext2D;\nlet _cachedFont: string;\n\nfunction defaultMeasureText(text: string, font?: string): { width: number } {\n    if (!_ctx) {\n        _ctx = createCanvas().getContext('2d');\n    }\n    if (_cachedFont !== font) {\n        _cachedFont = _ctx.font = font || DEFAULT_FONT;\n    }\n    return _ctx.measureText(text);\n}\n\nlet methods: {\n    measureText: (text: string, font?: string) => { width: number }\n} = {\n    measureText: defaultMeasureText\n};\n\nexport function $override(\n    name: keyof typeof methods,\n    fn: PropType<typeof methods, keyof typeof methods>\n) {\n    methods[name] = fn;\n}\n\n// let cacheMissCount = 0;\n// let totalCount = 0;\n\nexport function getWidth(text: string, font: string): number {\n    font = font || DEFAULT_FONT;\n    let cacheOfFont = textWidthCache[font];\n    if (!cacheOfFont) {\n        cacheOfFont = textWidthCache[font] = new LRU(500);\n    }\n    let width = cacheOfFont.get(text);\n    if (width == null) {\n        width = methods.measureText(text, font).width;\n        cacheOfFont.put(text, width);\n        // cacheMissCount++;\n    }\n    // totalCount++;\n\n    return width;\n}\n\n/**\n *\n * Get bounding rect for inner usage(TSpan)\n * Which not include text newline.\n */\nexport function innerGetBoundingRect(\n    text: string,\n    font: string,\n    textAlign?: TextAlign,\n    textBaseline?: TextVerticalAlign\n): BoundingRect {\n    const width = getWidth(text, font);\n    const height = getLineHeight(font);\n\n    const x = adjustTextX(0, width, textAlign);\n    const y = adjustTextY(0, height, textBaseline);\n\n    const rect = new BoundingRect(x, y, width, height);\n\n    return rect;\n}\n\n/**\n *\n * Get bounding rect for outer usage. Compatitable with old implementation\n * Which includes text newline.\n */\nexport function getBoundingRect(\n    text: string,\n    font: string,\n    textAlign?: TextAlign,\n    textBaseline?: TextVerticalAlign\n) {\n    const textLines = ((text || '') + '').split('\\n');\n    const len = textLines.length;\n    if (len === 1) {\n        return innerGetBoundingRect(textLines[0], font, textAlign, textBaseline);\n    }\n    else {\n        const uniondRect = new BoundingRect(0, 0, 0, 0);\n        for (let i = 0; i < textLines.length; i++) {\n            const rect = innerGetBoundingRect(textLines[i], font, textAlign, textBaseline);\n            i === 0 ? uniondRect.copy(rect) : uniondRect.union(rect);\n        }\n        return uniondRect;\n    }\n}\n\nexport function adjustTextX(x: number, width: number, textAlign: TextAlign): number {\n    // TODO Right to left language\n    if (textAlign === 'right') {\n        x -= width;\n    }\n    else if (textAlign === 'center') {\n        x -= width / 2;\n    }\n    return x;\n}\n\nexport function adjustTextY(y: number, height: number, verticalAlign: TextVerticalAlign): number {\n    if (verticalAlign === 'middle') {\n        y -= height / 2;\n    }\n    else if (verticalAlign === 'bottom') {\n        y -= height;\n    }\n    return y;\n}\n\n\nexport function getLineHeight(font?: string): number {\n    // FIXME A rough approach.\n    return getWidth('国', font);\n}\n\nexport function measureText(text: string, font?: string): {\n    width: number\n} {\n    return methods.measureText(text, font);\n}\n\n\nexport function parsePercent(value: number | string, maxValue: number): number {\n    if (typeof value === 'string') {\n        if (value.lastIndexOf('%') >= 0) {\n            return parseFloat(value) / 100 * maxValue;\n        }\n        return parseFloat(value);\n    }\n    return value;\n}\n\nexport interface TextPositionCalculationResult {\n    x: number\n    y: number\n    align: TextAlign\n    verticalAlign: TextVerticalAlign\n}\n/**\n * Follow same interface to `Displayable.prototype.calculateTextPosition`.\n * @public\n * @param out Prepared out object. If not input, auto created in the method.\n * @param style where `textPosition` and `textDistance` are visited.\n * @param rect {x, y, width, height} Rect of the host elment, according to which the text positioned.\n * @return The input `out`. Set: {x, y, textAlign, textVerticalAlign}\n */\nexport function calculateTextPosition(\n    out: TextPositionCalculationResult,\n    opts: {\n        position?: BuiltinTextPosition | (number | string)[]\n        distance?: number   // Default 5\n        global?: boolean\n    },\n    rect: RectLike\n): TextPositionCalculationResult {\n    const textPosition = opts.position || 'inside';\n    const distance = opts.distance != null ? opts.distance : 5;\n\n    const height = rect.height;\n    const width = rect.width;\n    const halfHeight = height / 2;\n\n    let x = rect.x;\n    let y = rect.y;\n\n    let textAlign: TextAlign = 'left';\n    let textVerticalAlign: TextVerticalAlign = 'top';\n\n    if (textPosition instanceof Array) {\n        x += parsePercent(textPosition[0], rect.width);\n        y += parsePercent(textPosition[1], rect.height);\n        // Not use textAlign / textVerticalAlign\n        textAlign = null;\n        textVerticalAlign = null;\n    }\n    else {\n        switch (textPosition) {\n            case 'left':\n                x -= distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'right':\n                x += distance + width;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'top':\n                x += width / 2;\n                y -= distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'bottom':\n                x += width / 2;\n                y += height + distance;\n                textAlign = 'center';\n                break;\n            case 'inside':\n                x += width / 2;\n                y += halfHeight;\n                textAlign = 'center';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideLeft':\n                x += distance;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideRight':\n                x += width - distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideTop':\n                x += width / 2;\n                y += distance;\n                textAlign = 'center';\n                break;\n            case 'insideBottom':\n                x += width / 2;\n                y += height - distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideTopLeft':\n                x += distance;\n                y += distance;\n                break;\n            case 'insideTopRight':\n                x += width - distance;\n                y += distance;\n                textAlign = 'right';\n                break;\n            case 'insideBottomLeft':\n                x += distance;\n                y += height - distance;\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideBottomRight':\n                x += width - distance;\n                y += height - distance;\n                textAlign = 'right';\n                textVerticalAlign = 'bottom';\n                break;\n        }\n    }\n\n    out = out || {} as TextPositionCalculationResult;\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n\n    return out;\n}\n","import Transformable from './core/Transformable';\nimport { AnimationEasing } from './animation/easing';\nimport Animator, {cloneValue} from './animation/Animator';\nimport { ZRenderType } from './zrender';\nimport {\n    Dictionary, ElementEventName, ZRRawEvent, BuiltinTextPosition, AllPropTypes,\n    TextVerticalAlign, TextAlign, MapToType\n} from './core/types';\nimport Path from './graphic/Path';\nimport BoundingRect, { RectLike } from './core/BoundingRect';\nimport Eventful from './core/Eventful';\nimport ZRText, { DefaultTextStyle } from './graphic/Text';\nimport { calculateTextPosition, TextPositionCalculationResult, parsePercent } from './contain/text';\nimport {\n    guid,\n    isObject,\n    keys,\n    extend,\n    indexOf,\n    logError,\n    mixin,\n    isArrayLike,\n    isTypedArray\n} from './core/util';\nimport Polyline from './graphic/shape/Polyline';\nimport Group from './graphic/Group';\nimport Point from './core/Point';\nimport { LIGHT_LABEL_COLOR, DARK_LABEL_COLOR } from './config';\nimport { parse, stringify } from './tool/color';\nimport env from './core/env';\nimport { REDRAW_BIT } from './graphic/constants';\n\nexport interface ElementAnimateConfig {\n    duration?: number\n    delay?: number\n    easing?: AnimationEasing\n    during?: (percent: number) => void\n\n    // `done` will be called when all of the animations of the target props are\n    // \"done\" or \"aborted\", and at least one \"done\" happened.\n    // Common cases: animations declared, but some of them are aborted (e.g., by state change).\n    // The calling of `animationTo` done rather than aborted if at least one done happened.\n    done?: Function\n    // `aborted` will be called when all of the animations of the target props are \"aborted\".\n    aborted?: Function\n\n    scope?: string\n    /**\n     * If force animate\n     * Prevent stop animation and callback\n     * immediently when target values are the same as current values.\n     */\n    force?: boolean\n    /**\n     * If use additive animation.\n     */\n    additive?: boolean\n    /**\n     * If set to final state before animation started.\n     * It can be useful if something you want to calcuate depends on the final state of element.\n     * Like bounding rect for text layouting.\n     *\n     * Only available in animateTo\n     */\n    setToFinal?: boolean\n}\n\nexport interface ElementTextConfig {\n    /**\n     * Position relative to the element bounding rect\n     * @default 'inside'\n     */\n    position?: BuiltinTextPosition | (number | string)[]\n\n    /**\n     * Rotation of the label.\n     */\n    rotation?: number\n\n    /**\n     * Rect that text will be positioned.\n     * Default to be the rect of element.\n     */\n    layoutRect?: RectLike\n\n    /**\n     * Offset of the label.\n     * The difference of offset and position is that it will be applied\n     * in the rotation\n     */\n    offset?: number[]\n\n    /**\n     * Origin or rotation. Which is relative to the bounding box of the attached element.\n     * Can be percent value. Relative to the bounding box.\n     * If specified center. It will be center of the bounding box.\n     *\n     * Only available when position and rotation are both set.\n     */\n    origin?: (number | string)[] | 'center'\n\n    /**\n     * Distance to the rect\n     * @default 5\n     */\n    distance?: number\n\n    /**\n     * If use local user space. Which will apply host's transform\n     * @default false\n     */\n    local?: boolean\n\n    /**\n     * `insideFill` is a color string or left empty.\n     * If a `textContent` is \"inside\", its final `fill` will be picked by this priority:\n     * `textContent.style.fill` > `textConfig.insideFill` > \"auto-calculated-fill\"\n     * In most cases, \"auto-calculated-fill\" is white.\n     */\n    insideFill?: string\n\n    /**\n     * `insideStroke` is a color string or left empty.\n     * If a `textContent` is \"inside\", its final `stroke` will be picked by this priority:\n     * `textContent.style.stroke` > `textConfig.insideStroke` > \"auto-calculated-stroke\"\n     *\n     * The rule of getting \"auto-calculated-stroke\":\n     * If (A) the `fill` is specified in style (either in `textContent.style` or `textContent.style.rich`)\n     * or (B) needed to draw text background (either defined in `textContent.style` or `textContent.style.rich`)\n     * \"auto-calculated-stroke\" will be null.\n     * Otherwise, \"auto-calculated-stroke\" will be the same as `fill` of this element if possible, or null.\n     *\n     * The reason of (A) is not decisive:\n     * 1. If users specify `fill` in style and still use \"auto-calculated-stroke\", the effect\n     * is not good and unexpected in some cases. It not easy and seams uncessary to auto calculate\n     * a proper `stroke` for the given `fill`, since they can specify `stroke` themselve.\n     * 2. Backward compat.\n     */\n    insideStroke?: string\n\n    /**\n     * `outsideFill` is a color string or left empty.\n     * If a `textContent` is \"inside\", its final `fill` will be picked by this priority:\n     * `textContent.style.fill` > `textConfig.outsideFill` > #000\n     */\n    outsideFill?: string\n\n    /**\n     * `outsideStroke` is a color string or left empth.\n     * If a `textContent` is not \"inside\", its final `stroke` will be picked by this priority:\n     * `textContent.style.stroke` > `textConfig.outsideStroke` > \"auto-calculated-stroke\"\n     *\n     * The rule of getting \"auto-calculated-stroke\":\n     * If (A) the `fill` is specified in style (either in `textContent.style` or `textContent.style.rich`)\n     * or (B) needed to draw text background (either defined in `textContent.style` or `textContent.style.rich`)\n     * \"auto-calculated-stroke\" will be null.\n     * Otherwise, \"auto-calculated-stroke\" will be a neer white color to distinguish \"front end\"\n     * label with messy background (like other text label, line or other graphic).\n     */\n    outsideStroke?: string\n\n    /**\n     * Tell zrender I can sure this text is inside or not.\n     * In case position is not using builtin `inside` hints.\n     */\n    inside?: boolean\n}\nexport interface ElementTextGuideLineConfig {\n    /**\n     * Anchor for text guide line.\n     * Notice: Won't work\n     */\n    anchor?: Point\n\n    /**\n     * If above the target element.\n     */\n    showAbove?: boolean\n\n    /**\n     * Candidates of connectors. Used when autoCalculate is true and anchor is not specified.\n     */\n    candidates?: ('left' | 'top' | 'right' | 'bottom')[]\n}\n\nexport interface ElementEvent {\n    type: ElementEventName,\n    event: ZRRawEvent,\n    // target can only be an element that is not silent.\n    target: Element,\n    // topTarget can be a silent element.\n    topTarget: Element,\n    cancelBubble: boolean,\n    offsetX: number,\n    offsetY: number,\n    gestureEvent: string,\n    pinchX: number,\n    pinchY: number,\n    pinchScale: number,\n    wheelDelta: number,\n    zrByTouch: boolean,\n    which: number,\n    stop: (this: ElementEvent) => void\n}\n\nexport type ElementEventCallback<Ctx, Impl> = (\n    this: CbThis<Ctx, Impl>, e: ElementEvent\n) => boolean | void\ntype CbThis<Ctx, Impl> = unknown extends Ctx ? Impl : Ctx;\n\ninterface ElementEventHandlerProps {\n    // Events\n    onclick: ElementEventCallback<unknown, unknown>\n    ondblclick: ElementEventCallback<unknown, unknown>\n    onmouseover: ElementEventCallback<unknown, unknown>\n    onmouseout: ElementEventCallback<unknown, unknown>\n    onmousemove: ElementEventCallback<unknown, unknown>\n    onmousewheel: ElementEventCallback<unknown, unknown>\n    onmousedown: ElementEventCallback<unknown, unknown>\n    onmouseup: ElementEventCallback<unknown, unknown>\n    oncontextmenu: ElementEventCallback<unknown, unknown>\n\n    ondrag: ElementEventCallback<unknown, unknown>\n    ondragstart: ElementEventCallback<unknown, unknown>\n    ondragend: ElementEventCallback<unknown, unknown>\n    ondragenter: ElementEventCallback<unknown, unknown>\n    ondragleave: ElementEventCallback<unknown, unknown>\n    ondragover: ElementEventCallback<unknown, unknown>\n    ondrop: ElementEventCallback<unknown, unknown>\n}\n\nexport interface ElementProps extends Partial<ElementEventHandlerProps> {\n    name?: string\n    ignore?: boolean\n    isGroup?: boolean\n    draggable?: boolean | 'horizontal' | 'vertical'\n\n    silent?: boolean\n\n    ignoreClip?: boolean\n    // From transform\n    x?: number\n    y?: number\n    scaleX?: number\n    scaleY?: number\n    originX?: number\n    originY?: number\n    rotation?: number\n\n    globalScaleRatio?: number\n\n    textConfig?: ElementTextConfig\n    textContent?: ZRText\n\n    clipPath?: Path\n    drift?: Element['drift']\n\n    extra?: Dictionary<unknown>\n\n    // For echarts animation.\n    anid?: string\n}\n\n// Properties can be used in state.\nexport const PRESERVED_NORMAL_STATE = '__zr_normal__';\n// export const PRESERVED_MERGED_STATE = '__zr_merged__';\n\nconst PRIMARY_STATES_KEYS = ['x', 'y', 'scaleX', 'scaleY', 'originX', 'originY', 'rotation', 'ignore'] as const;\nconst DEFAULT_ANIMATABLE_MAP: Partial<Record<ElementStatePropNames, boolean>> = {\n    x: true,\n    y: true,\n    scaleX: true,\n    scaleY: true,\n    originX: true,\n    originY: true,\n    rotation: true,\n    ignore: false\n};\n\nexport type ElementStatePropNames = (typeof PRIMARY_STATES_KEYS)[number] | 'textConfig';\nexport type ElementState = Pick<ElementProps, ElementStatePropNames> & ElementCommonState\n\nexport type ElementCommonState = {\n    hoverLayer?: boolean\n}\n\nexport type ElementCalculateTextPosition = (\n    out: TextPositionCalculationResult,\n    style: ElementTextConfig,\n    rect: RectLike\n) => TextPositionCalculationResult;\n\nlet tmpTextPosCalcRes = {} as TextPositionCalculationResult;\nlet tmpBoundingRect = new BoundingRect(0, 0, 0, 0);\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\ninterface Element<Props extends ElementProps = ElementProps> extends Transformable,\n    Eventful<{\n        [key in ElementEventName]: (e: ElementEvent) => void | boolean\n    } & {\n        [key in string]: (...args: any) => void | boolean\n    }>,\n    ElementEventHandlerProps {\n}\n\nclass Element<Props extends ElementProps = ElementProps> {\n\n    id: number = guid()\n    /**\n     * Element type\n     */\n    type: string\n\n    /**\n     * Element name\n     */\n    name: string\n\n    /**\n     * If ignore drawing and events of the element object\n     */\n    ignore: boolean\n\n    /**\n     * Whether to respond to mouse events.\n     */\n    silent: boolean\n\n    /**\n     * 是否是 Group\n     */\n    isGroup: boolean\n\n    /**\n     * Whether it can be dragged.\n     */\n    draggable: boolean | 'horizontal' | 'vertical'\n\n    /**\n     * Whether is it dragging.\n     */\n    dragging: boolean\n\n    parent: Group\n\n    animators: Animator<any>[] = []\n\n    /**\n     * If ignore clip from it's parent or hosts.\n     * Applied on itself and all it's children.\n     *\n     * NOTE: It won't affect the clipPath set on the children.\n     */\n    ignoreClip: boolean\n\n    /**\n     * If element is used as a component of other element.\n     */\n    __hostTarget: Element\n\n    /**\n     * ZRender instance will be assigned when element is associated with zrender\n     */\n    __zr: ZRenderType\n\n    /**\n     * Dirty bits.\n     * From which painter will determine if this displayable object needs brush.\n     */\n    __dirty: number\n\n    /**\n     * If element was painted on the screen\n     */\n    __isRendered: boolean;\n\n    /**\n     * If element has been moved to the hover layer.\n     *\n     * If so, dirty will only trigger the zrender refresh hover layer\n     */\n    __inHover: boolean\n\n    /**\n     * path to clip the elements and its children, if it is a group.\n     * @see http://www.w3.org/TR/2dcontext/#clipping-region\n     */\n    private _clipPath?: Path\n\n    /**\n     * Attached text element.\n     * `position`, `style.textAlign`, `style.textVerticalAlign`\n     * of element will be ignored if textContent.position is set\n     */\n    private _textContent?: ZRText\n\n    /**\n     * Text guide line.\n     */\n    private _textGuide?: Polyline\n\n    /**\n     * Config of textContent. Inlcuding layout, color, ...etc.\n     */\n    textConfig?: ElementTextConfig\n\n    /**\n     * Config for guide line calculating.\n     *\n     * NOTE: This is just a property signature. READ and WRITE are all done in echarts.\n     */\n    textGuideLineConfig?: ElementTextGuideLineConfig\n\n    // FOR ECHARTS\n    /**\n     * Id for mapping animation\n     */\n    anid: string\n\n    extra: Dictionary<unknown>\n\n    currentStates?: string[] = []\n    // prevStates is for storager in echarts.\n    prevStates?: string[]\n    /**\n     * Store of element state.\n     * '__normal__' key is preserved for default properties.\n     */\n    states: Dictionary<ElementState> = {}\n\n    /**\n     * Animation config applied on state switching.\n     */\n    stateTransition: ElementAnimateConfig\n\n    /**\n     * Proxy function for getting state with given stateName.\n     * ZRender will first try to get with stateProxy. Then find from states if stateProxy returns nothing\n     *\n     * targetStates will be given in useStates\n     */\n    stateProxy?: (stateName: string, targetStates?: string[]) => ElementState\n\n    protected _normalState: ElementState\n\n    // Temporary storage for inside text color configuration.\n    private _innerTextDefaultStyle: DefaultTextStyle\n\n    constructor(props?: Props) {\n        this._init(props);\n    }\n\n    protected _init(props?: Props) {\n        // Init default properties\n        this.attr(props);\n    }\n\n    /**\n     * Drift element\n     * @param {number} dx dx on the global space\n     * @param {number} dy dy on the global space\n     */\n    drift(dx: number, dy: number, e?: ElementEvent) {\n        switch (this.draggable) {\n            case 'horizontal':\n                dy = 0;\n                break;\n            case 'vertical':\n                dx = 0;\n                break;\n        }\n\n        let m = this.transform;\n        if (!m) {\n            m = this.transform = [1, 0, 0, 1, 0, 0];\n        }\n        m[4] += dx;\n        m[5] += dy;\n\n        this.decomposeTransform();\n        this.markRedraw();\n    }\n\n    /**\n     * Hook before update\n     */\n    beforeUpdate() {}\n    /**\n     * Hook after update\n     */\n    afterUpdate() {}\n    /**\n     * Update each frame\n     */\n    update() {\n        this.updateTransform();\n\n        if (this.__dirty) {\n            this.updateInnerText();\n        }\n    }\n\n    updateInnerText(forceUpdate?: boolean) {\n        // Update textContent\n        const textEl = this._textContent;\n        if (textEl && (!textEl.ignore || forceUpdate)) {\n            if (!this.textConfig) {\n                this.textConfig = {};\n            }\n            const textConfig = this.textConfig;\n            const isLocal = textConfig.local;\n            const innerTransformable = textEl.innerTransformable;\n\n            let textAlign: TextAlign;\n            let textVerticalAlign: TextVerticalAlign;\n\n            let textStyleChanged = false;\n\n            // Apply host's transform.\n            innerTransformable.parent = isLocal ? this as unknown as Group : null;\n\n            let innerOrigin = false;\n\n            // Reset x/y/rotation\n            innerTransformable.copyTransform(textEl);\n\n            // Force set attached text's position if `position` is in config.\n            if (textConfig.position != null) {\n                let layoutRect = tmpBoundingRect;\n                if (textConfig.layoutRect) {\n                    layoutRect.copy(textConfig.layoutRect);\n                }\n                else {\n                    layoutRect.copy(this.getBoundingRect());\n                }\n                if (!isLocal) {\n                    layoutRect.applyTransform(this.transform);\n                }\n\n                if (this.calculateTextPosition) {\n                    this.calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                else {\n                    calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n\n                // TODO Should modify back if textConfig.position is set to null again.\n                // Or textContent is detached.\n                innerTransformable.x = tmpTextPosCalcRes.x;\n                innerTransformable.y = tmpTextPosCalcRes.y;\n\n                // User specified align/verticalAlign has higher priority, which is\n                // useful in the case that attached text is rotated 90 degree.\n                textAlign = tmpTextPosCalcRes.align;\n                textVerticalAlign = tmpTextPosCalcRes.verticalAlign;\n\n                const textOrigin = textConfig.origin;\n                if (textOrigin && textConfig.rotation != null) {\n                    let relOriginX;\n                    let relOriginY;\n                    if (textOrigin === 'center') {\n                        relOriginX = layoutRect.width * 0.5;\n                        relOriginY = layoutRect.height * 0.5;\n                    }\n                    else {\n                        relOriginX = parsePercent(textOrigin[0], layoutRect.width);\n                        relOriginY = parsePercent(textOrigin[1], layoutRect.height);\n                    }\n\n                    innerOrigin = true;\n                    innerTransformable.originX = -innerTransformable.x + relOriginX + (isLocal ? 0 : layoutRect.x);\n                    innerTransformable.originY = -innerTransformable.y + relOriginY + (isLocal ? 0 : layoutRect.y);\n                }\n            }\n\n\n            if (textConfig.rotation != null) {\n                innerTransformable.rotation = textConfig.rotation;\n            }\n\n            // TODO\n            const textOffset = textConfig.offset;\n            if (textOffset) {\n                innerTransformable.x += textOffset[0];\n                innerTransformable.y += textOffset[1];\n\n                // Not change the user set origin.\n                if (!innerOrigin) {\n                    innerTransformable.originX = -textOffset[0];\n                    innerTransformable.originY = -textOffset[1];\n                }\n            }\n\n            // Calculate text color\n            const isInside = textConfig.inside == null  // Force to be inside or not.\n                ? (typeof textConfig.position === 'string' && textConfig.position.indexOf('inside') >= 0)\n                : textConfig.inside;\n            const innerTextDefaultStyle = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {});\n\n            let textFill;\n            let textStroke;\n            let autoStroke;\n            if (isInside && this.canBeInsideText()) {\n                // In most cases `textContent` need this \"auto\" strategy.\n                // So by default be 'auto'. Otherwise users need to literally\n                // set `insideFill: 'auto', insideStroke: 'auto'` each time.\n                textFill = textConfig.insideFill;\n                textStroke = textConfig.insideStroke;\n\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getInsideTextFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getInsideTextStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            else {\n                textFill = textConfig.outsideFill;\n                textStroke = textConfig.outsideStroke;\n\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getOutsideFill();\n                }\n                // By default give a stroke to distinguish \"front end\" label with\n                // messy background (like other text label, line or other graphic).\n                // If textContent.style.fill specified, this auto stroke will not be used.\n                if (textStroke == null || textStroke === 'auto') {\n                    // If some time need to customize the default stroke getter,\n                    // add some kind of override method.\n                    textStroke = this.getOutsideStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            // Default `textFill` should must have a value to ensure text can be displayed.\n            textFill = textFill || '#000';\n\n            if (textFill !== innerTextDefaultStyle.fill\n                || textStroke !== innerTextDefaultStyle.stroke\n                || autoStroke !== innerTextDefaultStyle.autoStroke\n                || textAlign !== innerTextDefaultStyle.align\n                || textVerticalAlign !== innerTextDefaultStyle.verticalAlign\n            ) {\n\n                textStyleChanged = true;\n\n                innerTextDefaultStyle.fill = textFill;\n                innerTextDefaultStyle.stroke = textStroke;\n                innerTextDefaultStyle.autoStroke = autoStroke;\n                innerTextDefaultStyle.align = textAlign;\n                innerTextDefaultStyle.verticalAlign = textVerticalAlign;\n\n                textEl.setDefaultTextStyle(innerTextDefaultStyle);\n            }\n\n            // Mark textEl to update transform.\n            // DON'T use markRedraw. It will cause Element itself to dirty again.\n            textEl.__dirty |= REDRAW_BIT;\n\n            if (textStyleChanged) {\n                // Only mark style dirty if necessary. Update ZRText is costly.\n                textEl.dirtyStyle(true);\n            }\n        }\n    }\n\n    protected canBeInsideText() {\n        return true;\n    }\n\n    protected getInsideTextFill(): string | undefined {\n        return '#fff';\n    }\n\n    protected getInsideTextStroke(textFill: string): string | undefined {\n        return '#000';\n    }\n\n    protected getOutsideFill(): string | undefined {\n        return this.__zr && this.__zr.isDarkMode() ? LIGHT_LABEL_COLOR : DARK_LABEL_COLOR;\n    }\n\n    protected getOutsideStroke(textFill: string): string {\n        const backgroundColor = this.__zr && this.__zr.getBackgroundColor();\n        let colorArr = typeof backgroundColor === 'string' && parse(backgroundColor as string);\n        if (!colorArr) {\n            colorArr = [255, 255, 255, 1];\n        }\n        // Assume blending on a white / black(dark) background.\n        const alpha = colorArr[3];\n        const isDark = this.__zr.isDarkMode();\n        for (let i = 0; i < 3; i++) {\n            colorArr[i] = colorArr[i] * alpha + (isDark ? 0 : 255) * (1 - alpha);\n        }\n        colorArr[3] = 1;\n        return stringify(colorArr, 'rgba');\n    }\n\n    traverse<Context>(\n        cb: (this: Context, el: Element<Props>) => void,\n        context?: Context\n    ) {}\n\n    protected attrKV(key: string, value: unknown) {\n        if (key === 'textConfig') {\n            this.setTextConfig(value as ElementTextConfig);\n        }\n        else if (key === 'textContent') {\n            this.setTextContent(value as ZRText);\n        }\n        else if (key === 'clipPath') {\n            this.setClipPath(value as Path);\n        }\n        else if (key === 'extra') {\n            this.extra = this.extra || {};\n            extend(this.extra, value);\n        }\n        else {\n            (this as any)[key] = value;\n        }\n    }\n\n    /**\n     * Hide the element\n     */\n    hide() {\n        this.ignore = true;\n        this.markRedraw();\n    }\n\n    /**\n     * Show the element\n     */\n    show() {\n        this.ignore = false;\n        this.markRedraw();\n    }\n\n    attr(keyOrObj: Props): this\n    attr<T extends keyof Props>(keyOrObj: T, value: Props[T]): this\n    attr(keyOrObj: keyof Props | Props, value?: unknown): this {\n        if (typeof keyOrObj === 'string') {\n            this.attrKV(keyOrObj as keyof ElementProps, value as AllPropTypes<ElementProps>);\n        }\n        else if (isObject(keyOrObj)) {\n            let obj = keyOrObj as object;\n            let keysArr = keys(obj);\n            for (let i = 0; i < keysArr.length; i++) {\n                let key = keysArr[i];\n                this.attrKV(key as keyof ElementProps, keyOrObj[key]);\n            }\n        }\n        this.markRedraw();\n        return this;\n    }\n\n    // Save current state to normal\n    saveCurrentToNormalState(toState: ElementState) {\n        this._innerSaveToNormal(toState);\n\n        // If we are switching from normal to other state during animation.\n        // We need to save final value of animation to the normal state. Not interpolated value.\n        const normalState = this._normalState;\n        for (let i = 0; i < this.animators.length; i++) {\n            const animator = this.animators[i];\n            const fromStateTransition = animator.__fromStateTransition;\n            // Ignore animation from state transition(except normal).\n            if (fromStateTransition && fromStateTransition !== PRESERVED_NORMAL_STATE) {\n                continue;\n            }\n\n            const targetName = animator.targetName;\n            // Respecting the order of animation if multiple animator is\n            // animating on the same property(If additive animation is used)\n            const target = targetName\n                ? (normalState as any)[targetName] : normalState;\n            // Only save keys that are changed by the states.\n            animator.saveFinalToTarget(target);\n        }\n    }\n\n    protected _innerSaveToNormal(toState: ElementState) {\n        let normalState = this._normalState;\n        if (!normalState) {\n            // Clear previous stored normal states when switching from normalState to otherState.\n            normalState = this._normalState = {};\n        }\n        if (toState.textConfig && !normalState.textConfig) {\n            normalState.textConfig = this.textConfig;\n        }\n\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    }\n\n    protected _savePrimaryToNormal(\n        toState: Dictionary<any>, normalState: Dictionary<any>, primaryKeys: readonly string[]\n    ) {\n        for (let i = 0; i < primaryKeys.length; i++) {\n            let key = primaryKeys[i];\n            // Only save property that will be changed by toState\n            // and has not been saved to normalState yet.\n            if (toState[key] != null && !(key in normalState)) {\n                (normalState as any)[key] = (this as any)[key];\n            }\n        }\n    }\n\n    /**\n     * If has any state.\n     */\n    hasState() {\n        return this.currentStates.length > 0;\n    }\n\n    /**\n     * Get state object\n     */\n    getState(name: string) {\n        return this.states[name];\n    }\n\n\n    /**\n     * Ensure state exists. If not, will create one and return.\n     */\n    ensureState(name: string) {\n        const states = this.states;\n        if (!states[name]) {\n            states[name] = {};\n        }\n        return states[name];\n    }\n\n    /**\n     * Clear all states.\n     */\n    clearStates(noAnimation?: boolean) {\n        this.useState(PRESERVED_NORMAL_STATE, false, noAnimation);\n        // TODO set _normalState to null?\n    }\n    /**\n     * Use state. State is a collection of properties.\n     * Will return current state object if state exists and stateName has been changed.\n     *\n     * @param stateName State name to be switched to\n     * @param keepCurrentState If keep current states.\n     *      If not, it will inherit from the normal state.\n     */\n    useState(stateName: string, keepCurrentStates?: boolean, noAnimation?: boolean, forceUseHoverLayer?: boolean) {\n        // Use preserved word __normal__\n        // TODO: Only restore changed properties when restore to normal???\n        const toNormalState = stateName === PRESERVED_NORMAL_STATE;\n        const hasStates = this.hasState();\n\n        if (!hasStates && toNormalState) {\n            // If switched from normal to normal.\n            return;\n        }\n\n        const currentStates = this.currentStates;\n        const animationCfg = this.stateTransition;\n\n        // No need to change in following cases:\n        // 1. Keep current states. and already being applied before.\n        // 2. Don't keep current states. And new state is same with the only one exists state.\n        if (indexOf(currentStates, stateName) >= 0 && (keepCurrentStates || currentStates.length === 1)) {\n            return;\n        }\n\n        let state;\n        if (this.stateProxy && !toNormalState) {\n            state = this.stateProxy(stateName);\n        }\n\n        if (!state) {\n            state = (this.states && this.states[stateName]);\n        }\n\n        if (!state && !toNormalState) {\n            logError(`State ${stateName} not exists.`);\n            return;\n        }\n\n        if (!toNormalState) {\n            this.saveCurrentToNormalState(state);\n        }\n\n        const useHoverLayer = !!((state && state.hoverLayer) || forceUseHoverLayer);\n\n        if (useHoverLayer) {\n            // Enter hover layer before states update.\n            this._toggleHoverLayerFlag(true);\n        }\n\n        this._applyStateObj(\n            stateName,\n            state,\n            this._normalState,\n            keepCurrentStates,\n            !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0,\n            animationCfg\n        );\n\n        // Also set text content.\n        const textContent = this._textContent;\n        const textGuide = this._textGuide;\n        if (textContent) {\n            // Force textContent use hover layer if self is using it.\n            textContent.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (textGuide) {\n            textGuide.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n\n        if (toNormalState) {\n            // Clear state\n            this.currentStates = [];\n            // Reset normal state.\n            this._normalState = {};\n        }\n        else {\n            if (!keepCurrentStates) {\n                this.currentStates = [stateName];\n            }\n            else {\n                this.currentStates.push(stateName);\n            }\n        }\n\n        // Update animating target to the new object after state changed.\n        this._updateAnimationTargets();\n\n        this.markRedraw();\n\n        if (!useHoverLayer && this.__inHover) {\n            // Leave hover layer after states update and markRedraw.\n            this._toggleHoverLayerFlag(false);\n            // NOTE: avoid unexpected refresh when moving out from hover layer!!\n            // Only clear from hover layer.\n            this.__dirty &= ~REDRAW_BIT;\n        }\n\n        // Return used state.\n        return state;\n    }\n\n    /**\n     * Apply multiple states.\n     * @param states States list.\n     */\n    useStates(states: string[], noAnimation?: boolean, forceUseHoverLayer?: boolean) {\n        if (!states.length) {\n            this.clearStates();\n        }\n        else {\n            const stateObjects: ElementState[] = [];\n            const currentStates = this.currentStates;\n            const len = states.length;\n            let notChange = len === currentStates.length;\n            if (notChange) {\n                for (let i = 0; i < len; i++) {\n                    if (states[i] !== currentStates[i]) {\n                        notChange = false;\n                        break;\n                    }\n                }\n            }\n            if (notChange) {\n                return;\n            }\n\n            for (let i = 0; i < len; i++) {\n                const stateName = states[i];\n                let stateObj: ElementState;\n                if (this.stateProxy) {\n                    stateObj = this.stateProxy(stateName, states);\n                }\n                if (!stateObj) {\n                    stateObj = this.states[stateName];\n                }\n                if (stateObj) {\n                    stateObjects.push(stateObj);\n                }\n            }\n\n            const lastStateObj = stateObjects[len - 1];\n            const useHoverLayer = !!((lastStateObj && lastStateObj.hoverLayer) || forceUseHoverLayer);\n            if (useHoverLayer) {\n                // Enter hover layer before states update.\n                this._toggleHoverLayerFlag(true);\n            }\n\n            const mergedState = this._mergeStates(stateObjects);\n            const animationCfg = this.stateTransition;\n\n            this.saveCurrentToNormalState(mergedState);\n\n            this._applyStateObj(\n                states.join(','),\n                mergedState,\n                this._normalState,\n                false,\n                !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0,\n                animationCfg\n            );\n\n            const textContent = this._textContent;\n            const textGuide = this._textGuide;\n            if (textContent) {\n                textContent.useStates(states, noAnimation, useHoverLayer);\n            }\n            if (textGuide) {\n                textGuide.useStates(states, noAnimation, useHoverLayer);\n            }\n\n            this._updateAnimationTargets();\n\n            // Create a copy\n            this.currentStates = states.slice();\n            this.markRedraw();\n\n            if (!useHoverLayer && this.__inHover) {\n                // Leave hover layer after states update and markRedraw.\n                this._toggleHoverLayerFlag(false);\n                // NOTE: avoid unexpected refresh when moving out from hover layer!!\n                // Only clear from hover layer.\n                this.__dirty &= ~REDRAW_BIT;\n            }\n        }\n    }\n\n    /**\n     * Update animation targets when reference is changed.\n     */\n    private _updateAnimationTargets() {\n        for (let i = 0; i < this.animators.length; i++) {\n            const animator = this.animators[i];\n            if (animator.targetName) {\n                animator.changeTarget((this as any)[animator.targetName]);\n            }\n        }\n    }\n\n    /**\n     * Remove state\n     * @param state State to remove\n     */\n    removeState(state: string) {\n        const idx = indexOf(this.currentStates, state);\n        if (idx >= 0) {\n            const currentStates = this.currentStates.slice();\n            currentStates.splice(idx, 1);\n            this.useStates(currentStates);\n        }\n    }\n\n    /**\n     * Replace exists state.\n     * @param oldState\n     * @param newState\n     * @param forceAdd If still add when even if replaced target not exists.\n     */\n    replaceState(oldState: string, newState: string, forceAdd: boolean) {\n        const currentStates = this.currentStates.slice();\n        const idx = indexOf(currentStates, oldState);\n        const newStateExists = indexOf(currentStates, newState) >= 0;\n        if (idx >= 0) {\n            if (!newStateExists) {\n                // Replace the old with the new one.\n                currentStates[idx] = newState;\n            }\n            else {\n                // Only remove the old one.\n                currentStates.splice(idx, 1);\n            }\n        }\n        else if (forceAdd && !newStateExists) {\n            currentStates.push(newState);\n        }\n        this.useStates(currentStates);\n    }\n\n    /**\n     * Toogle state.\n     */\n    toggleState(state: string, enable: boolean) {\n        if (enable) {\n            this.useState(state, true);\n        }\n        else {\n            this.removeState(state);\n        }\n    }\n\n    protected _mergeStates(states: ElementState[]) {\n        const mergedState: ElementState = {};\n        let mergedTextConfig: ElementTextConfig;\n        for (let i = 0; i < states.length; i++) {\n            const state = states[i];\n            extend(mergedState, state);\n\n            if (state.textConfig) {\n                mergedTextConfig = mergedTextConfig || {};\n                extend(mergedTextConfig, state.textConfig);\n            }\n        }\n        if (mergedTextConfig) {\n            mergedState.textConfig = mergedTextConfig;\n        }\n\n        return mergedState;\n    }\n\n    protected _applyStateObj(\n        stateName: string,\n        state: ElementState,\n        normalState: ElementState,\n        keepCurrentStates: boolean,\n        transition: boolean,\n        animationCfg: ElementAnimateConfig\n    ) {\n        const needsRestoreToNormal = !(state && keepCurrentStates);\n\n        // TODO: Save current state to normal?\n        // TODO: Animation\n        if (state && state.textConfig) {\n            // Inherit from current state or normal state.\n            this.textConfig = extend(\n                {},\n                keepCurrentStates ? this.textConfig : normalState.textConfig\n            );\n            extend(this.textConfig, state.textConfig);\n        }\n        else if (needsRestoreToNormal) {\n            if (normalState.textConfig) {   // Only restore if changed and saved.\n                this.textConfig = normalState.textConfig;\n            }\n        }\n\n        const transitionTarget: Dictionary<any> = {};\n        let hasTransition = false;\n\n        for (let i = 0; i < PRIMARY_STATES_KEYS.length; i++) {\n            const key = PRIMARY_STATES_KEYS[i];\n            const propNeedsTransition = transition && DEFAULT_ANIMATABLE_MAP[key];\n\n            if (state && state[key] != null) {\n                if (propNeedsTransition) {\n                    hasTransition = true;\n                    transitionTarget[key] = state[key];\n                }\n                else {\n                    // Replace if it exist in target state\n                    (this as any)[key] = state[key];\n                }\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    if (propNeedsTransition) {\n                        hasTransition = true;\n                        transitionTarget[key] = normalState[key];\n                    }\n                    else {\n                        // Restore to normal state\n                        (this as any)[key] = normalState[key];\n                    }\n                }\n            }\n        }\n\n        if (!transition) {\n            // Keep the running animation to the new values after states changed.\n            // Not simply stop animation. Or it may have jump effect.\n            for (let i = 0; i < this.animators.length; i++) {\n                const animator = this.animators[i];\n                const targetName = animator.targetName;\n                animator.__changeFinalValue(targetName\n                    ? ((state || normalState) as any)[targetName]\n                    : (state || normalState)\n                );\n            }\n        }\n\n        if (hasTransition) {\n            this._transitionState(\n                stateName,\n                transitionTarget as Props,\n                animationCfg\n            );\n        }\n    }\n\n    /**\n     * Component is some elements attached on this element for specific purpose.\n     * Like clipPath, textContent\n     */\n    private _attachComponent(componentEl: Element) {\n        if (componentEl.__zr && !componentEl.__hostTarget) {\n            throw new Error('Text element has been added to zrender.');\n        }\n\n        if (componentEl === this) {\n            throw new Error('Recursive component attachment.');\n        }\n\n        const zr = this.__zr;\n        if (zr) {\n            // Needs to add self to zrender. For rerender triggering, or animation.\n            componentEl.addSelfToZr(zr);\n        }\n\n        componentEl.__zr = zr;\n        componentEl.__hostTarget = this as unknown as Element;\n    }\n\n    private _detachComponent(componentEl: Element) {\n        if (componentEl.__zr) {\n            componentEl.removeSelfFromZr(componentEl.__zr);\n        }\n\n        componentEl.__zr = null;\n        componentEl.__hostTarget = null;\n    }\n\n    /**\n     * Get clip path\n     */\n    getClipPath() {\n        return this._clipPath;\n    }\n\n    /**\n     * Set clip path\n     *\n     * clipPath can't be shared between two elements.\n     */\n    setClipPath(clipPath: Path) {\n        // Remove previous clip path\n        if (this._clipPath && this._clipPath !== clipPath) {\n            this.removeClipPath();\n        }\n\n        this._attachComponent(clipPath);\n\n        this._clipPath = clipPath;\n        this.markRedraw();\n    }\n\n    /**\n     * Remove clip path\n     */\n    removeClipPath() {\n        const clipPath = this._clipPath;\n        if (clipPath) {\n            this._detachComponent(clipPath);\n            this._clipPath = null;\n            this.markRedraw();\n        }\n    }\n\n    /**\n     * Get attached text content.\n     */\n    getTextContent(): ZRText {\n        return this._textContent;\n    }\n\n    /**\n     * Attach text on element\n     */\n    setTextContent(textEl: ZRText) {\n        const previousTextContent = this._textContent;\n        if (previousTextContent === textEl) {\n            return;\n        }\n        // Remove previous textContent\n        if (previousTextContent && previousTextContent !== textEl) {\n            this.removeTextContent();\n        }\n\n        if (textEl.__zr && !textEl.__hostTarget) {\n            throw new Error('Text element has been added to zrender.');\n        }\n\n        textEl.innerTransformable = new Transformable();\n\n        this._attachComponent(textEl);\n\n        this._textContent = textEl;\n\n        this.markRedraw();\n    }\n\n    /**\n     * Set layout of attached text. Will merge with the previous.\n     */\n    setTextConfig(cfg: ElementTextConfig) {\n        // TODO hide cfg property?\n        if (!this.textConfig) {\n            this.textConfig = {};\n        }\n        extend(this.textConfig, cfg);\n        this.markRedraw();\n    }\n\n    /**\n     * Remove text config\n     */\n    removeTextConfig() {\n        this.textConfig = null;\n        this.markRedraw();\n    }\n\n    /**\n     * Remove attached text element.\n     */\n    removeTextContent() {\n        const textEl = this._textContent;\n        if (textEl) {\n            textEl.innerTransformable = null;\n            this._detachComponent(textEl);\n            this._textContent = null;\n            this._innerTextDefaultStyle = null;\n            this.markRedraw();\n        }\n    }\n\n    getTextGuideLine(): Polyline {\n        return this._textGuide;\n    }\n\n    setTextGuideLine(guideLine: Polyline) {\n        // Remove previous clip path\n        if (this._textGuide && this._textGuide !== guideLine) {\n            this.removeTextGuideLine();\n        }\n\n        this._attachComponent(guideLine);\n\n        this._textGuide = guideLine;\n\n        this.markRedraw();\n    }\n\n    removeTextGuideLine() {\n        const textGuide = this._textGuide;\n        if (textGuide) {\n            this._detachComponent(textGuide);\n            this._textGuide = null;\n            this.markRedraw();\n        }\n    }\n    /**\n     * Mark element needs to be repainted\n     */\n    markRedraw() {\n        this.__dirty |= REDRAW_BIT;\n        const zr = this.__zr;\n        if (zr) {\n            if (this.__inHover) {\n                zr.refreshHover();\n            }\n            else {\n                zr.refresh();\n            }\n        }\n\n        // Used as a clipPath or textContent\n        if (this.__hostTarget) {\n            this.__hostTarget.markRedraw();\n        }\n    }\n\n    /**\n     * Besides marking elements to be refreshed.\n     * It will also invalid all cache and doing recalculate next frame.\n     */\n    dirty() {\n        this.markRedraw();\n    }\n\n    private _toggleHoverLayerFlag(inHover: boolean) {\n        this.__inHover = inHover;\n        const textContent = this._textContent;\n        const textGuide = this._textGuide;\n        if (textContent) {\n            textContent.__inHover = inHover;\n        }\n        if (textGuide) {\n            textGuide.__inHover = inHover;\n        }\n    }\n\n    /**\n     * Add self from zrender instance.\n     * Not recursively because it will be invoked when element added to storage.\n     */\n    addSelfToZr(zr: ZRenderType) {\n        if (this.__zr === zr) {\n            return;\n        }\n\n        this.__zr = zr;\n        // 添加动画\n        const animators = this.animators;\n        if (animators) {\n            for (let i = 0; i < animators.length; i++) {\n                zr.animation.addAnimator(animators[i]);\n            }\n        }\n\n        if (this._clipPath) {\n            this._clipPath.addSelfToZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.addSelfToZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.addSelfToZr(zr);\n        }\n    }\n\n    /**\n     * Remove self from zrender instance.\n     * Not recursively because it will be invoked when element added to storage.\n     */\n    removeSelfFromZr(zr: ZRenderType) {\n        if (!this.__zr) {\n            return;\n        }\n\n        this.__zr = null;\n        // Remove animation\n        const animators = this.animators;\n        if (animators) {\n            for (let i = 0; i < animators.length; i++) {\n                zr.animation.removeAnimator(animators[i]);\n            }\n        }\n\n        if (this._clipPath) {\n            this._clipPath.removeSelfFromZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.removeSelfFromZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.removeSelfFromZr(zr);\n        }\n    }\n\n    /**\n     * 动画\n     *\n     * @param path The key to fetch value from object. Mostly style or shape.\n     * @param loop Whether to loop animation.\n     * @example:\n     *     el.animate('style', false)\n     *         .when(1000, {x: 10} )\n     *         .done(function(){ // Animation done })\n     *         .start()\n     */\n    animate(key?: string, loop?: boolean) {\n        let target = key ? (this as any)[key] : this;\n\n        if (!target) {\n            logError(\n                'Property \"'\n                + key\n                + '\" is not existed in element '\n                + this.id\n            );\n            return;\n        }\n\n        const animator = new Animator(target, loop);\n        this.addAnimator(animator, key);\n        return animator;\n    }\n\n    addAnimator(animator: Animator<any>, key: string): void {\n        const zr = this.__zr;\n\n        const el = this;\n\n        animator.during(function () {\n            el.updateDuringAnimation(key as string);\n        }).done(function () {\n            const animators = el.animators;\n            // FIXME Animator will not be removed if use `Animator#stop` to stop animation\n            const idx = indexOf(animators, animator);\n            if (idx >= 0) {\n                animators.splice(idx, 1);\n            }\n        });\n\n        this.animators.push(animator);\n\n        // If animate after added to the zrender\n        if (zr) {\n            zr.animation.addAnimator(animator);\n        }\n\n        // Wake up zrender to start the animation loop.\n        zr && zr.wakeUp();\n    }\n\n    updateDuringAnimation(key: string) {\n        this.markRedraw();\n    }\n\n    /**\n     * 停止动画\n     * @param {boolean} forwardToLast If move to last frame before stop\n     */\n    stopAnimation(scope?: string, forwardToLast?: boolean) {\n        const animators = this.animators;\n        const len = animators.length;\n        const leftAnimators: Animator<any>[] = [];\n        for (let i = 0; i < len; i++) {\n            const animator = animators[i];\n            if (!scope || scope === animator.scope) {\n                animator.stop(forwardToLast);\n            }\n            else {\n                leftAnimators.push(animator);\n            }\n        }\n        this.animators = leftAnimators;\n\n        return this;\n    }\n\n    /**\n     * @param animationProps A map to specify which property to animate. If not specified, will animate all.\n     * @example\n     *  // Animate position\n     *  el.animateTo({\n     *      position: [10, 10]\n     *  }, { done: () => { // done } })\n     *\n     *  // Animate shape, style and position in 100ms, delayed 100ms, with cubicOut easing\n     *  el.animateTo({\n     *      shape: {\n     *          width: 500\n     *      },\n     *      style: {\n     *          fill: 'red'\n     *      }\n     *      position: [10, 10]\n     *  }, {\n     *      duration: 100,\n     *      delay: 100,\n     *      easing: 'cubicOut',\n     *      done: () => { // done }\n     *  })\n     */\n    animateTo(target: Props, cfg?: ElementAnimateConfig, animationProps?: MapToType<Props, boolean>) {\n        animateTo(this, target, cfg, animationProps);\n    }\n\n    /**\n     * Animate from the target state to current state.\n     * The params and the value are the same as `this.animateTo`.\n     */\n\n    // Overload definitions\n    animateFrom(\n        target: Props, cfg: ElementAnimateConfig, animationProps?: MapToType<Props, boolean>\n    ) {\n        animateTo(this, target, cfg, animationProps, true);\n    }\n\n    protected _transitionState(\n        stateName: string, target: Props, cfg?: ElementAnimateConfig, animationProps?: MapToType<Props, boolean>\n    ) {\n        const animators = animateTo(this, target, cfg, animationProps);\n        for (let i = 0; i < animators.length; i++) {\n            animators[i].__fromStateTransition = stateName;\n        }\n    }\n\n    /**\n     * Interface of getting the minimum bounding box.\n     */\n    getBoundingRect(): BoundingRect {\n        return null;\n    }\n\n    getPaintRect(): BoundingRect {\n        return null;\n    }\n\n    /**\n     * The string value of `textPosition` needs to be calculated to a real postion.\n     * For example, `'inside'` is calculated to `[rect.width/2, rect.height/2]`\n     * by default. See `contain/text.js#calculateTextPosition` for more details.\n     * But some coutom shapes like \"pin\", \"flag\" have center that is not exactly\n     * `[width/2, height/2]`. So we provide this hook to customize the calculation\n     * for those shapes. It will be called if the `style.textPosition` is a string.\n     * @param {Obejct} [out] Prepared out object. If not provided, this method should\n     *        be responsible for creating one.\n     * @param {module:zrender/graphic/Style} style\n     * @param {Object} rect {x, y, width, height}\n     * @return {Obejct} out The same as the input out.\n     *         {\n     *             x: number. mandatory.\n     *             y: number. mandatory.\n     *             align: string. optional. use style.textAlign by default.\n     *             verticalAlign: string. optional. use style.textVerticalAlign by default.\n     *         }\n     */\n    calculateTextPosition: ElementCalculateTextPosition;\n\n    protected static initDefaultProps = (function () {\n        const elProto = Element.prototype;\n        elProto.type = 'element';\n        elProto.name = '';\n        elProto.ignore = false;\n        elProto.silent = false;\n        elProto.isGroup = false;\n        elProto.draggable = false;\n        elProto.dragging = false;\n        elProto.ignoreClip = false;\n        elProto.__inHover = false;\n        elProto.__dirty = REDRAW_BIT;\n\n\n        const logs: Dictionary<boolean> = {};\n        function logDeprecatedError(key: string, xKey: string, yKey: string) {\n            if (!logs[key + xKey + yKey]) {\n                console.warn(`DEPRECATED: '${key}' has been deprecated. use '${xKey}', '${yKey}' instead`);\n                logs[key + xKey + yKey] = true;\n            }\n        }\n        // Legacy transform properties. position and scale\n        function createLegacyProperty(\n            key: string,\n            privateKey: string,\n            xKey: string,\n            yKey: string\n        ) {\n            Object.defineProperty(elProto, key, {\n                get() {\n                    logDeprecatedError(key, xKey, yKey);\n                    if (!this[privateKey]) {\n                        const pos: number[] = this[privateKey] = [];\n                        enhanceArray(this, pos);\n                    }\n                    return this[privateKey];\n                },\n                set(pos: number[]) {\n                    logDeprecatedError(key, xKey, yKey);\n                    this[xKey] = pos[0];\n                    this[yKey] = pos[1];\n                    this[privateKey] = pos;\n                    enhanceArray(this, pos);\n                }\n            });\n            function enhanceArray(self: any, pos: number[]) {\n                Object.defineProperty(pos, 0, {\n                    get() {\n                        return self[xKey];\n                    },\n                    set(val: number) {\n                        self[xKey] = val;\n                    }\n                });\n                Object.defineProperty(pos, 1, {\n                    get() {\n                        return self[yKey];\n                    },\n                    set(val: number) {\n                        self[yKey] = val;\n                    }\n                });\n            }\n        }\n        if (Object.defineProperty && (!(env as any).browser.ie || (env as any).browser.version > 8)) {\n            createLegacyProperty('position', '_legacyPos', 'x', 'y');\n            createLegacyProperty('scale', '_legacyScale', 'scaleX', 'scaleY');\n            createLegacyProperty('origin', '_legacyOrigin', 'originX', 'originY');\n        }\n    })()\n}\n\nmixin(Element, Eventful);\nmixin(Element, Transformable);\n\nfunction animateTo<T>(\n    animatable: Element<T>,\n    target: Dictionary<any>,\n    cfg: ElementAnimateConfig,\n    animationProps: Dictionary<any>,\n    reverse?: boolean\n) {\n    cfg = cfg || {};\n    const animators: Animator<any>[] = [];\n    animateToShallow(\n        animatable,\n        '',\n        animatable,\n        target,\n        cfg,\n        animationProps,\n        animators,\n        reverse\n    );\n\n    let finishCount = animators.length;\n    let doneHappened = false;\n    const cfgDone = cfg.done;\n    const cfgAborted = cfg.aborted;\n\n    const doneCb = () => {\n        doneHappened = true;\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n\n    const abortedCb = () => {\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n\n    // No animators. This should be checked before animators[i].start(),\n    // because 'done' may be executed immediately if no need to animate.\n    if (!finishCount) {\n        cfgDone && cfgDone();\n    }\n\n    // Adding during callback to the first animator\n    if (animators.length > 0 && cfg.during) {\n        // TODO If there are two animators in animateTo, and the first one is stopped by other animator.\n        animators[0].during((target, percent) => {\n            cfg.during(percent);\n        });\n    }\n\n    // Start after all animators created\n    // Incase any animator is done immediately when all animation properties are not changed\n    for (let i = 0; i < animators.length; i++) {\n        const animator = animators[i];\n        if (doneCb) {\n            animator.done(doneCb);\n        }\n        if (abortedCb) {\n            animator.aborted(abortedCb);\n        }\n        animator.start(cfg.easing, cfg.force);\n    }\n\n    return animators;\n}\n\nfunction copyArrShallow(source: number[], target: number[], len: number) {\n    for (let i = 0; i < len; i++) {\n        source[i] = target[i];\n    }\n}\n\nfunction is2DArray(value: any[]): value is number[][] {\n    return isArrayLike(value[0]);\n}\n\nfunction copyValue(target: Dictionary<any>, source: Dictionary<any>, key: string) {\n    if (isArrayLike(source[key])) {\n        if (!isArrayLike(target[key])) {\n            target[key] = [];\n        }\n\n        if (isTypedArray(source[key])) {\n            const len = source[key].length;\n            if (target[key].length !== len) {\n                target[key] = new (source[key].constructor)(len);\n                copyArrShallow(target[key], source[key], len);\n            }\n        }\n        else {\n            const sourceArr = source[key] as any[];\n            const targetArr = target[key] as any[];\n\n            const len0 = sourceArr.length;\n            if (is2DArray(sourceArr)) {\n                // NOTE: each item should have same length\n                const len1 = sourceArr[0].length;\n\n                for (let i = 0; i < len0; i++) {\n                    if (!targetArr[i]) {\n                        targetArr[i] = Array.prototype.slice.call(sourceArr[i]);\n                    }\n                    else {\n                        copyArrShallow(targetArr[i], sourceArr[i], len1);\n                    }\n                }\n            }\n            else {\n                copyArrShallow(targetArr, sourceArr, len0);\n            }\n\n            targetArr.length = sourceArr.length;\n        }\n    }\n    else {\n        target[key] = source[key];\n    }\n}\n\nfunction animateToShallow<T>(\n    animatable: Element<T>,\n    topKey: string,\n    source: Dictionary<any>,\n    target: Dictionary<any>,\n    cfg: ElementAnimateConfig,\n    animationProps: Dictionary<any> | true,\n    animators: Animator<any>[],\n    reverse: boolean    // If `true`, animate from the `target` to current state.\n) {\n    const animatableKeys: string[] = [];\n    const changedKeys: string[] = [];\n    const targetKeys = keys(target);\n    const duration = cfg.duration;\n    const delay = cfg.delay;\n    const additive = cfg.additive;\n    const setToFinal = cfg.setToFinal;\n    const animateAll = !isObject(animationProps);\n    for (let k = 0; k < targetKeys.length; k++) {\n        const innerKey = targetKeys[k] as string;\n\n        if (source[innerKey] != null\n            && target[innerKey] != null // Can't animate between null value. assign directly. For example. stroke animate from #fff to null.\n            && (animateAll || (animationProps as Dictionary<any>)[innerKey])\n        ) {\n            if (isObject(target[innerKey]) && !isArrayLike(target[innerKey])) {\n                if (topKey) {\n                    // logError('Only support 1 depth nest object animation.');\n                    // Assign directly.\n                    // TODO richText?\n                    if (!reverse) {\n                        source[innerKey] = target[innerKey];\n                        animatable.updateDuringAnimation(topKey);\n                    }\n                    continue;\n                }\n                animateToShallow(\n                    animatable,\n                    innerKey,\n                    source[innerKey],\n                    target[innerKey],\n                    cfg,\n                    animationProps && (animationProps as Dictionary<any>)[innerKey],\n                    animators,\n                    reverse\n                );\n            }\n            else {\n                animatableKeys.push(innerKey);\n                changedKeys.push(innerKey);\n            }\n        }\n        else if (!reverse) {\n            // Assign target value directly.\n            source[innerKey] = target[innerKey];\n            animatable.updateDuringAnimation(topKey);\n            // Previous animation will be stopped on the changed keys.\n            // So direct assign is also included.\n            changedKeys.push(innerKey);\n        }\n    }\n\n    const keyLen = animatableKeys.length;\n\n    if (keyLen > 0\n        // cfg.force is mainly for keep invoking onframe and ondone callback even if animation is not necessary.\n        // So if there is already has animators. There is no need to create another animator if not necessary.\n        // Or it will always add one more with empty target.\n        || (cfg.force && !animators.length)\n    ) {\n        // Find last animator animating same prop.\n        const existsAnimators = animatable.animators;\n        let existsAnimatorsOnSameTarget: Animator<any>[] = [];\n        for (let i = 0; i < existsAnimators.length; i++) {\n            // Use key string instead object reference because ref may be changed.\n            if (existsAnimators[i].targetName === topKey) {\n                existsAnimatorsOnSameTarget.push(existsAnimators[i]);\n            }\n        }\n\n        if (!additive && existsAnimatorsOnSameTarget.length) {\n            // Stop exists animation on specific tracks. Only one animator available for each property.\n            // TODO Should invoke previous animation callback?\n            for (let i = 0; i < existsAnimatorsOnSameTarget.length; i++) {\n                const allAborted = existsAnimatorsOnSameTarget[i].stopTracks(changedKeys);\n                if (allAborted) {   // This animator can't be used.\n                    const idx = indexOf(existsAnimators, existsAnimatorsOnSameTarget[i]);\n                    existsAnimators.splice(idx, 1);\n                }\n            }\n        }\n\n        let revertedSource: Dictionary<any>;\n        let reversedTarget: Dictionary<any>;\n        let sourceClone: Dictionary<any>;\n        if (reverse) {\n            reversedTarget = {};\n            if (setToFinal) {\n                revertedSource = {};\n            }\n            for (let i = 0; i < keyLen; i++) {\n                const innerKey = animatableKeys[i];\n                reversedTarget[innerKey] = source[innerKey];\n                if (setToFinal) {\n                    revertedSource[innerKey] = target[innerKey];\n                }\n                else {\n                    // The usage of \"animateFrom\" expects that the element props has been updated dirctly to\n                    // \"final\" values outside, and input the \"from\" values here (i.e., in variable `target` here).\n                    // So here we assign the \"from\" values directly to element here (rather that in the next frame)\n                    // to prevent the \"final\" values from being read in any other places (like other running\n                    // animator during callbacks).\n                    // But if `setToFinal: true` this feature can not be satisfied.\n                    source[innerKey] = target[innerKey];\n                }\n            }\n        }\n        else if (setToFinal) {\n            sourceClone = {};\n            for (let i = 0; i < keyLen; i++) {\n                const innerKey = animatableKeys[i];\n                // NOTE: Must clone source after the stopTracks. The property may be modified in stopTracks.\n                sourceClone[innerKey] = cloneValue(source[innerKey]);\n                // Use copy, not change the original reference\n                // Copy from target to source.\n                copyValue(source, target, innerKey);\n            }\n        }\n\n        const animator = new Animator(source, false, additive ? existsAnimatorsOnSameTarget : null);\n        animator.targetName = topKey;\n        if (cfg.scope) {\n            animator.scope = cfg.scope;\n        }\n\n        if (setToFinal && revertedSource) {\n            animator.whenWithKeys(0, revertedSource, animatableKeys);\n        }\n        if (sourceClone) {\n            animator.whenWithKeys(0, sourceClone, animatableKeys);\n        }\n\n        animator.whenWithKeys(\n            duration == null ? 500 : duration,\n            reverse ? reversedTarget : target,\n            animatableKeys\n        ).delay(delay || 0);\n\n        animatable.addAnimator(animator, topKey);\n        animators.push(animator);\n    }\n}\n\n\nexport default Element;\n","/**\n * Group是一个容器，可以插入子节点，Group的变换也会被应用到子节点上\n * @module zrender/graphic/Group\n * @example\n *     const Group = require('zrender/graphic/Group');\n *     const Circle = require('zrender/graphic/shape/Circle');\n *     const g = new Group();\n *     g.position[0] = 100;\n *     g.position[1] = 100;\n *     g.add(new Circle({\n *         style: {\n *             x: 100,\n *             y: 100,\n *             r: 20,\n *         }\n *     }));\n *     zr.add(g);\n */\n\nimport * as zrUtil from '../core/util';\nimport Element, { ElementProps } from '../Element';\nimport BoundingRect from '../core/BoundingRect';\nimport { MatrixArray } from '../core/matrix';\nimport Displayable from './Displayable';\nimport { ZRenderType } from '../zrender';\n\nexport interface GroupProps extends ElementProps {\n}\n\nclass Group extends Element<GroupProps> {\n\n    readonly isGroup = true\n\n    private _children: Element[] = []\n\n\n    constructor(opts?: GroupProps) {\n        super();\n\n        this.attr(opts);\n    }\n\n    /**\n     * Get children reference.\n     */\n    childrenRef() {\n        return this._children;\n    }\n\n    /**\n     * Get children copy.\n     */\n    children() {\n        return this._children.slice();\n    }\n\n    /**\n     * 获取指定 index 的儿子节点\n     */\n    childAt(idx: number): Element {\n        return this._children[idx];\n    }\n\n    /**\n     * 获取指定名字的儿子节点\n     */\n    childOfName(name: string): Element {\n        const children = this._children;\n        for (let i = 0; i < children.length; i++) {\n            if (children[i].name === name) {\n                return children[i];\n            }\n        }\n    }\n\n    childCount(): number {\n        return this._children.length;\n    }\n\n    /**\n     * 添加子节点到最后\n     */\n    add(child: Element): Group {\n        if (child) {\n            if (child !== this && child.parent !== this) {\n                this._children.push(child);\n                this._doAdd(child);\n            }\n            if (child.__hostTarget) {\n                throw 'This elemenet has been used as an attachment';\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * 添加子节点在 nextSibling 之前\n     */\n    addBefore(child: Element, nextSibling: Element) {\n        if (child && child !== this && child.parent !== this\n            && nextSibling && nextSibling.parent === this) {\n\n            const children = this._children;\n            const idx = children.indexOf(nextSibling);\n\n            if (idx >= 0) {\n                children.splice(idx, 0, child);\n                this._doAdd(child);\n            }\n        }\n\n        return this;\n    }\n\n    replace(oldChild: Element, newChild: Element) {\n        const idx = zrUtil.indexOf(this._children, oldChild);\n        if (idx >= 0) {\n            this.replaceAt(newChild, idx);\n        }\n        return this;\n    }\n\n    replaceAt(child: Element, index: number) {\n        const children = this._children;\n        const old = children[index];\n\n        if (child && child !== this && child.parent !== this && child !== old) {\n            children[index] = child;\n\n            old.parent = null;\n            const zr = this.__zr;\n            if (zr) {\n                old.removeSelfFromZr(zr);\n            }\n\n            this._doAdd(child);\n        }\n\n        return this;\n    }\n\n    _doAdd(child: Element) {\n        if (child.parent) {\n            // Parent must be a group\n            (child.parent as Group).remove(child);\n        }\n\n        child.parent = this;\n\n        const zr = this.__zr;\n        if (zr && zr !== (child as Group).__zr) {    // Only group has __storage\n\n            child.addSelfToZr(zr);\n        }\n\n        zr && zr.refresh();\n    }\n\n    /**\n     * Remove child\n     * @param child\n     */\n    remove(child: Element) {\n        const zr = this.__zr;\n        const children = this._children;\n\n        const idx = zrUtil.indexOf(children, child);\n        if (idx < 0) {\n            return this;\n        }\n        children.splice(idx, 1);\n\n        child.parent = null;\n\n        if (zr) {\n\n            child.removeSelfFromZr(zr);\n        }\n\n        zr && zr.refresh();\n\n        return this;\n    }\n\n    /**\n     * Remove all children\n     */\n    removeAll() {\n        const children = this._children;\n        const zr = this.__zr;\n        for (let i = 0; i < children.length; i++) {\n            const child = children[i];\n            if (zr) {\n                child.removeSelfFromZr(zr);\n            }\n            child.parent = null;\n        }\n        children.length = 0;\n\n        return this;\n    }\n\n    /**\n     * 遍历所有子节点\n     */\n    eachChild<Context>(\n        cb: (this: Context, el: Element, index?: number) => void,\n        context?: Context\n    ) {\n        const children = this._children;\n        for (let i = 0; i < children.length; i++) {\n            const child = children[i];\n            cb.call(context, child, i);\n        }\n        return this;\n    }\n\n    /**\n     * Visit all descendants.\n     * Return false in callback to stop visit descendants of current node\n     */\n    // TODO Group itself should also invoke the callback.\n    traverse<T>(\n        cb: (this: T, el: Element) => boolean | void,\n        context?: T\n    ) {\n        for (let i = 0; i < this._children.length; i++) {\n            const child = this._children[i];\n            const stopped = cb.call(context, child);\n\n            if (child.isGroup && !stopped) {\n                child.traverse(cb, context);\n            }\n        }\n        return this;\n    }\n\n    addSelfToZr(zr: ZRenderType) {\n        super.addSelfToZr(zr);\n        for (let i = 0; i < this._children.length; i++) {\n            const child = this._children[i];\n            child.addSelfToZr(zr);\n        }\n    }\n\n    removeSelfFromZr(zr: ZRenderType) {\n        super.removeSelfFromZr(zr);\n        for (let i = 0; i < this._children.length; i++) {\n            const child = this._children[i];\n            child.removeSelfFromZr(zr);\n        }\n    }\n\n    getBoundingRect(includeChildren?: Element[]): BoundingRect {\n        // TODO Caching\n        const tmpRect = new BoundingRect(0, 0, 0, 0);\n        const children = includeChildren || this._children;\n        const tmpMat: MatrixArray = [];\n        let rect = null;\n\n        for (let i = 0; i < children.length; i++) {\n            const child = children[i];\n            // TODO invisible?\n            if (child.ignore || (child as Displayable).invisible) {\n                continue;\n            }\n\n            const childRect = child.getBoundingRect();\n            const transform = child.getLocalTransform(tmpMat);\n            // TODO\n            // The boundingRect cacluated by transforming original\n            // rect may be bigger than the actual bundingRect when rotation\n            // is used. (Consider a circle rotated aginst its center, where\n            // the actual boundingRect should be the same as that not be\n            // rotated.) But we can not find better approach to calculate\n            // actual boundingRect yet, considering performance.\n            if (transform) {\n                BoundingRect.applyTransform(tmpRect, childRect, transform);\n                rect = rect || tmpRect.clone();\n                rect.union(tmpRect);\n            }\n            else {\n                rect = rect || childRect.clone();\n                rect.union(childRect);\n            }\n        }\n        return rect || tmpRect;\n    }\n}\n\nGroup.prototype.type = 'group';\n// Storage will use childrenRef to get children to render.\nexport interface GroupLike extends Element {\n    childrenRef(): Element[]\n}\n\nexport default Group;","/*!\n* ZRender, a high performance 2d drawing library.\n*\n* Copyright (c) 2013, Baidu Inc.\n* All rights reserved.\n*\n* LICENSE\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n*/\n\nimport env from './core/env';\nimport * as zrUtil from './core/util';\nimport Handler from './Handler';\nimport Storage from './Storage';\nimport {PainterBase} from './PainterBase';\nimport Animation from './animation/Animation';\nimport HandlerProxy from './dom/HandlerProxy';\nimport Element, { ElementEventCallback } from './Element';\nimport { Dictionary, ElementEventName, RenderedEvent, WithThisType } from './core/types';\nimport { LayerConfig } from './canvas/Layer';\nimport { GradientObject } from './graphic/Gradient';\nimport { PatternObject } from './graphic/Pattern';\nimport { EventCallback } from './core/Eventful';\nimport TSpan from './graphic/TSpan';\nimport ZRImage from './graphic/Image';\nimport Displayable from './graphic/Displayable';\nimport { lum } from './tool/color';\nimport { DARK_MODE_THRESHOLD } from './config';\nimport Path from './graphic/Path';\nimport Group from './graphic/Group';\n\n\nconst useVML = !env.canvasSupported;\n\ntype PainterBaseCtor = {\n    new(dom: HTMLElement, storage: Storage, ...args: any[]): PainterBase\n}\n\nconst painterCtors: Dictionary<PainterBaseCtor> = {};\n\nlet instances: { [key: number]: ZRender } = {};\n\nfunction delInstance(id: number) {\n    delete instances[id];\n}\n\nfunction isDarkMode(backgroundColor: string | GradientObject | PatternObject): boolean {\n    if (!backgroundColor) {\n        return false;\n    }\n    if (typeof backgroundColor === 'string') {\n        return lum(backgroundColor, 1) < DARK_MODE_THRESHOLD;\n    }\n    else if ((backgroundColor as GradientObject).colorStops) {\n        const colorStops = (backgroundColor as GradientObject).colorStops;\n        let totalLum = 0;\n        const len = colorStops.length;\n        // Simply do the math of average the color. Not consider the offset\n        for (let i = 0; i < len; i++) {\n            totalLum += lum(colorStops[i].color, 1);\n        }\n        totalLum /= len;\n\n        return totalLum < DARK_MODE_THRESHOLD;\n    }\n    // Can't determine\n    return false;\n}\n\nclass ZRender {\n\n    dom: HTMLElement\n\n    id: number\n\n    storage: Storage\n    painter: PainterBase\n    handler: Handler\n    animation: Animation\n\n    private _sleepAfterStill = 10;\n\n    private _stillFrameAccum = 0;\n\n    private _needsRefresh = true\n    private _needsRefreshHover = true\n\n    /**\n     * If theme is dark mode. It will determine the color strategy for labels.\n     */\n    private _darkMode = false;\n\n    private _backgroundColor: string | GradientObject | PatternObject;\n\n    constructor(id: number, dom: HTMLElement, opts?: ZRenderInitOpt) {\n        opts = opts || {};\n\n        /**\n         * @type {HTMLDomElement}\n         */\n        this.dom = dom;\n\n        this.id = id;\n\n        const storage = new Storage();\n\n        let rendererType = opts.renderer || 'canvas';\n\n        // TODO WebGL\n        if (useVML) {\n            throw new Error('IE8 support has been dropped since 5.0');\n        }\n\n        if (!painterCtors[rendererType]) {\n            // Use the first registered renderer.\n            rendererType = zrUtil.keys(painterCtors)[0];\n        }\n        if (!painterCtors[rendererType]) {\n            throw new Error(`Renderer '${rendererType}' is not imported. Please import it first.`);\n        }\n\n        opts.useDirtyRect = opts.useDirtyRect == null\n            ? false\n            : opts.useDirtyRect;\n\n        const painter = new painterCtors[rendererType](dom, storage, opts, id);\n\n        this.storage = storage;\n        this.painter = painter;\n\n        const handerProxy = (!env.node && !env.worker)\n            ? new HandlerProxy(painter.getViewportRoot(), painter.root)\n            : null;\n        this.handler = new Handler(storage, painter, handerProxy, painter.root);\n\n        this.animation = new Animation({\n            stage: {\n                update: () => this._flush(true)\n            }\n        });\n        this.animation.start();\n    }\n\n    /**\n     * 添加元素\n     */\n    add(el: Element) {\n        if (!el) {\n            return;\n        }\n        this.storage.addRoot(el);\n        el.addSelfToZr(this);\n        this.refresh();\n    }\n\n    /**\n     * 删除元素\n     */\n    remove(el: Element) {\n        if (!el) {\n            return;\n        }\n        this.storage.delRoot(el);\n        el.removeSelfFromZr(this);\n        this.refresh();\n    }\n\n    /**\n     * Change configuration of layer\n    */\n    configLayer(zLevel: number, config: LayerConfig) {\n        if (this.painter.configLayer) {\n            this.painter.configLayer(zLevel, config);\n        }\n        this.refresh();\n    }\n\n    /**\n     * Set background color\n     */\n    setBackgroundColor(backgroundColor: string | GradientObject | PatternObject) {\n        if (this.painter.setBackgroundColor) {\n            this.painter.setBackgroundColor(backgroundColor);\n        }\n        this.refresh();\n        this._backgroundColor = backgroundColor;\n        this._darkMode = isDarkMode(backgroundColor);\n    }\n\n    getBackgroundColor() {\n        return this._backgroundColor;\n    }\n\n    /**\n     * Force to set dark mode\n     */\n    setDarkMode(darkMode: boolean) {\n        this._darkMode = darkMode;\n    }\n\n    isDarkMode() {\n        return this._darkMode;\n    }\n\n    /**\n     * Repaint the canvas immediately\n     */\n    refreshImmediately(fromInside?: boolean) {\n        // const start = new Date();\n\n        if (!fromInside) {\n            // Update animation if refreshImmediately is invoked from outside.\n            // Not trigger stage update to call flush again. Which may refresh twice\n            this.animation.update(true);\n        }\n\n        // Clear needsRefresh ahead to avoid something wrong happens in refresh\n        // Or it will cause zrender refreshes again and again.\n        this._needsRefresh = false;\n        this.painter.refresh();\n        // Avoid trigger zr.refresh in Element#beforeUpdate hook\n        this._needsRefresh = false;\n\n        // const end = new Date();\n        // const log = document.getElementById('log');\n        // if (log) {\n        //     log.innerHTML = log.innerHTML + '<br>' + (end - start);\n        // }\n    }\n\n    /**\n     * Mark and repaint the canvas in the next frame of browser\n     */\n    refresh() {\n        this._needsRefresh = true;\n        // Active the animation again.\n        this.animation.start();\n    }\n\n    /**\n     * Perform all refresh\n     */\n    flush() {\n        this._flush(false);\n    }\n\n    private _flush(fromInside?: boolean) {\n        let triggerRendered;\n\n        const start = new Date().getTime();\n        if (this._needsRefresh) {\n            triggerRendered = true;\n            this.refreshImmediately(fromInside);\n        }\n\n        if (this._needsRefreshHover) {\n            triggerRendered = true;\n            this.refreshHoverImmediately();\n        }\n        const end = new Date().getTime();\n\n        if (triggerRendered) {\n            this._stillFrameAccum = 0;\n            this.trigger('rendered', {\n                elapsedTime: end - start\n            } as RenderedEvent);\n        }\n        else if (this._sleepAfterStill > 0) {\n            this._stillFrameAccum++;\n            // Stop the animiation after still for 10 frames.\n            if (this._stillFrameAccum > this._sleepAfterStill) {\n                this.animation.stop();\n            }\n        }\n    }\n\n    /**\n     * Set sleep after still for frames.\n     * Disable auto sleep when it's 0.\n     */\n    setSleepAfterStill(stillFramesCount: number) {\n        this._sleepAfterStill = stillFramesCount;\n    }\n\n    /**\n     * Wake up animation loop. But not render.\n     */\n    wakeUp() {\n        this.animation.start();\n        // Reset the frame count.\n        this._stillFrameAccum = 0;\n    }\n\n    /**\n     * Add element to hover layer\n     */\n    addHover(el: Displayable) {\n        // deprecated.\n    }\n\n    /**\n     * Add element from hover layer\n     */\n    removeHover(el: Path | TSpan | ZRImage) {\n        // deprecated.\n    }\n\n    /**\n     * Clear all hover elements in hover layer\n     */\n    clearHover() {\n        // deprecated.\n    }\n\n    /**\n     * Refresh hover in next frame\n     */\n    refreshHover() {\n        this._needsRefreshHover = true;\n    }\n\n    /**\n     * Refresh hover immediately\n     */\n    refreshHoverImmediately() {\n        this._needsRefreshHover = false;\n        if (this.painter.refreshHover && this.painter.getType() === 'canvas') {\n            this.painter.refreshHover();\n        }\n    }\n\n    /**\n     * Resize the canvas.\n     * Should be invoked when container size is changed\n     */\n    resize(opts?: {\n        width?: number| string\n        height?: number | string\n    }) {\n        opts = opts || {};\n        this.painter.resize(opts.width, opts.height);\n        this.handler.resize();\n    }\n\n    /**\n     * Stop and clear all animation immediately\n     */\n    clearAnimation() {\n        this.animation.clear();\n    }\n\n    /**\n     * Get container width\n     */\n    getWidth(): number {\n        return this.painter.getWidth();\n    }\n\n    /**\n     * Get container height\n     */\n    getHeight(): number {\n        return this.painter.getHeight();\n    }\n\n    /**\n     * Export the canvas as Base64 URL\n     * @param {string} type\n     * @param {string} [backgroundColor='#fff']\n     * @return {string} Base64 URL\n     */\n    // toDataURL: function(type, backgroundColor) {\n    //     return this.painter.getRenderedCanvas({\n    //         backgroundColor: backgroundColor\n    //     }).toDataURL(type);\n    // },\n\n    /**\n     * Converting a path to image.\n     * It has much better performance of drawing image rather than drawing a vector path.\n     */\n    pathToImage(e: Path, dpr: number) {\n        if (this.painter.pathToImage) {\n            return this.painter.pathToImage(e, dpr);\n        }\n    }\n\n    /**\n     * Set default cursor\n     * @param cursorStyle='default' 例如 crosshair\n     */\n    setCursorStyle(cursorStyle: string) {\n        this.handler.setCursorStyle(cursorStyle);\n    }\n\n    /**\n     * Find hovered element\n     * @param x\n     * @param y\n     * @return {target, topTarget}\n     */\n    findHover(x: number, y: number): {\n        target: Displayable\n        topTarget: Displayable\n    } {\n        return this.handler.findHover(x, y);\n    }\n\n    on<Ctx>(eventName: ElementEventName, eventHandler: ElementEventCallback<Ctx, ZRenderType>, context?: Ctx): this\n    // eslint-disable-next-line max-len\n    on<Ctx>(eventName: string, eventHandler: WithThisType<EventCallback<any[]>, unknown extends Ctx ? ZRenderType : Ctx>, context?: Ctx): this\n    // eslint-disable-next-line max-len\n    on<Ctx>(eventName: string, eventHandler: (...args: any) => any, context?: Ctx): this {\n        this.handler.on(eventName, eventHandler, context);\n        return this;\n    }\n\n    /**\n     * Unbind event\n     * @param eventName Event name\n     * @param eventHandler Handler function\n     */\n    // eslint-disable-next-line max-len\n    off(eventName?: string, eventHandler?: EventCallback) {\n        this.handler.off(eventName, eventHandler);\n    }\n\n    /**\n     * Trigger event manually\n     *\n     * @param eventName Event name\n     * @param event Event object\n     */\n    trigger(eventName: string, event?: unknown) {\n        this.handler.trigger(eventName, event);\n    }\n\n\n    /**\n     * Clear all objects and the canvas.\n     */\n    clear() {\n        const roots = this.storage.getRoots();\n        for (let i = 0; i < roots.length; i++) {\n            if (roots[i] instanceof Group) {\n                roots[i].removeSelfFromZr(this);\n            }\n        }\n        this.storage.delAllRoots();\n        this.painter.clear();\n    }\n\n    /**\n     * Dispose self.\n     */\n    dispose() {\n        this.animation.stop();\n\n        this.clear();\n        this.storage.dispose();\n        this.painter.dispose();\n        this.handler.dispose();\n\n        this.animation =\n        this.storage =\n        this.painter =\n        this.handler = null;\n\n        delInstance(this.id);\n    }\n}\n\n\nexport interface ZRenderInitOpt {\n    renderer?: string   // 'canvas' or 'svg\n    devicePixelRatio?: number\n    width?: number | string // 10, 10px, 'auto'\n    height?: number | string\n    useDirtyRect?: boolean\n}\n\n/**\n * Initializing a zrender instance\n */\nexport function init(dom: HTMLElement, opts?: ZRenderInitOpt) {\n    const zr = new ZRender(zrUtil.guid(), dom, opts);\n    instances[zr.id] = zr;\n    return zr;\n}\n\n/**\n * Dispose zrender instance\n */\nexport function dispose(zr: ZRender) {\n    zr.dispose();\n}\n\n/**\n * Dispose all zrender instances\n */\nexport function disposeAll() {\n    for (let key in instances) {\n        if (instances.hasOwnProperty(key)) {\n            instances[key].dispose();\n        }\n    }\n    instances = {};\n}\n\n/**\n * Get zrender instance by id\n */\nexport function getInstance(id: number): ZRender {\n    return instances[id];\n}\n\nexport function registerPainter(name: string, Ctor: PainterBaseCtor) {\n    painterCtors[name] = Ctor;\n}\n\n/**\n * @type {string}\n */\nexport const version = '5.2.1';\n\n\nexport interface ZRenderType extends ZRender {};","import * as zrender from 'zrender/src/zrender'\nclass Flow {\n    private render: zrender.ZRenderType = null\n\n    constructor(container: HTMLElement) {\n        container.innerHTML = 'Hello flow!'\n        // this.render = zrender.init(container)\n        console.log(zrender)\n    }\n\n    init() {}\n}\n\nexport default Flow\n"],"names":["dist","eventUtil.clientToLocal","eventTool.stop","util.each","vec2.dist","timsort","util.indexOf","easing","easingFuncs","color.parse","requestAnimationFrame","zrUtil.map","zrUtil.noop","zrUtil.each","matrix.identity","matrix.create","matrix.mul","matrix.copy","matrix.invert","vector.applyTransform","matrix.rotate","matrix.translate","matrix.scale","zrUtil.indexOf","zrUtil.keys","HandlerProxy","zrUtil.guid"],"mappings":"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AI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YAClE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YAClE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YAClE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YAClE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YAClE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YAClE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,E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"}